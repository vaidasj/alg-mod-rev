GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:34:20 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  option MIP=convert;
   2  option MIP=convert;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:34:20 Page 2
Flow shop scheduling - (FLOWSHOP,SEQ=376)
C o m p i l a t i o n


   4   
      A workshop that produces metal pipes on demand for automotive industry
      has three machines for bending the pipes, soldering the fastenings,
      and assembling the links.  The workshop has to produce six items, for
      which the durations of the processing steps are given below.  Once
      started, jobs must be carried out to completion, but the
      workpieces(items) may wait between the machines.
       
      Every machine only processs one item at a time.  A workpiece(item) may
      not overtake any other.
       
      What is the sequence that minimizes the total time for completing all
      items (makespan)?
       
       
      Gueret, C, Prins, C, and Sevaux, M, Applications of Optimization with
      Xpress-MP, Translated and revised by Susanne Heipcke. Dash
      Optimization, 2002.
  24   
  25  Sets i item / i1*i6 /
  26       m machine / bending, soldering, assembly /;
  27   
  30   
  31  table proctime(m,i)
  32             i1   i2   i3   i4   i5   i6
  33  bending     3    6    3    5    5    7
  34  soldering   5    4    2    4    4    5
  35  assembly    5    2    4    6    3    6;
  36   
  37  alias (i,k);
  38   
  39  Variables
  40      rank(i,k)        item i has position k
  41      start(m,k)       start time for job in position k on m
  42      comp(m,k)        completion time for job in postion k on m
  43      totwait          time before first job + times between jobs on last machine;
  44   
  45  Binary variables rank
  46  Positive variables start, comp;
  47   
  48  equations
  49    oneInPosition(k)    Every position gets a jobs
  50    oneRankPer(i)       Every job is assigned a rank
  51    onmachrel(m,k)      Relations between the end of job rank k on machine m and start of job rank k on machine m+1
  52    permachrel(m,k)     Relations between the end of job rank k on machine m and start of job rank k+1 on machine m
  53    defcomp(m,k)        Calculation of completetion time based on start time and proctime
  54    defobj              completion time of job rank last;
  55   
  56  oneInPosition(k)..  sum(i, rank(i,k)) =e= 1;
  57   
  58  oneRankPer(i)..     sum(k, rank(i,k)) =e= 1;
  59   
  60  onmachrel(m,k+1)..  start(m,k+1) =g= comp(m,k);
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:34:20 Page 3
Flow shop scheduling - (FLOWSHOP,SEQ=376)
C o m p i l a t i o n


  61   
  62  permachrel(m+1,k).. start(m+1,k) =g= comp(m,k);
  63   
  64  defcomp(m,k)..      comp(m,k) =e= start(m,k) + sum(i, proctime(m,i)*rank(i,k));
  65   
  66  defobj..            totwait =g= comp('assembly','i6');
  67   
  68  model sequence /all/;
  69  option optcr=0;
  70  solve sequence using mip min totwait;
  71   
  72  * Maybe the following is better info to output
  73  parameter startjob(m,i);
  74  startjob(m,i) = sum(k$(rank.l(i,k)>0.5), start.l(m,k));
  75  option startjob:0:1:1; display startjob;
  76   
  77  * For small data we can just enumerate all permutations and evaluate the schedule
  79   
  80  * Only test with some LP solvers
EXIT /home/renigijus/gams/opt-mod-lib/gamslib/flowshop/flowshop.gms
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:34:20 Page 4
Flow shop scheduling - (FLOWSHOP,SEQ=376)
Include File Summary


   SEQ   GLOBAL TYPE      PARENT   LOCAL  FILENAME

     1        1 INPUT          0       0  /home/renigijus/gams/opt-mod-lib/gamslib/flowshop/flowshop.gms
     2       86 EXIT           1      86  /home/renigijus/gams/opt-mod-lib/gamslib/flowshop/flowshop.gms


COMPILATION TIME     =        0.000 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:34:20 Page 5
Flow shop scheduling - (FLOWSHOP,SEQ=376)
Equation Listing    SOLVE sequence Using MIP From line 70


---- oneInPosition  =E=  Every position gets a jobs

oneInPosition(i1)..  rank(i1,i1) + rank(i2,i1) + rank(i3,i1) + rank(i4,i1) + rank(i5,i1) + rank(i6,i1) =E= 1 ; (LHS = 0, INFES = 1 ****)
     
oneInPosition(i2)..  rank(i1,i2) + rank(i2,i2) + rank(i3,i2) + rank(i4,i2) + rank(i5,i2) + rank(i6,i2) =E= 1 ; (LHS = 0, INFES = 1 ****)
     
oneInPosition(i3)..  rank(i1,i3) + rank(i2,i3) + rank(i3,i3) + rank(i4,i3) + rank(i5,i3) + rank(i6,i3) =E= 1 ; (LHS = 0, INFES = 1 ****)
     
REMAINING 3 ENTRIES SKIPPED


---- oneRankPer  =E=  Every job is assigned a rank

oneRankPer(i1)..  rank(i1,i1) + rank(i1,i2) + rank(i1,i3) + rank(i1,i4) + rank(i1,i5) + rank(i1,i6) =E= 1 ; (LHS = 0, INFES = 1 ****)
     
oneRankPer(i2)..  rank(i2,i1) + rank(i2,i2) + rank(i2,i3) + rank(i2,i4) + rank(i2,i5) + rank(i2,i6) =E= 1 ; (LHS = 0, INFES = 1 ****)
     
oneRankPer(i3)..  rank(i3,i1) + rank(i3,i2) + rank(i3,i3) + rank(i3,i4) + rank(i3,i5) + rank(i3,i6) =E= 1 ; (LHS = 0, INFES = 1 ****)
     
REMAINING 3 ENTRIES SKIPPED


---- onmachrel  =G=  Relations between the end of job rank k on machine m and start of job rank k on machine m+1

onmachrel(bending,i2)..  start(bending,i2) - comp(bending,i1) =G= 0 ; (LHS = 0)
     
onmachrel(bending,i3)..  start(bending,i3) - comp(bending,i2) =G= 0 ; (LHS = 0)
     
onmachrel(bending,i4)..  start(bending,i4) - comp(bending,i3) =G= 0 ; (LHS = 0)
     
REMAINING 12 ENTRIES SKIPPED


---- permachrel  =G=  Relations between the end of job rank k on machine m and start of job rank k+1 on machine m

permachrel(soldering,i1)..  start(soldering,i1) - comp(bending,i1) =G= 0 ; (LHS = 0)
     
permachrel(soldering,i2)..  start(soldering,i2) - comp(bending,i2) =G= 0 ; (LHS = 0)
     
permachrel(soldering,i3)..  start(soldering,i3) - comp(bending,i3) =G= 0 ; (LHS = 0)
     
REMAINING 9 ENTRIES SKIPPED


---- defcomp  =E=  Calculation of completetion time based on start time and proctime

defcomp(bending,i1)..  - 3*rank(i1,i1) - 6*rank(i2,i1) - 3*rank(i3,i1) - 5*rank(i4,i1) - 5*rank(i5,i1) - 7*rank(i6,i1) - start(bending,i1) + comp(bending,i1) =E= 0 ; (LHS = 0)
     
defcomp(bending,i2)..  - 3*rank(i1,i2) - 6*rank(i2,i2) - 3*rank(i3,i2) - 5*rank(i4,i2) - 5*rank(i5,i2) - 7*rank(i6,i2) - start(bending,i2) + comp(bending,i2) =E= 0 ; (LHS = 0)
     
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:34:20 Page 6
Flow shop scheduling - (FLOWSHOP,SEQ=376)
Equation Listing    SOLVE sequence Using MIP From line 70


     defcomp  =E=  Calculation of completetion time based on start time and proctime

defcomp(bending,i3)..  - 3*rank(i1,i3) - 6*rank(i2,i3) - 3*rank(i3,i3) - 5*rank(i4,i3) - 5*rank(i5,i3) - 7*rank(i6,i3) - start(bending,i3) + comp(bending,i3) =E= 0 ; (LHS = 0)
     
REMAINING 15 ENTRIES SKIPPED


---- defobj  =G=  completion time of job rank last

defobj..  - comp(assembly,i6) + totwait =G= 0 ; (LHS = 0)
     
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:34:20 Page 7
Flow shop scheduling - (FLOWSHOP,SEQ=376)
Column Listing      SOLVE sequence Using MIP From line 70


---- rank  item i has position k

rank(i1,i1)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
        1       oneInPosition(i1)
        1       oneRankPer(i1)
       -3       defcomp(bending,i1)
       -5       defcomp(soldering,i1)
       -5       defcomp(assembly,i1)

rank(i1,i2)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
        1       oneInPosition(i2)
        1       oneRankPer(i1)
       -3       defcomp(bending,i2)
       -5       defcomp(soldering,i2)
       -5       defcomp(assembly,i2)

rank(i1,i3)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
        1       oneInPosition(i3)
        1       oneRankPer(i1)
       -3       defcomp(bending,i3)
       -5       defcomp(soldering,i3)
       -5       defcomp(assembly,i3)

REMAINING 33 ENTRIES SKIPPED

---- start  start time for job in position k on m

start(bending,i1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       defcomp(bending,i1)

start(bending,i2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       onmachrel(bending,i2)
       -1       defcomp(bending,i2)

start(bending,i3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       onmachrel(bending,i3)
       -1       defcomp(bending,i3)

REMAINING 15 ENTRIES SKIPPED

---- comp  completion time for job in postion k on m

comp(bending,i1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       onmachrel(bending,i2)
       -1       permachrel(soldering,i1)
        1       defcomp(bending,i1)
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:34:20 Page 8
Flow shop scheduling - (FLOWSHOP,SEQ=376)
Column Listing      SOLVE sequence Using MIP From line 70


     comp  completion time for job in postion k on m


comp(bending,i2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       onmachrel(bending,i3)
       -1       permachrel(soldering,i2)
        1       defcomp(bending,i2)

comp(bending,i3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       onmachrel(bending,i4)
       -1       permachrel(soldering,i3)
        1       defcomp(bending,i3)

REMAINING 15 ENTRIES SKIPPED

---- totwait  time before first job + times between jobs on last machine

totwait
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       defobj

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:34:20 Page 9
Flow shop scheduling - (FLOWSHOP,SEQ=376)
Model Statistics    SOLVE sequence Using MIP From line 70


MODEL STATISTICS

BLOCKS OF EQUATIONS           6     SINGLE EQUATIONS           58
BLOCKS OF VARIABLES           4     SINGLE VARIABLES           73
NON ZERO ELEMENTS           272     DISCRETE VARIABLES         36


GENERATION TIME      =        0.003 SECONDS      4 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.003 SECONDS      4 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 11:34:20 Page 10
Flow shop scheduling - (FLOWSHOP,SEQ=376)
Solution Report     SOLVE sequence Using MIP From line 70


               S O L V E      S U M M A R Y

     MODEL   sequence            OBJECTIVE  totwait
     TYPE    MIP                 DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  70

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/flowshop/convert.opt"
>>  gams flowshop-scalar.gms
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/flowshop/convert.opt"
Gams      : flowshop-scalar.gms


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 11:34:20 Page 11
Flow shop scheduling - (FLOWSHOP,SEQ=376)
E x e c u t i o n


----     75 PARAMETER startjob  

                      ( ALL          0. )



EXECUTION TIME       =        0.000 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


USER: Remigijus Paulavicius, Single User License     S170731:0859AO-LNX
      Imperial College London, Dept. of Chemical Engineering    DC13449
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      /home/renigijus/gams/opt-mod-lib/gamslib/flowshop/flowshop.gms
Output     /home/renigijus/gams/opt-mod-lib/gamslib/flowshop/flowshop-scalar.gms.lst
