GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:52 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  option LP=convert;
   2  option LP=convert;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:52 Page 2
Decomposition Principle - Animated (DECOMP,SEQ=164)
C o m p i l a t i o n


        The coordinator of a Central Agency must procure tanker services
        to assist his distribution. A subcontractor handles all the
        shipping details. This scenario is used to demonstrate the
        decomposition principle. For details see chapter 23-2 of Dantzig's
        original text on Linear Programming.
       
       
      Dantzig, G B, Chapter 23.2. In Linear Programming and Extensions.
      Princeton University Press, Princeton, New Jersey, 1963.
       
  16   
  17  sets i plants     / plant-1, plant-2 /
  18       j terminals  / term-1*term-4 /
  19   
  20   
  21     table c(i,j) cost matrix
  22   
  23           term-1  term-2  term-3  term-4
  24  plant-1    3       6       6       5
  25  plant-2    8       1       3       6
  26   
  27   
  28     table t(i,j) tankers required
  29   
  30           term-1  term-2  term-3  term-4
  31  plant-1                    2
  32  plant-2            2
  33   
  34  parameters a(i)   availability  / plant-1  9, plant-2  8 /
  35             b(j)   requirements  / term-1 2, term-2 7, term-3 3, term-4 5 /
  36             ctank  tanker cost
  37             cship  shipping cost
  38   
  39  variables cost   total cost
  40            tank   total tankers used
  41            ship   shipping cost
  42            x(i,j) shipments
  43  positive variable x
  44   
  45  equations defcost  cost definition
  46            defship  shipping cost
  47            deftank  tanker usage
  48            supply(i) supply balance
  49            demand(j) demand balance ;
  50   
  51  defcost.. cost =e= cship*ship + ctank*tank;
  52   
  53  defship.. ship =e= sum((i,j), c(i,j)*x(i,j));
  54   
  55  deftank.. tank =e= sum((i,j), t(i,j)*x(i,j));
  56   
  57  supply(i).. sum(j, x(i,j)) =L= a(i);
  58   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:52 Page 3
Decomposition Principle - Animated (DECOMP,SEQ=164)
C o m p i l a t i o n


  59  demand(j).. sum(i, x(i,j)) =g= b(j);
  60   
  61  model sub / defcost, defship, deftank, demand, supply /;
  62   
  63  sets  ss    master column labels / 1*10 /
  64        s(ss) active columns;
  65   
  66  parameter mcost(ss) cost solutions
  67            mtank(ss) tanker solutions;
  68   
  69  variables  mobj
  70             lam(ss)  column selection
  71  positive variable lam;
  72   
  73  equations cbal   cost balance
  74            tbal   tanker balance
  75            convex  combination;
  76   
  77  cbal..  mobj  =e= sum(s, mcost(s)*lam(s));
  78   
  79  tbal..  sum(s, mtank(s)*lam(s)) =l= 9;
  80   
  81  convex.. sum(s, lam(s)) =e= 1;
  82   
  83  model master / cbal, tbal,convex /;
  84   
  85  parameter rep(ss,*);
  86  * --- get first solution with zero cost for tankers
  87   
  88  cship = 1;
  89  ctank = 0;
  90  solve sub using lp minimizing cost;
  91  mcost('1') = ship.l;
  92  mtank('1') = tank.l;
  93   
  94  * --- get second solution with zero cost for tankers
  95   
  96  option limcol=0,limrow=0;
  97  solve sub using lp minimizing tank;
  98  mcost('2') = ship.l;
  99  mtank('2') = tank.l;
 100   
 101  * --- solve first master problem
 102   
 103  s('1') = yes; s('2') = yes;
 104   
 105  solve master using lp minimizing mobj;
 106   
 107  rep('2','obj')  = mobj.l;
 108  rep('2','s-pi') = convex.m;
 109  rep('2','t-pi') = -tbal.m;
 110  rep('2','gap')  = inf;
 111   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:52 Page 4
Decomposition Principle - Animated (DECOMP,SEQ=164)
C o m p i l a t i o n


 112  * --- now we are ready to iterate between master and sub problem;
 113   
 114  loop(ss$((not s(ss)) and (rep(ss-1,'gap') > .01)),
 115   
 116     ctank = -tbal.m;
 117   
 118     solve sub using lp minimizing cost;
 119     mcost(ss) = ship.l;
 120     mtank(ss) = tank.l;
 121     s(ss)     = yes;
 122   
 123     solve master using lp minimizing mobj;
 124   
 125     rep(ss,'obj')  = mobj.l;
 126     rep(ss,'s-pi') = convex.m;
 127     rep(ss,'t-pi') = -tbal.m;
 128     rep(ss,'bnd')  = rep(ss-1,'obj') - rep(ss-1,'s-pi')
 129                     + mcost(ss) + mtank(ss)* rep(ss-1,'t-pi');
 130     rep(ss,'best-bnd') = max(rep(ss-1,'best-bnd'),rep(ss,'bnd'));
 131     rep(ss,'gap')      = rep(ss,'obj') - rep(ss,'best-bnd');  );
 132   
 133  display mcost, mtank, rep;


COMPILATION TIME     =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:52 Page 5
Decomposition Principle - Animated (DECOMP,SEQ=164)
Equation Listing    SOLVE sub Using LP From line 90


---- defcost  =E=  cost definition

defcost..  cost - ship =E= 0 ; (LHS = 0)
     

---- defship  =E=  shipping cost

defship..  ship - 3*x(plant-1,term-1) - 6*x(plant-1,term-2) - 6*x(plant-1,term-3) - 5*x(plant-1,term-4) - 8*x(plant-2,term-1) - x(plant-2,term-2) - 3*x(plant-2,term-3) - 6*x(plant-2,term-4) =E= 0 ; (LHS = 0)
     

---- deftank  =E=  tanker usage

deftank..  tank - 2*x(plant-1,term-3) - 2*x(plant-2,term-2) =E= 0 ; (LHS = 0)
     

---- demand  =G=  demand balance

demand(term-1)..  x(plant-1,term-1) + x(plant-2,term-1) =G= 2 ; (LHS = 0, INFES = 2 ****)
     
demand(term-2)..  x(plant-1,term-2) + x(plant-2,term-2) =G= 7 ; (LHS = 0, INFES = 7 ****)
     
demand(term-3)..  x(plant-1,term-3) + x(plant-2,term-3) =G= 3 ; (LHS = 0, INFES = 3 ****)
     
REMAINING ENTRY SKIPPED


---- supply  =L=  supply balance

supply(plant-1)..  x(plant-1,term-1) + x(plant-1,term-2) + x(plant-1,term-3) + x(plant-1,term-4) =L= 9 ; (LHS = 0)
     
supply(plant-2)..  x(plant-2,term-1) + x(plant-2,term-2) + x(plant-2,term-3) + x(plant-2,term-4) =L= 8 ; (LHS = 0)
     
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:52 Page 6
Decomposition Principle - Animated (DECOMP,SEQ=164)
Column Listing      SOLVE sub Using LP From line 90


---- cost  total cost

cost
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       defcost


---- tank  total tankers used

tank
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       deftank


---- ship  shipping cost

ship
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
       -1       defcost
        1       defship


---- x  shipments

x(plant-1,term-1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -3       defship
        1       demand(term-1)
        1       supply(plant-1)

x(plant-1,term-2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -6       defship
        1       demand(term-2)
        1       supply(plant-1)

x(plant-1,term-3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -6       defship
       -2       deftank
        1       demand(term-3)
        1       supply(plant-1)

REMAINING 5 ENTRIES SKIPPED
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:52 Page 7
Decomposition Principle - Animated (DECOMP,SEQ=164)
Model Statistics    SOLVE sub Using LP From line 90


MODEL STATISTICS

BLOCKS OF EQUATIONS           5     SINGLE EQUATIONS            9
BLOCKS OF VARIABLES           4     SINGLE VARIABLES           11
NON ZERO ELEMENTS            30


GENERATION TIME      =        0.002 SECONDS      4 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.002 SECONDS      4 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:52 Page 8
Decomposition Principle - Animated (DECOMP,SEQ=164)
Solution Report     SOLVE sub Using LP From line 90


               S O L V E      S U M M A R Y

     MODEL   sub                 OBJECTIVE  cost
     TYPE    LP                  DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  90

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
>>  gams decomp-scalar.gms
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
Gams      : decomp-scalar.gms


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:52 Page 9
Decomposition Principle - Animated (DECOMP,SEQ=164)
Model Statistics    SOLVE sub Using LP From line 97


MODEL STATISTICS

BLOCKS OF EQUATIONS           5     SINGLE EQUATIONS            9
BLOCKS OF VARIABLES           4     SINGLE VARIABLES           11
NON ZERO ELEMENTS            30


GENERATION TIME      =        0.002 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.003 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:30:52 Page 10
Decomposition Principle - Animated (DECOMP,SEQ=164)
Solution Report     SOLVE sub Using LP From line 97


               S O L V E      S U M M A R Y

     MODEL   sub                 OBJECTIVE  tank
     TYPE    LP                  DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  97

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
>>  gams decomp-scalar.gms
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
Gams      : decomp-scalar.gms


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:30:52 Page 11
Decomposition Principle - Animated (DECOMP,SEQ=164)
Model Statistics    SOLVE master Using LP From line 105


MODEL STATISTICS

BLOCKS OF EQUATIONS           3     SINGLE EQUATIONS            2
BLOCKS OF VARIABLES           2     SINGLE VARIABLES            3
NON ZERO ELEMENTS             3


GENERATION TIME      =        0.002 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.002 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:30:52 Page 12
Decomposition Principle - Animated (DECOMP,SEQ=164)
Solution Report     SOLVE master Using LP From line 105


               S O L V E      S U M M A R Y

     MODEL   master              OBJECTIVE  mobj
     TYPE    LP                  DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  105

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
>>  gams decomp-scalar.gms
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
Gams      : decomp-scalar.gms


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:30:52 Page 13
Decomposition Principle - Animated (DECOMP,SEQ=164)
Model Statistics    SOLVE sub Using LP From line 118


LOOPS                                   ss   3


MODEL STATISTICS

BLOCKS OF EQUATIONS           5     SINGLE EQUATIONS            9
BLOCKS OF VARIABLES           4     SINGLE VARIABLES           11
NON ZERO ELEMENTS            30


GENERATION TIME      =        0.002 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.003 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
               L O O P S                 ss 3

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:30:52 Page 14
Decomposition Principle - Animated (DECOMP,SEQ=164)
Solution Report     SOLVE sub Using LP From line 118


               S O L V E      S U M M A R Y

     MODEL   sub                 OBJECTIVE  cost
     TYPE    LP                  DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  118

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
>>  gams decomp-scalar.gms
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
Gams      : decomp-scalar.gms


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:30:52 Page 15
Decomposition Principle - Animated (DECOMP,SEQ=164)
Model Statistics    SOLVE master Using LP From line 123


LOOPS                                   ss   3


MODEL STATISTICS

BLOCKS OF EQUATIONS           3     SINGLE EQUATIONS            2
BLOCKS OF VARIABLES           2     SINGLE VARIABLES            4
NON ZERO ELEMENTS             4


GENERATION TIME      =        0.003 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.003 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
               L O O P S                 ss 3

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:30:52 Page 16
Decomposition Principle - Animated (DECOMP,SEQ=164)
Solution Report     SOLVE master Using LP From line 123


               S O L V E      S U M M A R Y

     MODEL   master              OBJECTIVE  mobj
     TYPE    LP                  DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  123

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
>>  gams decomp-scalar.gms
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
Gams      : decomp-scalar.gms


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:30:52 Page 17
Decomposition Principle - Animated (DECOMP,SEQ=164)
E x e c u t i o n


----    133 PARAMETER mcost  cost solutions

                      ( ALL       0.000 )


----    133 PARAMETER mtank  tanker solutions

                      ( ALL       0.000 )


----    133 PARAMETER rep  

          gap

2        +INF



EXECUTION TIME       =        0.000 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


USER: Remigijus Paulavicius, Single User License     S170731:0859AO-LNX
      Imperial College London, Dept. of Chemical Engineering    DC13449
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      /home/renigijus/gams/opt-mod-lib/gamslib/decomp/decomp.gms
Output     /home/renigijus/gams/opt-mod-lib/gamslib/decomp/decomp-scalar.gms.lst
