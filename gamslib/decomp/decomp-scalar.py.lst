GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:52 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  option LP=convert;
   2  option LP=convert;
   3  option LP=convert;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:52 Page 2
Decomposition Principle - Animated (DECOMP,SEQ=164)
C o m p i l a t i o n


        The coordinator of a Central Agency must procure tanker services
        to assist his distribution. A subcontractor handles all the
        shipping details. This scenario is used to demonstrate the
        decomposition principle. For details see chapter 23-2 of Dantzig's
        original text on Linear Programming.
       
       
      Dantzig, G B, Chapter 23.2. In Linear Programming and Extensions.
      Princeton University Press, Princeton, New Jersey, 1963.
       
  17   
  18  sets i plants     / plant-1, plant-2 /
  19       j terminals  / term-1*term-4 /
  20   
  21   
  22     table c(i,j) cost matrix
  23   
  24           term-1  term-2  term-3  term-4
  25  plant-1    3       6       6       5
  26  plant-2    8       1       3       6
  27   
  28   
  29     table t(i,j) tankers required
  30   
  31           term-1  term-2  term-3  term-4
  32  plant-1                    2
  33  plant-2            2
  34   
  35  parameters a(i)   availability  / plant-1  9, plant-2  8 /
  36             b(j)   requirements  / term-1 2, term-2 7, term-3 3, term-4 5 /
  37             ctank  tanker cost
  38             cship  shipping cost
  39   
  40  variables cost   total cost
  41            tank   total tankers used
  42            ship   shipping cost
  43            x(i,j) shipments
  44  positive variable x
  45   
  46  equations defcost  cost definition
  47            defship  shipping cost
  48            deftank  tanker usage
  49            supply(i) supply balance
  50            demand(j) demand balance ;
  51   
  52  defcost.. cost =e= cship*ship + ctank*tank;
  53   
  54  defship.. ship =e= sum((i,j), c(i,j)*x(i,j));
  55   
  56  deftank.. tank =e= sum((i,j), t(i,j)*x(i,j));
  57   
  58  supply(i).. sum(j, x(i,j)) =L= a(i);
  59   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:52 Page 3
Decomposition Principle - Animated (DECOMP,SEQ=164)
C o m p i l a t i o n


  60  demand(j).. sum(i, x(i,j)) =g= b(j);
  61   
  62  model sub / defcost, defship, deftank, demand, supply /;
  63   
  64  sets  ss    master column labels / 1*10 /
  65        s(ss) active columns;
  66   
  67  parameter mcost(ss) cost solutions
  68            mtank(ss) tanker solutions;
  69   
  70  variables  mobj
  71             lam(ss)  column selection
  72  positive variable lam;
  73   
  74  equations cbal   cost balance
  75            tbal   tanker balance
  76            convex  combination;
  77   
  78  cbal..  mobj  =e= sum(s, mcost(s)*lam(s));
  79   
  80  tbal..  sum(s, mtank(s)*lam(s)) =l= 9;
  81   
  82  convex.. sum(s, lam(s)) =e= 1;
  83   
  84  model master / cbal, tbal,convex /;
  85   
  86  parameter rep(ss,*);
  87  * --- get first solution with zero cost for tankers
  88   
  89  cship = 1;
  90  ctank = 0;
  91  solve sub using lp minimizing cost;
  92  mcost('1') = ship.l;
  93  mtank('1') = tank.l;
  94   
  95  * --- get second solution with zero cost for tankers
  96   
  97  option limcol=0,limrow=0;
  98  solve sub using lp minimizing tank;
  99  mcost('2') = ship.l;
 100  mtank('2') = tank.l;
 101   
 102  * --- solve first master problem
 103   
 104  s('1') = yes; s('2') = yes;
 105   
 106  solve master using lp minimizing mobj;
 107   
 108  rep('2','obj')  = mobj.l;
 109  rep('2','s-pi') = convex.m;
 110  rep('2','t-pi') = -tbal.m;
 111  rep('2','gap')  = inf;
 112   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:52 Page 4
Decomposition Principle - Animated (DECOMP,SEQ=164)
C o m p i l a t i o n


 113  * --- now we are ready to iterate between master and sub problem;
 114   
 115  loop(ss$((not s(ss)) and (rep(ss-1,'gap') > .01)),
 116   
 117     ctank = -tbal.m;
 118   
 119     solve sub using lp minimizing cost;
 120     mcost(ss) = ship.l;
 121     mtank(ss) = tank.l;
 122     s(ss)     = yes;
 123   
 124     solve master using lp minimizing mobj;
 125   
 126     rep(ss,'obj')  = mobj.l;
 127     rep(ss,'s-pi') = convex.m;
 128     rep(ss,'t-pi') = -tbal.m;
 129     rep(ss,'bnd')  = rep(ss-1,'obj') - rep(ss-1,'s-pi')
 130                     + mcost(ss) + mtank(ss)* rep(ss-1,'t-pi');
 131     rep(ss,'best-bnd') = max(rep(ss-1,'best-bnd'),rep(ss,'bnd'));
 132     rep(ss,'gap')      = rep(ss,'obj') - rep(ss,'best-bnd');  );
 133   
 134  display mcost, mtank, rep;


COMPILATION TIME     =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:52 Page 5
Decomposition Principle - Animated (DECOMP,SEQ=164)
Equation Listing    SOLVE sub Using LP From line 91


---- defcost  =E=  cost definition

defcost..  cost - ship =E= 0 ; (LHS = 0)
     

---- defship  =E=  shipping cost

defship..  ship - 3*x(plant-1,term-1) - 6*x(plant-1,term-2) - 6*x(plant-1,term-3) - 5*x(plant-1,term-4) - 8*x(plant-2,term-1) - x(plant-2,term-2) - 3*x(plant-2,term-3) - 6*x(plant-2,term-4) =E= 0 ; (LHS = 0)
     

---- deftank  =E=  tanker usage

deftank..  tank - 2*x(plant-1,term-3) - 2*x(plant-2,term-2) =E= 0 ; (LHS = 0)
     

---- demand  =G=  demand balance

demand(term-1)..  x(plant-1,term-1) + x(plant-2,term-1) =G= 2 ; (LHS = 0, INFES = 2 ****)
     
demand(term-2)..  x(plant-1,term-2) + x(plant-2,term-2) =G= 7 ; (LHS = 0, INFES = 7 ****)
     
demand(term-3)..  x(plant-1,term-3) + x(plant-2,term-3) =G= 3 ; (LHS = 0, INFES = 3 ****)
     
REMAINING ENTRY SKIPPED


---- supply  =L=  supply balance

supply(plant-1)..  x(plant-1,term-1) + x(plant-1,term-2) + x(plant-1,term-3) + x(plant-1,term-4) =L= 9 ; (LHS = 0)
     
supply(plant-2)..  x(plant-2,term-1) + x(plant-2,term-2) + x(plant-2,term-3) + x(plant-2,term-4) =L= 8 ; (LHS = 0)
     
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:52 Page 6
Decomposition Principle - Animated (DECOMP,SEQ=164)
Column Listing      SOLVE sub Using LP From line 91


---- cost  total cost

cost
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       defcost


---- tank  total tankers used

tank
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       deftank


---- ship  shipping cost

ship
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
       -1       defcost
        1       defship


---- x  shipments

x(plant-1,term-1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -3       defship
        1       demand(term-1)
        1       supply(plant-1)

x(plant-1,term-2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -6       defship
        1       demand(term-2)
        1       supply(plant-1)

x(plant-1,term-3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -6       defship
       -2       deftank
        1       demand(term-3)
        1       supply(plant-1)

REMAINING 5 ENTRIES SKIPPED
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:52 Page 7
Decomposition Principle - Animated (DECOMP,SEQ=164)
Model Statistics    SOLVE sub Using LP From line 91


MODEL STATISTICS

BLOCKS OF EQUATIONS           5     SINGLE EQUATIONS            9
BLOCKS OF VARIABLES           4     SINGLE VARIABLES           11
NON ZERO ELEMENTS            30


GENERATION TIME      =        0.003 SECONDS      4 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.003 SECONDS      4 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:52 Page 8
Decomposition Principle - Animated (DECOMP,SEQ=164)
Solution Report     SOLVE sub Using LP From line 91


               S O L V E      S U M M A R Y

     MODEL   sub                 OBJECTIVE  cost
     TYPE    LP                  DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  91

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
>>  pyomo decomp-scalar.py
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
Pyomo     : decomp-scalar.py


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:52 Page 9
Decomposition Principle - Animated (DECOMP,SEQ=164)
Model Statistics    SOLVE sub Using LP From line 98


MODEL STATISTICS

BLOCKS OF EQUATIONS           5     SINGLE EQUATIONS            9
BLOCKS OF VARIABLES           4     SINGLE VARIABLES           11
NON ZERO ELEMENTS            30


GENERATION TIME      =        0.002 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.002 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:30:52 Page 10
Decomposition Principle - Animated (DECOMP,SEQ=164)
Solution Report     SOLVE sub Using LP From line 98


               S O L V E      S U M M A R Y

     MODEL   sub                 OBJECTIVE  tank
     TYPE    LP                  DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  98

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
>>  pyomo decomp-scalar.py
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
Pyomo     : decomp-scalar.py


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:30:52 Page 11
Decomposition Principle - Animated (DECOMP,SEQ=164)
Model Statistics    SOLVE master Using LP From line 106


MODEL STATISTICS

BLOCKS OF EQUATIONS           3     SINGLE EQUATIONS            2
BLOCKS OF VARIABLES           2     SINGLE VARIABLES            3
NON ZERO ELEMENTS             3


GENERATION TIME      =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:30:52 Page 12
Decomposition Principle - Animated (DECOMP,SEQ=164)
Solution Report     SOLVE master Using LP From line 106


               S O L V E      S U M M A R Y

     MODEL   master              OBJECTIVE  mobj
     TYPE    LP                  DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  106

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
>>  pyomo decomp-scalar.py
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
Pyomo     : decomp-scalar.py


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:30:52 Page 13
Decomposition Principle - Animated (DECOMP,SEQ=164)
Model Statistics    SOLVE sub Using LP From line 119


LOOPS                                   ss   3


MODEL STATISTICS

BLOCKS OF EQUATIONS           5     SINGLE EQUATIONS            9
BLOCKS OF VARIABLES           4     SINGLE VARIABLES           11
NON ZERO ELEMENTS            30


GENERATION TIME      =        0.002 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.003 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
               L O O P S                 ss 3

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:30:52 Page 14
Decomposition Principle - Animated (DECOMP,SEQ=164)
Solution Report     SOLVE sub Using LP From line 119


               S O L V E      S U M M A R Y

     MODEL   sub                 OBJECTIVE  cost
     TYPE    LP                  DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  119

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
>>  pyomo decomp-scalar.py
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
Pyomo     : decomp-scalar.py


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:30:52 Page 15
Decomposition Principle - Animated (DECOMP,SEQ=164)
Model Statistics    SOLVE master Using LP From line 124


LOOPS                                   ss   3


MODEL STATISTICS

BLOCKS OF EQUATIONS           3     SINGLE EQUATIONS            2
BLOCKS OF VARIABLES           2     SINGLE VARIABLES            4
NON ZERO ELEMENTS             4


GENERATION TIME      =        0.003 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.003 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
               L O O P S                 ss 3

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:30:52 Page 16
Decomposition Principle - Animated (DECOMP,SEQ=164)
Solution Report     SOLVE master Using LP From line 124


               S O L V E      S U M M A R Y

     MODEL   master              OBJECTIVE  mobj
     TYPE    LP                  DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  124

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
>>  pyomo decomp-scalar.py
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
Pyomo     : decomp-scalar.py


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:30:52 Page 17
Decomposition Principle - Animated (DECOMP,SEQ=164)
E x e c u t i o n


----    134 PARAMETER mcost  cost solutions

                      ( ALL       0.000 )


----    134 PARAMETER mtank  tanker solutions

                      ( ALL       0.000 )


----    134 PARAMETER rep  

          gap

2        +INF



EXECUTION TIME       =        0.000 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


USER: Remigijus Paulavicius, Single User License     S170731:0859AO-LNX
      Imperial College London, Dept. of Chemical Engineering    DC13449
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      /home/renigijus/gams/opt-mod-lib/gamslib/decomp/decomp.gms
Output     /home/renigijus/gams/opt-mod-lib/gamslib/decomp/decomp-scalar.py.lst
