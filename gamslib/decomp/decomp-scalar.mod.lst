GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:51 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  option LP=convert;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:51 Page 2
Decomposition Principle - Animated (DECOMP,SEQ=164)
C o m p i l a t i o n


        The coordinator of a Central Agency must procure tanker services
        to assist his distribution. A subcontractor handles all the
        shipping details. This scenario is used to demonstrate the
        decomposition principle. For details see chapter 23-2 of Dantzig's
        original text on Linear Programming.
       
       
      Dantzig, G B, Chapter 23.2. In Linear Programming and Extensions.
      Princeton University Press, Princeton, New Jersey, 1963.
       
  15   
  16  sets i plants     / plant-1, plant-2 /
  17       j terminals  / term-1*term-4 /
  18   
  19   
  20     table c(i,j) cost matrix
  21   
  22           term-1  term-2  term-3  term-4
  23  plant-1    3       6       6       5
  24  plant-2    8       1       3       6
  25   
  26   
  27     table t(i,j) tankers required
  28   
  29           term-1  term-2  term-3  term-4
  30  plant-1                    2
  31  plant-2            2
  32   
  33  parameters a(i)   availability  / plant-1  9, plant-2  8 /
  34             b(j)   requirements  / term-1 2, term-2 7, term-3 3, term-4 5 /
  35             ctank  tanker cost
  36             cship  shipping cost
  37   
  38  variables cost   total cost
  39            tank   total tankers used
  40            ship   shipping cost
  41            x(i,j) shipments
  42  positive variable x
  43   
  44  equations defcost  cost definition
  45            defship  shipping cost
  46            deftank  tanker usage
  47            supply(i) supply balance
  48            demand(j) demand balance ;
  49   
  50  defcost.. cost =e= cship*ship + ctank*tank;
  51   
  52  defship.. ship =e= sum((i,j), c(i,j)*x(i,j));
  53   
  54  deftank.. tank =e= sum((i,j), t(i,j)*x(i,j));
  55   
  56  supply(i).. sum(j, x(i,j)) =L= a(i);
  57   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:51 Page 3
Decomposition Principle - Animated (DECOMP,SEQ=164)
C o m p i l a t i o n


  58  demand(j).. sum(i, x(i,j)) =g= b(j);
  59   
  60  model sub / defcost, defship, deftank, demand, supply /;
  61   
  62  sets  ss    master column labels / 1*10 /
  63        s(ss) active columns;
  64   
  65  parameter mcost(ss) cost solutions
  66            mtank(ss) tanker solutions;
  67   
  68  variables  mobj
  69             lam(ss)  column selection
  70  positive variable lam;
  71   
  72  equations cbal   cost balance
  73            tbal   tanker balance
  74            convex  combination;
  75   
  76  cbal..  mobj  =e= sum(s, mcost(s)*lam(s));
  77   
  78  tbal..  sum(s, mtank(s)*lam(s)) =l= 9;
  79   
  80  convex.. sum(s, lam(s)) =e= 1;
  81   
  82  model master / cbal, tbal,convex /;
  83   
  84  parameter rep(ss,*);
  85  * --- get first solution with zero cost for tankers
  86   
  87  cship = 1;
  88  ctank = 0;
  89  solve sub using lp minimizing cost;
  90  mcost('1') = ship.l;
  91  mtank('1') = tank.l;
  92   
  93  * --- get second solution with zero cost for tankers
  94   
  95  option limcol=0,limrow=0;
  96  solve sub using lp minimizing tank;
  97  mcost('2') = ship.l;
  98  mtank('2') = tank.l;
  99   
 100  * --- solve first master problem
 101   
 102  s('1') = yes; s('2') = yes;
 103   
 104  solve master using lp minimizing mobj;
 105   
 106  rep('2','obj')  = mobj.l;
 107  rep('2','s-pi') = convex.m;
 108  rep('2','t-pi') = -tbal.m;
 109  rep('2','gap')  = inf;
 110   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:51 Page 4
Decomposition Principle - Animated (DECOMP,SEQ=164)
C o m p i l a t i o n


 111  * --- now we are ready to iterate between master and sub problem;
 112   
 113  loop(ss$((not s(ss)) and (rep(ss-1,'gap') > .01)),
 114   
 115     ctank = -tbal.m;
 116   
 117     solve sub using lp minimizing cost;
 118     mcost(ss) = ship.l;
 119     mtank(ss) = tank.l;
 120     s(ss)     = yes;
 121   
 122     solve master using lp minimizing mobj;
 123   
 124     rep(ss,'obj')  = mobj.l;
 125     rep(ss,'s-pi') = convex.m;
 126     rep(ss,'t-pi') = -tbal.m;
 127     rep(ss,'bnd')  = rep(ss-1,'obj') - rep(ss-1,'s-pi')
 128                     + mcost(ss) + mtank(ss)* rep(ss-1,'t-pi');
 129     rep(ss,'best-bnd') = max(rep(ss-1,'best-bnd'),rep(ss,'bnd'));
 130     rep(ss,'gap')      = rep(ss,'obj') - rep(ss,'best-bnd');  );
 131   
 132  display mcost, mtank, rep;


COMPILATION TIME     =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:51 Page 5
Decomposition Principle - Animated (DECOMP,SEQ=164)
Equation Listing    SOLVE sub Using LP From line 89


---- defcost  =E=  cost definition

defcost..  cost - ship =E= 0 ; (LHS = 0)
     

---- defship  =E=  shipping cost

defship..  ship - 3*x(plant-1,term-1) - 6*x(plant-1,term-2) - 6*x(plant-1,term-3) - 5*x(plant-1,term-4) - 8*x(plant-2,term-1) - x(plant-2,term-2) - 3*x(plant-2,term-3) - 6*x(plant-2,term-4) =E= 0 ; (LHS = 0)
     

---- deftank  =E=  tanker usage

deftank..  tank - 2*x(plant-1,term-3) - 2*x(plant-2,term-2) =E= 0 ; (LHS = 0)
     

---- demand  =G=  demand balance

demand(term-1)..  x(plant-1,term-1) + x(plant-2,term-1) =G= 2 ; (LHS = 0, INFES = 2 ****)
     
demand(term-2)..  x(plant-1,term-2) + x(plant-2,term-2) =G= 7 ; (LHS = 0, INFES = 7 ****)
     
demand(term-3)..  x(plant-1,term-3) + x(plant-2,term-3) =G= 3 ; (LHS = 0, INFES = 3 ****)
     
REMAINING ENTRY SKIPPED


---- supply  =L=  supply balance

supply(plant-1)..  x(plant-1,term-1) + x(plant-1,term-2) + x(plant-1,term-3) + x(plant-1,term-4) =L= 9 ; (LHS = 0)
     
supply(plant-2)..  x(plant-2,term-1) + x(plant-2,term-2) + x(plant-2,term-3) + x(plant-2,term-4) =L= 8 ; (LHS = 0)
     
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:51 Page 6
Decomposition Principle - Animated (DECOMP,SEQ=164)
Column Listing      SOLVE sub Using LP From line 89


---- cost  total cost

cost
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       defcost


---- tank  total tankers used

tank
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       deftank


---- ship  shipping cost

ship
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
       -1       defcost
        1       defship


---- x  shipments

x(plant-1,term-1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -3       defship
        1       demand(term-1)
        1       supply(plant-1)

x(plant-1,term-2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -6       defship
        1       demand(term-2)
        1       supply(plant-1)

x(plant-1,term-3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -6       defship
       -2       deftank
        1       demand(term-3)
        1       supply(plant-1)

REMAINING 5 ENTRIES SKIPPED
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:51 Page 7
Decomposition Principle - Animated (DECOMP,SEQ=164)
Model Statistics    SOLVE sub Using LP From line 89


MODEL STATISTICS

BLOCKS OF EQUATIONS           5     SINGLE EQUATIONS            9
BLOCKS OF VARIABLES           4     SINGLE VARIABLES           11
NON ZERO ELEMENTS            30


GENERATION TIME      =        0.002 SECONDS      4 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.002 SECONDS      4 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:51 Page 8
Decomposition Principle - Animated (DECOMP,SEQ=164)
Solution Report     SOLVE sub Using LP From line 89


               S O L V E      S U M M A R Y

     MODEL   sub                 OBJECTIVE  cost
     TYPE    LP                  DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  89

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
>>  ampl decomp-scalar.mod
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
Ampl      : decomp-scalar.mod


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:51 Page 9
Decomposition Principle - Animated (DECOMP,SEQ=164)
Model Statistics    SOLVE sub Using LP From line 96


MODEL STATISTICS

BLOCKS OF EQUATIONS           5     SINGLE EQUATIONS            9
BLOCKS OF VARIABLES           4     SINGLE VARIABLES           11
NON ZERO ELEMENTS            30


GENERATION TIME      =        0.002 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.002 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:30:51 Page 10
Decomposition Principle - Animated (DECOMP,SEQ=164)
Solution Report     SOLVE sub Using LP From line 96


               S O L V E      S U M M A R Y

     MODEL   sub                 OBJECTIVE  tank
     TYPE    LP                  DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  96

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
>>  ampl decomp-scalar.mod
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
Ampl      : decomp-scalar.mod


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:30:51 Page 11
Decomposition Principle - Animated (DECOMP,SEQ=164)
Model Statistics    SOLVE master Using LP From line 104


MODEL STATISTICS

BLOCKS OF EQUATIONS           3     SINGLE EQUATIONS            2
BLOCKS OF VARIABLES           2     SINGLE VARIABLES            3
NON ZERO ELEMENTS             3


GENERATION TIME      =        0.002 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.002 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:30:51 Page 12
Decomposition Principle - Animated (DECOMP,SEQ=164)
Solution Report     SOLVE master Using LP From line 104


               S O L V E      S U M M A R Y

     MODEL   master              OBJECTIVE  mobj
     TYPE    LP                  DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  104

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
>>  ampl decomp-scalar.mod
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
Ampl      : decomp-scalar.mod


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:30:51 Page 13
Decomposition Principle - Animated (DECOMP,SEQ=164)
Model Statistics    SOLVE sub Using LP From line 117


LOOPS                                   ss   3


MODEL STATISTICS

BLOCKS OF EQUATIONS           5     SINGLE EQUATIONS            9
BLOCKS OF VARIABLES           4     SINGLE VARIABLES           11
NON ZERO ELEMENTS            30


GENERATION TIME      =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
               L O O P S                 ss 3

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:30:51 Page 14
Decomposition Principle - Animated (DECOMP,SEQ=164)
Solution Report     SOLVE sub Using LP From line 117


               S O L V E      S U M M A R Y

     MODEL   sub                 OBJECTIVE  cost
     TYPE    LP                  DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  117

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
>>  ampl decomp-scalar.mod
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
Ampl      : decomp-scalar.mod


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:30:51 Page 15
Decomposition Principle - Animated (DECOMP,SEQ=164)
Model Statistics    SOLVE master Using LP From line 122


LOOPS                                   ss   3


MODEL STATISTICS

BLOCKS OF EQUATIONS           3     SINGLE EQUATIONS            2
BLOCKS OF VARIABLES           2     SINGLE VARIABLES            4
NON ZERO ELEMENTS             4


GENERATION TIME      =        0.002 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.003 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
               L O O P S                 ss 3

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:30:51 Page 16
Decomposition Principle - Animated (DECOMP,SEQ=164)
Solution Report     SOLVE master Using LP From line 122


               S O L V E      S U M M A R Y

     MODEL   master              OBJECTIVE  mobj
     TYPE    LP                  DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  122

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
>>  ampl decomp-scalar.mod
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/decomp/convert.opt"
Ampl      : decomp-scalar.mod


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:30:51 Page 17
Decomposition Principle - Animated (DECOMP,SEQ=164)
E x e c u t i o n


----    132 PARAMETER mcost  cost solutions

                      ( ALL       0.000 )


----    132 PARAMETER mtank  tanker solutions

                      ( ALL       0.000 )


----    132 PARAMETER rep  

          gap

2        +INF



EXECUTION TIME       =        0.000 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


USER: Remigijus Paulavicius, Single User License     S170731:0859AO-LNX
      Imperial College London, Dept. of Chemical Engineering    DC13449
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      /home/renigijus/gams/opt-mod-lib/gamslib/decomp/decomp.gms
Output     /home/renigijus/gams/opt-mod-lib/gamslib/decomp/decomp-scalar.mod.lst
