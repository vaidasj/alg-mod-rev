GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:35 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  option MIP=convert;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:35 Page 2
Sample Data Base of the US Economy  (RDATA,SEQ=38)
Set Definitions


   4   
       
      A mini relational data base of the us economy is used to demonstrate
      some basic concepts of the relational data model. Data verification
      and the use of math programming is shown as well.
       
       
      Kendrick, D, Chapter 3: A Relational Database of the US Economy.
      In Kindleberger, C P, and Ditella, G, Eds, Economics in the Long View,
      Essays in the Honor of W W Rostow. Macmillan, London, 1982.
       
  17   
  18   
  19  Sets plant      / sparrows, inland, comfort, rockdale, lansing /
  20       city       / sparrows-p, rockdale, p-comfort, gary, lansing /
  21       state      / indiana, maryland, michigan, texas /
  22       region     / e-coast, g-coast, mid-west /
  23       governor   / bowen, clements, hughes, milliken /
  24       party      / democrat, republican /
  25       company    / us-steel, alcoa, inld-steel, gm /
  26       union      / iam, ibew, ibt, uaw, usa /
  27       unit       / blast-furn, steel-shop, roll-mill, alumina, aluminum, stamping, assembly /
  28       commodity  / iron-ore, pig-iron, scrap-iron, steel, flat-steel, bauxite, alumina, aluminum, auto-body, automobile /
  29       process    / pig-iron, steel-pig, stl-scrap, rolling, alumina, aluminum, auto-body, auto-assm /
  30       industry   / steel, aluminum, automobile /
  31       sector     / p-metals, transp-equ /
  32   
  33       geography(plant,city,state,region) / (sparrows.sparrows-p.maryland.e-coast
  34                                             inland  .gary      .indiana .mid-west
  35                                             comfort .p-comfort .texas   .g-coast
  36                                             rockdale.rockdale  .texas   .g-coast
  37                                             lansing .lansing   .michigan.mid-west ) /
  38   
  39       govaff(state,governor,party) / (indiana .bowen   .republican
  40                                       maryland.hughes  .democrat
  41                                       michigan.milliken.republican
  42                                       texas   .clements.republican ) /
  43   
  44       ownership(company,plant) / (alcoa     .(comfort,rockdale)
  45                                   gm        .lansing
  46                                   inld-steel.inland
  47                                   us-steel  .sparrows            ) /
  48       sic(sector,industry,commodity) / p-metals.(steel.(iron-ore,pig-iron,steel,flat-steel,scrap-iron)
  49                                                  aluminum.(bauxite,alumina,aluminum))
  50                                        transp-equ.automobile.(auto-body,automobile)  /
  51       indpl(industry,plant)  classification of plants by industry
  52   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:35 Page 3
Sample Data Base of the US Economy  (RDATA,SEQ=38)
data


  54   
  55   Table a(commodity,process) input-output matrix
  56   
  57                pig-iron   steel-pig   stl-scrap     rolling   alumina   aluminum   auto-body   auto-assm
  58   
  59   iron-ore       -1.
  60   pig-iron        1.        -.9          -.7
  61   scrap-iron                -.2          -.4           .2
  62   steel                     1.           1.          -1.2
  63   flat-steel                                          1.                             -1.2
  64   bauxite                                                       -1.4
  65   alumina                                                        1.       -1.2
  66   aluminum                                                                 1          -.2
  67   auto-body                                                                           1.         -1.
  68   automobile                                                                                      1.
  69   
  70   
  71   Table b(unit,process) capacity utilization matrix
  72   
  73                pig-iron   steel-pig   stl-scrap     rolling   alumina   aluminum   auto-body   auto-assm
  74   
  75   blast-furn      1
  76   steel-shop                  1            1
  77   roll-mill                                            1
  78   alumina                                                        1
  79   aluminum                                                                  1
  80   stamping                                                                              1
  81   assembly                                                                                          1
  82   
  83   Table k80(unit,plant) capacity in 1980 ( millions of units)
  84   
  85                sparrows  inland  comfort  rockdale  lansing
  86   
  87   blast-furn      2       2.5
  88   steel-shop      2.35    2.8
  89   roll-mill       1.9     2.4
  90   alumina                           .8
  91   aluminum                          .6       .5
  92   stamping                                            .6
  93   assembly                                            .6
  94   
  95   
  96   Table emp(plant,union) employment (thousands)
  97   
  98               uaw     usa     ibew    ibt    iam
  99   
 100   sparrows            1.2              .3    .05
 101   inland               .4
 102   comfort              .7              .2
 103   rockdale             .5     .05
 104   lansing     1.2
 105     ;
 106   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:35 Page 4
Sample Data Base of the US Economy  (RDATA,SEQ=38)
data manipulations


 108   
 109   indpl(industry,plant) = yes$sum((sector,commodity,process,unit)$(sic(sector,industry,commodity)
 110                                                                     $(a(commodity,process) gt 0)$b(unit,process)
 111                                                                        $k80(unit,plant)), 1);
 112   Display indpl;
 113   
 114   Parameter q1(union,company)   employment by union and company (thousands)
 115             q2(unit,region)     capacity by region (millions of units)
 116             q3(governor)        employment in steel and automobiles (thousands)
 117             q4                  smallest number of union participation to build cars ;
 118   
 119   q1(union,company)   = sum(plant$ownership(company,plant), emp(plant,union));
 120   
 121   q2(unit,region)     = sum((plant,city,state)$geography(plant,city,state,region), k80(unit,plant));
 122   
 123   Set ind3(industry)  industry grouping for q3  / steel, automobile / ;
 124   q3(governor)        = sum((state,party)$govaff(state,governor,party),
 125                           sum((ind3,plant,city,region)$(geography(plant,city,state,region)*indpl(ind3,plant)),
 126                             sum(union, emp(plant,union)) ) );
 127   
 128   Display q1, q2, q3;
 129   
 130  * Query number 4 requires the solution of a mixed integer problem. Some other parameters are
 131  * are needed for the mip formulation.
 132   
 133   Parameter demand(commodity)       in millions of units                  / automobile .5 /
 134             ur(process,plant,union) union relationship to plant processes
 135             mu(union)               maximum ;
 136   Set rawmat(commodity) raw materials;
 137   
 138   ur(process,plant,union) = sum(unit$k80(unit,plant), emp(plant,union)*b(unit,process));
 139   mu(union)               = sum((process,plant), ur(process,plant,union));
 140   rawmat(commodity) = yes$(not sum(process, a(commodity,process) gt 0)); rawmat("scrap-iron") = yes;
 141   
 142   Display demand, ur, mu, rawmat;
 143   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:35 Page 5
Sample Data Base of the US Economy  (RDATA,SEQ=38)
model definiton


 145   
 146   Variables nunion           number of unions                          (number)
 147             z(process,plant) process level                      (million units)
 148             up(union)        union participation
 149             u(commodity)     purchase of raw materials          (million units)
 150   
 151   Positive Variable z;
 152   Binary Variable up;
 153   
 154   Equations mb(commodity)   material balance                    (million units)
 155             cc(unit,plant)  capacity constraint                 (million units)
 156             ub(union)       union balance
 157             ud              union definition;
 158   

 160   

 161   mb(commodity)..  sum((process,plant), a(commodity,process)*z(process,plant))

 162                   + u(commodity)$rawmat(commodity) =e= demand(commodity);

 163   

 164   cc(unit,plant).. sum(process, b(unit,process)*z(process,plant)) =l= k80(unit,plant);

 165   

 166   ub(union)..      sum((process,plant), ur(process,plant,union)*z(process,plant)) =l= mu(union)*up(union);

 167   

 168   ud..             nunion =e= sum(union, up(union));

 169   

 170   Model david / all /;

 171   

 172   Solve david minimizing nunion using mip;

 173   

 174   q4 = nunion.l; Display q4;


COMPILATION TIME     =        0.002 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:35 Page 6
Sample Data Base of the US Economy  (RDATA,SEQ=38)
E x e c u t i o n


----    112 SET indpl  classification of plants by industry

              sparrows      inland     comfort    rockdale     lansing

aluminum                                   YES         YES
steel              YES         YES
automobile                                                         YES


----    128 PARAMETER q1  employment by union and company (thousands)

        us-steel       alcoa  inld-steel          gm

iam        0.050
ibew                   0.050
ibt        0.300       0.200
uaw                                            1.200
usa        1.200       1.200       0.400


----    128 PARAMETER q2  capacity by region (millions of units)

               e-coast     g-coast    mid-west

blast-furn       2.000                   2.500
steel-shop       2.350                   2.800
roll-mill        1.900                   2.400
alumina                      0.800
aluminum                     1.100
stamping                                 0.600
assembly                                 0.600


----    128 PARAMETER q3  employment in steel and automobiles (thousands)

bowen    0.400,    hughes   1.550,    milliken 1.200


----    142 PARAMETER demand  in millions of units

automobile 0.500


----    142 PARAMETER ur  union relationship to plant processes

                           iam        ibew         ibt         uaw         usa

alumina  .comfort                                0.200                   0.700
aluminum .comfort                                0.200                   0.700
aluminum .rockdale                   0.050                               0.500
pig-iron .sparrows       0.050                   0.300                   1.200
pig-iron .inland                                                         0.400
auto-body.lansing                                            1.200
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:35 Page 7
Sample Data Base of the US Economy  (RDATA,SEQ=38)
E x e c u t i o n


        142 PARAMETER ur  union relationship to plant processes

                           iam        ibew         ibt         uaw         usa

steel-pig.sparrows       0.050                   0.300                   1.200
steel-pig.inland                                                         0.400
stl-scrap.sparrows       0.050                   0.300                   1.200
stl-scrap.inland                                                         0.400
rolling  .sparrows       0.050                   0.300                   1.200
rolling  .inland                                                         0.400
auto-assm.lansing                                            1.200


----    142 PARAMETER mu  maximum

iam  0.200,    ibew 0.050,    ibt  1.600,    uaw  2.400,    usa  8.300


----    142 SET rawmat  raw materials

iron-ore  ,    scrap-iron,    bauxite   

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:35 Page 8
Sample Data Base of the US Economy  (RDATA,SEQ=38)
Equation Listing    SOLVE david Using MIP From line 172


---- mb  =E=  material balance                    (million units)

mb(alumina)..  z(alumina,sparrows) + z(alumina,inland) + z(alumina,comfort) + z(alumina,rockdale) + z(alumina,lansing) - 1.2*z(aluminum,sparrows) - 1.2*z(aluminum,inland) - 1.2*z(aluminum,comfort) - 1.2*z(aluminum,rockdale) - 1.2*z(aluminum,lansing) =E= 0
      ; (LHS = 0)
     
mb(aluminum)..  z(aluminum,sparrows) + z(aluminum,inland) + z(aluminum,comfort) + z(aluminum,rockdale) + z(aluminum,lansing) - 0.2*z(auto-body,sparrows) - 0.2*z(auto-body,inland) - 0.2*z(auto-body,comfort) - 0.2*z(auto-body,rockdale)
     
      - 0.2*z(auto-body,lansing) =E= 0 ; (LHS = 0)
     
mb(iron-ore)..  - z(pig-iron,sparrows) - z(pig-iron,inland) - z(pig-iron,comfort) - z(pig-iron,rockdale) - z(pig-iron,lansing) + u(iron-ore) =E= 0 ; (LHS = 0)
     
REMAINING 7 ENTRIES SKIPPED


---- cc  =L=  capacity constraint                 (million units)

cc(blast-furn,sparrows)..  z(pig-iron,sparrows) =L= 2 ; (LHS = 0)
     
cc(blast-furn,inland)..  z(pig-iron,inland) =L= 2.5 ; (LHS = 0)
     
cc(blast-furn,comfort)..  z(pig-iron,comfort) =L= 0 ; (LHS = 0)
     
REMAINING 32 ENTRIES SKIPPED


---- ub  =L=  union balance

ub(iam)..  0.05*z(pig-iron,sparrows) + 0.05*z(steel-pig,sparrows) + 0.05*z(stl-scrap,sparrows) + 0.05*z(rolling,sparrows) - 0.2*up(iam) =L= 0 ; (LHS = 0)
     
ub(ibew)..  0.05*z(aluminum,rockdale) - 0.05*up(ibew) =L= 0 ; (LHS = 0)
     
ub(ibt)..  0.2*z(alumina,comfort) + 0.2*z(aluminum,comfort) + 0.3*z(pig-iron,sparrows) + 0.3*z(steel-pig,sparrows) + 0.3*z(stl-scrap,sparrows) + 0.3*z(rolling,sparrows) - 1.6*up(ibt) =L= 0 ; (LHS = 0)
     
REMAINING 2 ENTRIES SKIPPED


---- ud  =E=  union definition

ud..  nunion - up(iam) - up(ibew) - up(ibt) - up(uaw) - up(usa) =E= 0 ; (LHS = 0)
     
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:35 Page 9
Sample Data Base of the US Economy  (RDATA,SEQ=38)
Column Listing      SOLVE david Using MIP From line 172


---- nunion  number of unions                          (number)

nunion
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       ud


---- z  process level                      (million units)

z(alumina,sparrows)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       mb(alumina)
       -1.4     mb(bauxite)
        1       cc(alumina,sparrows)

z(alumina,inland)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       mb(alumina)
       -1.4     mb(bauxite)
        1       cc(alumina,inland)

z(alumina,comfort)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       mb(alumina)
       -1.4     mb(bauxite)
        1       cc(alumina,comfort)
        0.2     ub(ibt)
        0.7     ub(usa)

REMAINING 37 ENTRIES SKIPPED

---- up  union participation

up(iam)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       -0.2     ub(iam)
       -1       ud

up(ibew)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       -0.05    ub(ibew)
       -1       ud

up(ibt)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       -1.6     ub(ibt)
       -1       ud

REMAINING 2 ENTRIES SKIPPED
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:35 Page 10
Sample Data Base of the US Economy  (RDATA,SEQ=38)
Column Listing      SOLVE david Using MIP From line 172


---- u  purchase of raw materials          (million units)

u(iron-ore)
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       mb(iron-ore)

u(scrap-iron)
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       mb(scrap-iron)

u(bauxite)
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       mb(bauxite)

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:35 Page 11
Sample Data Base of the US Economy  (RDATA,SEQ=38)
Model Statistics    SOLVE david Using MIP From line 172


MODEL STATISTICS

BLOCKS OF EQUATIONS           4     SINGLE EQUATIONS           51
BLOCKS OF VARIABLES           4     SINGLE VARIABLES           49
NON ZERO ELEMENTS           178     DISCRETE VARIABLES          5


GENERATION TIME      =        0.003 SECONDS      4 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.003 SECONDS      4 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:35 Page 12
Sample Data Base of the US Economy  (RDATA,SEQ=38)
Solution Report     SOLVE david Using MIP From line 172


               S O L V E      S U M M A R Y

     MODEL   david               OBJECTIVE  nunion
     TYPE    MIP                 DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  172

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/rdata/convert.opt"
>>  ampl rdata-scalar.mod
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/rdata/convert.opt"
Ampl      : rdata-scalar.mod


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:35 Page 13
Sample Data Base of the US Economy  (RDATA,SEQ=38)
E x e c u t i o n


----    174 PARAMETER q4                   =        0.000  smallest number of union participation to build cars


EXECUTION TIME       =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


USER: Remigijus Paulavicius, Single User License     S170731:0859AO-LNX
      Imperial College London, Dept. of Chemical Engineering    DC13449
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      /home/renigijus/gams/opt-mod-lib/gamslib/rdata/rdata.gms
Output     /home/renigijus/gams/opt-mod-lib/gamslib/rdata/rdata-scalar.mod.lst
