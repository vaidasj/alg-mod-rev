GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:35 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  option MIP=convert;
   2  option MIP=convert;
   3  option MIP=convert;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:35 Page 2
Sample Data Base of the US Economy  (RDATA,SEQ=38)
Set Definitions


   6   
       
      A mini relational data base of the us economy is used to demonstrate
      some basic concepts of the relational data model. Data verification
      and the use of math programming is shown as well.
       
       
      Kendrick, D, Chapter 3: A Relational Database of the US Economy.
      In Kindleberger, C P, and Ditella, G, Eds, Economics in the Long View,
      Essays in the Honor of W W Rostow. Macmillan, London, 1982.
       
  19   
  20   
  21  Sets plant      / sparrows, inland, comfort, rockdale, lansing /
  22       city       / sparrows-p, rockdale, p-comfort, gary, lansing /
  23       state      / indiana, maryland, michigan, texas /
  24       region     / e-coast, g-coast, mid-west /
  25       governor   / bowen, clements, hughes, milliken /
  26       party      / democrat, republican /
  27       company    / us-steel, alcoa, inld-steel, gm /
  28       union      / iam, ibew, ibt, uaw, usa /
  29       unit       / blast-furn, steel-shop, roll-mill, alumina, aluminum, stamping, assembly /
  30       commodity  / iron-ore, pig-iron, scrap-iron, steel, flat-steel, bauxite, alumina, aluminum, auto-body, automobile /
  31       process    / pig-iron, steel-pig, stl-scrap, rolling, alumina, aluminum, auto-body, auto-assm /
  32       industry   / steel, aluminum, automobile /
  33       sector     / p-metals, transp-equ /
  34   
  35       geography(plant,city,state,region) / (sparrows.sparrows-p.maryland.e-coast
  36                                             inland  .gary      .indiana .mid-west
  37                                             comfort .p-comfort .texas   .g-coast
  38                                             rockdale.rockdale  .texas   .g-coast
  39                                             lansing .lansing   .michigan.mid-west ) /
  40   
  41       govaff(state,governor,party) / (indiana .bowen   .republican
  42                                       maryland.hughes  .democrat
  43                                       michigan.milliken.republican
  44                                       texas   .clements.republican ) /
  45   
  46       ownership(company,plant) / (alcoa     .(comfort,rockdale)
  47                                   gm        .lansing
  48                                   inld-steel.inland
  49                                   us-steel  .sparrows            ) /
  50       sic(sector,industry,commodity) / p-metals.(steel.(iron-ore,pig-iron,steel,flat-steel,scrap-iron)
  51                                                  aluminum.(bauxite,alumina,aluminum))
  52                                        transp-equ.automobile.(auto-body,automobile)  /
  53       indpl(industry,plant)  classification of plants by industry
  54   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:35 Page 3
Sample Data Base of the US Economy  (RDATA,SEQ=38)
data


  56   
  57   Table a(commodity,process) input-output matrix
  58   
  59                pig-iron   steel-pig   stl-scrap     rolling   alumina   aluminum   auto-body   auto-assm
  60   
  61   iron-ore       -1.
  62   pig-iron        1.        -.9          -.7
  63   scrap-iron                -.2          -.4           .2
  64   steel                     1.           1.          -1.2
  65   flat-steel                                          1.                             -1.2
  66   bauxite                                                       -1.4
  67   alumina                                                        1.       -1.2
  68   aluminum                                                                 1          -.2
  69   auto-body                                                                           1.         -1.
  70   automobile                                                                                      1.
  71   
  72   
  73   Table b(unit,process) capacity utilization matrix
  74   
  75                pig-iron   steel-pig   stl-scrap     rolling   alumina   aluminum   auto-body   auto-assm
  76   
  77   blast-furn      1
  78   steel-shop                  1            1
  79   roll-mill                                            1
  80   alumina                                                        1
  81   aluminum                                                                  1
  82   stamping                                                                              1
  83   assembly                                                                                          1
  84   
  85   Table k80(unit,plant) capacity in 1980 ( millions of units)
  86   
  87                sparrows  inland  comfort  rockdale  lansing
  88   
  89   blast-furn      2       2.5
  90   steel-shop      2.35    2.8
  91   roll-mill       1.9     2.4
  92   alumina                           .8
  93   aluminum                          .6       .5
  94   stamping                                            .6
  95   assembly                                            .6
  96   
  97   
  98   Table emp(plant,union) employment (thousands)
  99   
 100               uaw     usa     ibew    ibt    iam
 101   
 102   sparrows            1.2              .3    .05
 103   inland               .4
 104   comfort              .7              .2
 105   rockdale             .5     .05
 106   lansing     1.2
 107     ;
 108   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:35 Page 4
Sample Data Base of the US Economy  (RDATA,SEQ=38)
data manipulations


 110   
 111   indpl(industry,plant) = yes$sum((sector,commodity,process,unit)$(sic(sector,industry,commodity)
 112                                                                     $(a(commodity,process) gt 0)$b(unit,process)
 113                                                                        $k80(unit,plant)), 1);
 114   Display indpl;
 115   
 116   Parameter q1(union,company)   employment by union and company (thousands)
 117             q2(unit,region)     capacity by region (millions of units)
 118             q3(governor)        employment in steel and automobiles (thousands)
 119             q4                  smallest number of union participation to build cars ;
 120   
 121   q1(union,company)   = sum(plant$ownership(company,plant), emp(plant,union));
 122   
 123   q2(unit,region)     = sum((plant,city,state)$geography(plant,city,state,region), k80(unit,plant));
 124   
 125   Set ind3(industry)  industry grouping for q3  / steel, automobile / ;
 126   q3(governor)        = sum((state,party)$govaff(state,governor,party),
 127                           sum((ind3,plant,city,region)$(geography(plant,city,state,region)*indpl(ind3,plant)),
 128                             sum(union, emp(plant,union)) ) );
 129   
 130   Display q1, q2, q3;
 131   
 132  * Query number 4 requires the solution of a mixed integer problem. Some other parameters are
 133  * are needed for the mip formulation.
 134   
 135   Parameter demand(commodity)       in millions of units                  / automobile .5 /
 136             ur(process,plant,union) union relationship to plant processes
 137             mu(union)               maximum ;
 138   Set rawmat(commodity) raw materials;
 139   
 140   ur(process,plant,union) = sum(unit$k80(unit,plant), emp(plant,union)*b(unit,process));
 141   mu(union)               = sum((process,plant), ur(process,plant,union));
 142   rawmat(commodity) = yes$(not sum(process, a(commodity,process) gt 0)); rawmat("scrap-iron") = yes;
 143   
 144   Display demand, ur, mu, rawmat;
 145   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:35 Page 5
Sample Data Base of the US Economy  (RDATA,SEQ=38)
model definiton


 147   
 148   Variables nunion           number of unions                          (number)
 149             z(process,plant) process level                      (million units)
 150             up(union)        union participation
 151             u(commodity)     purchase of raw materials          (million units)
 152   
 153   Positive Variable z;
 154   Binary Variable up;
 155   
 156   Equations mb(commodity)   material balance                    (million units)
 157             cc(unit,plant)  capacity constraint                 (million units)
 158             ub(union)       union balance
 159             ud              union definition;
 160   

 162   

 163   mb(commodity)..  sum((process,plant), a(commodity,process)*z(process,plant))

 164                   + u(commodity)$rawmat(commodity) =e= demand(commodity);

 165   

 166   cc(unit,plant).. sum(process, b(unit,process)*z(process,plant)) =l= k80(unit,plant);

 167   

 168   ub(union)..      sum((process,plant), ur(process,plant,union)*z(process,plant)) =l= mu(union)*up(union);

 169   

 170   ud..             nunion =e= sum(union, up(union));

 171   

 172   Model david / all /;

 173   

 174   Solve david minimizing nunion using mip;

 175   

 176   q4 = nunion.l; Display q4;


COMPILATION TIME     =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:35 Page 6
Sample Data Base of the US Economy  (RDATA,SEQ=38)
E x e c u t i o n


----    114 SET indpl  classification of plants by industry

              sparrows      inland     comfort    rockdale     lansing

aluminum                                   YES         YES
steel              YES         YES
automobile                                                         YES


----    130 PARAMETER q1  employment by union and company (thousands)

        us-steel       alcoa  inld-steel          gm

iam        0.050
ibew                   0.050
ibt        0.300       0.200
uaw                                            1.200
usa        1.200       1.200       0.400


----    130 PARAMETER q2  capacity by region (millions of units)

               e-coast     g-coast    mid-west

blast-furn       2.000                   2.500
steel-shop       2.350                   2.800
roll-mill        1.900                   2.400
alumina                      0.800
aluminum                     1.100
stamping                                 0.600
assembly                                 0.600


----    130 PARAMETER q3  employment in steel and automobiles (thousands)

bowen    0.400,    hughes   1.550,    milliken 1.200


----    144 PARAMETER demand  in millions of units

automobile 0.500


----    144 PARAMETER ur  union relationship to plant processes

                           iam        ibew         ibt         uaw         usa

alumina  .comfort                                0.200                   0.700
aluminum .comfort                                0.200                   0.700
aluminum .rockdale                   0.050                               0.500
pig-iron .sparrows       0.050                   0.300                   1.200
pig-iron .inland                                                         0.400
auto-body.lansing                                            1.200
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:35 Page 7
Sample Data Base of the US Economy  (RDATA,SEQ=38)
E x e c u t i o n


        144 PARAMETER ur  union relationship to plant processes

                           iam        ibew         ibt         uaw         usa

steel-pig.sparrows       0.050                   0.300                   1.200
steel-pig.inland                                                         0.400
stl-scrap.sparrows       0.050                   0.300                   1.200
stl-scrap.inland                                                         0.400
rolling  .sparrows       0.050                   0.300                   1.200
rolling  .inland                                                         0.400
auto-assm.lansing                                            1.200


----    144 PARAMETER mu  maximum

iam  0.200,    ibew 0.050,    ibt  1.600,    uaw  2.400,    usa  8.300


----    144 SET rawmat  raw materials

iron-ore  ,    scrap-iron,    bauxite   

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:35 Page 8
Sample Data Base of the US Economy  (RDATA,SEQ=38)
Equation Listing    SOLVE david Using MIP From line 174


---- mb  =E=  material balance                    (million units)

mb(alumina)..  z(alumina,sparrows) + z(alumina,inland) + z(alumina,comfort) + z(alumina,rockdale) + z(alumina,lansing) - 1.2*z(aluminum,sparrows) - 1.2*z(aluminum,inland) - 1.2*z(aluminum,comfort) - 1.2*z(aluminum,rockdale) - 1.2*z(aluminum,lansing) =E= 0
      ; (LHS = 0)
     
mb(aluminum)..  z(aluminum,sparrows) + z(aluminum,inland) + z(aluminum,comfort) + z(aluminum,rockdale) + z(aluminum,lansing) - 0.2*z(auto-body,sparrows) - 0.2*z(auto-body,inland) - 0.2*z(auto-body,comfort) - 0.2*z(auto-body,rockdale)
     
      - 0.2*z(auto-body,lansing) =E= 0 ; (LHS = 0)
     
mb(iron-ore)..  - z(pig-iron,sparrows) - z(pig-iron,inland) - z(pig-iron,comfort) - z(pig-iron,rockdale) - z(pig-iron,lansing) + u(iron-ore) =E= 0 ; (LHS = 0)
     
REMAINING 7 ENTRIES SKIPPED


---- cc  =L=  capacity constraint                 (million units)

cc(blast-furn,sparrows)..  z(pig-iron,sparrows) =L= 2 ; (LHS = 0)
     
cc(blast-furn,inland)..  z(pig-iron,inland) =L= 2.5 ; (LHS = 0)
     
cc(blast-furn,comfort)..  z(pig-iron,comfort) =L= 0 ; (LHS = 0)
     
REMAINING 32 ENTRIES SKIPPED


---- ub  =L=  union balance

ub(iam)..  0.05*z(pig-iron,sparrows) + 0.05*z(steel-pig,sparrows) + 0.05*z(stl-scrap,sparrows) + 0.05*z(rolling,sparrows) - 0.2*up(iam) =L= 0 ; (LHS = 0)
     
ub(ibew)..  0.05*z(aluminum,rockdale) - 0.05*up(ibew) =L= 0 ; (LHS = 0)
     
ub(ibt)..  0.2*z(alumina,comfort) + 0.2*z(aluminum,comfort) + 0.3*z(pig-iron,sparrows) + 0.3*z(steel-pig,sparrows) + 0.3*z(stl-scrap,sparrows) + 0.3*z(rolling,sparrows) - 1.6*up(ibt) =L= 0 ; (LHS = 0)
     
REMAINING 2 ENTRIES SKIPPED


---- ud  =E=  union definition

ud..  nunion - up(iam) - up(ibew) - up(ibt) - up(uaw) - up(usa) =E= 0 ; (LHS = 0)
     
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:35 Page 9
Sample Data Base of the US Economy  (RDATA,SEQ=38)
Column Listing      SOLVE david Using MIP From line 174


---- nunion  number of unions                          (number)

nunion
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       ud


---- z  process level                      (million units)

z(alumina,sparrows)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       mb(alumina)
       -1.4     mb(bauxite)
        1       cc(alumina,sparrows)

z(alumina,inland)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       mb(alumina)
       -1.4     mb(bauxite)
        1       cc(alumina,inland)

z(alumina,comfort)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       mb(alumina)
       -1.4     mb(bauxite)
        1       cc(alumina,comfort)
        0.2     ub(ibt)
        0.7     ub(usa)

REMAINING 37 ENTRIES SKIPPED

---- up  union participation

up(iam)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       -0.2     ub(iam)
       -1       ud

up(ibew)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       -0.05    ub(ibew)
       -1       ud

up(ibt)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       -1.6     ub(ibt)
       -1       ud

REMAINING 2 ENTRIES SKIPPED
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:35 Page 10
Sample Data Base of the US Economy  (RDATA,SEQ=38)
Column Listing      SOLVE david Using MIP From line 174


---- u  purchase of raw materials          (million units)

u(iron-ore)
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       mb(iron-ore)

u(scrap-iron)
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       mb(scrap-iron)

u(bauxite)
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       mb(bauxite)

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:35 Page 11
Sample Data Base of the US Economy  (RDATA,SEQ=38)
Model Statistics    SOLVE david Using MIP From line 174


MODEL STATISTICS

BLOCKS OF EQUATIONS           4     SINGLE EQUATIONS           51
BLOCKS OF VARIABLES           4     SINGLE VARIABLES           49
NON ZERO ELEMENTS           178     DISCRETE VARIABLES          5


GENERATION TIME      =        0.002 SECONDS      4 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.003 SECONDS      4 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:35 Page 12
Sample Data Base of the US Economy  (RDATA,SEQ=38)
Solution Report     SOLVE david Using MIP From line 174


               S O L V E      S U M M A R Y

     MODEL   david               OBJECTIVE  nunion
     TYPE    MIP                 DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  174

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/rdata/convert.opt"
>>  pyomo rdata-scalar.py
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/rdata/convert.opt"
Pyomo     : rdata-scalar.py


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:35 Page 13
Sample Data Base of the US Economy  (RDATA,SEQ=38)
E x e c u t i o n


----    176 PARAMETER q4                   =        0.000  smallest number of union participation to build cars


EXECUTION TIME       =        0.000 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


USER: Remigijus Paulavicius, Single User License     S170731:0859AO-LNX
      Imperial College London, Dept. of Chemical Engineering    DC13449
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      /home/renigijus/gams/opt-mod-lib/gamslib/rdata/rdata.gms
Output     /home/renigijus/gams/opt-mod-lib/gamslib/rdata/rdata-scalar.py.lst
