GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:43:40 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  option NLP=convert;
   2  option NLP=convert;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:43:40 Page 2
Pack circles in the smallest possible rectangle (CIRCPACK,SEQ=401)
C o m p i l a t i o n


       
      For a given set of circles determine the minimum area rectangle which hosts
      all circles.
       
      The problem requires a global solver.
       
       
      Kallrath, J. Cutting Circles and Polygons from Area-Minimizing Rectangles.
      Journal of Global Optimization 43 (2009), 299-328
  15   
  16  Set d 'dimensions'    / 1,2 /
  17      i 'items=circles' / i1*i6/ ;
  18   
  19  Parameter
  20      sizeLB(d) 'lower bounds on rectangle size' / 1 1, 2 1 /
  21      sizeUB(d) 'upper bounds on rectangle size' / 1 4, 2 8 /
  22      R(i)      'radius of circles' / i1 1.2, i2 0.6, i3 0.8,
  23                                      i4 1.7, i5 1.3, i6 0.5 / ;
  24   
  25  *-----------------------------------------------------
  26  * The NLP model for solving the circle packing problem
  27  *-----------------------------------------------------
  28   
  29  Alias (i,ii) ;
  30  Variables
  31      a           'area of the rectangle'
  32      xP(d)       'the width (d=1) and length (d=2) of the rectangle'
  33      x(i,d)      'the center of circle i'
  34      z           'objective function' ;
  35  Positive variables a, xP, x;
  36   
  37  Equations
  38     objective      'trimloss'
  39     area           'the area of the rectangle'
  40     disjun(i,ii)   'non-overlap condition for the circles'
  41     ULx(i,d)       'upper limit on x(i) le w - R(i) ' ;
  42   
  43  objective.. z =e= a - sum (i, pi*sqr(R(i)) );
  44   
  45  * compute the area of the design rectangle (bilinear version)
  46  area..      a =e= prod(d, xP(d)) ;
  47   
  48  * upper limit on the coordinates of the center of the circles
  49  ULx(i,d)..  x(i,d) =l= xP(d) - R(i) ;
  50   
  51  * DISJUN(i,ii)$(not sameas(i,ii))..
  52  disjun(i,ii)$(i.pos > ii.pos)..
  53              sum(d, sqr(x(i,d)-x(ii,d))) =g= sqr(R(i)+R(ii)) ;
  54   
  55   
  56  model Circpack  /all/;
  57   
  58  * lower and upper bounds on the centre of the circles
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:43:40 Page 3
Pack circles in the smallest possible rectangle (CIRCPACK,SEQ=401)
C o m p i l a t i o n


  59  x.lo(i,d) = R(i) ;
  60  x.up(i,d) = sizeUB(d) - R(i) ;
  61   
  62  * upper bound on the area
  63  a.up = prod(d,sizeUB(d)) ;
  64   
  65  * upper bounds on the width and length of the rectangle
  66  xP.up(d) = sizeUB(d) ;
  67   
  68  * A simple scheme (such as below) for setting the starting point does not
  69  * lead to a feasible solution when using a local solver. This problem requires
  70  * a global code
  71  x.l(i,d) = uniform(x.lo(i,d), x.up(i,d)) ;
  72  xP.l(d) = sizeUB(d) ;
  73  a.l = a.up ;
  74   
  75  option reslim = 60, optcr = 0;
  76  solve Circpack using nlp minimizing z ;
  77   
  78  display a.l, xP.l, z.l, x.l ;
  79   
  80  *  produce some nice looking output
  81   
  83   


COMPILATION TIME     =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:43:40 Page 4
Pack circles in the smallest possible rectangle (CIRCPACK,SEQ=401)
Equation Listing    SOLVE Circpack Using NLP From line 76


---- objective  =E=  trimloss

objective..  - a + z =E= -22.8393785915978 ; (LHS = -32, INFES = 9.1606214084022 ****)
     

---- area  =E=  the area of the rectangle

area..  a - (8)*xP(1) - (4)*xP(2) =E= 0 ; (LHS = 0)
     

---- disjun  =G=  non-overlap condition for the circles

disjun(i2,i1)..  - (1.3325111712)*x(i1,1) + (6.5491116352)*x(i1,2) + (1.3325111712)*x(i2,1) - (6.5491116352)*x(i2,2) =G= 3.24 ; (LHS = 11.1666123079212)
     
disjun(i3,i1)..  - (0.0530273392000002)*x(i1,1) + (7.376710432)*x(i1,2) + (0.0530273392000002)*x(i3,1) - (7.376710432)*x(i3,2) =G= 4 ; (LHS = 13.6046671740701)
     
disjun(i3,i2)..  (1.279483832)*x(i2,1) + (0.8275987968)*x(i2,2) - (1.279483832)*x(i3,1) - (0.8275987968)*x(i3,2) =G= 1.96 ; (LHS = 0.580499661203553, INFES = 1.37950033879645 ****)
     
REMAINING 12 ENTRIES SKIPPED


---- ULx  =L=  upper limit on x(i) le w - R(i) 

ULx(i1,1)..  - xP(1) + x(i1,1) =L= -1.2 ; (LHS = -2.5252045888)
     
ULx(i1,2)..  - xP(2) + x(i1,2) =L= -1.2 ; (LHS = -2.0777064352)
     
ULx(i2,1)..  - xP(1) + x(i2,1) =L= -0.6 ; (LHS = -1.8589490032)
     
REMAINING 9 ENTRIES SKIPPED

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:43:40 Page 5
Pack circles in the smallest possible rectangle (CIRCPACK,SEQ=401)
Column Listing      SOLVE Circpack Using NLP From line 76


---- a  area of the rectangle

a
                (.LO, .L, .UP, .M = 0, 32, 32, 0)
       -1       objective
        1       area


---- xP  the width (d=1) and length (d=2) of the rectangle

xP(1)
                (.LO, .L, .UP, .M = 0, 4, 4, 0)
      (-8)      area
       -1       ULx(i1,1)
       -1       ULx(i2,1)
       -1       ULx(i3,1)
       -1       ULx(i4,1)
       -1       ULx(i5,1)
       -1       ULx(i6,1)

xP(2)
                (.LO, .L, .UP, .M = 0, 8, 8, 0)
      (-4)      area
       -1       ULx(i1,2)
       -1       ULx(i2,2)
       -1       ULx(i3,2)
       -1       ULx(i4,2)
       -1       ULx(i5,2)
       -1       ULx(i6,2)


---- x  the center of circle i

x(i1,1)
                (.LO, .L, .UP, .M = 1.2, 1.4747954112, 2.8, 0)
      (-1.3325) disjun(i2,i1)
      (-0.053)  disjun(i3,i1)
      (-0.8702) disjun(i4,i1)
       (0.1617) disjun(i5,i1)
      (-4.0391) disjun(i6,i1)
        1       ULx(i1,1)

x(i1,2)
                (.LO, .L, .UP, .M = 1.2, 5.9222935648, 6.8, 0)
       (6.5491) disjun(i2,i1)
       (7.3767) disjun(i3,i1)
       (0.5669) disjun(i4,i1)
       (3.8423) disjun(i5,i1)
       (2.7423) disjun(i6,i1)
        1       ULx(i1,2)

x(i2,1)
                (.LO, .L, .UP, .M = 0.6, 2.1410509968, 3.4, 0)
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:43:40 Page 6
Pack circles in the smallest possible rectangle (CIRCPACK,SEQ=401)
Column Listing      SOLVE Circpack Using NLP From line 76


     x  the center of circle i

       (1.3325) disjun(i2,i1)
       (1.2795) disjun(i3,i2)
       (0.4623) disjun(i4,i2)
       (1.4942) disjun(i5,i2)
      (-2.7066) disjun(i6,i2)
        1       ULx(i2,1)

REMAINING 9 ENTRIES SKIPPED

---- z  objective function

z
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       objective

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:43:40 Page 7
Pack circles in the smallest possible rectangle (CIRCPACK,SEQ=401)
Model Statistics    SOLVE Circpack Using NLP From line 76


MODEL STATISTICS

BLOCKS OF EQUATIONS           4     SINGLE EQUATIONS           29
BLOCKS OF VARIABLES           4     SINGLE VARIABLES           16
NON ZERO ELEMENTS            89     NON LINEAR N-Z             62
DERIVATIVE POOL              20     CONSTANT POOL              16
CODE LENGTH                 140


GENERATION TIME      =        0.002 SECONDS      4 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.002 SECONDS      4 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:43:40 Page 8
Pack circles in the smallest possible rectangle (CIRCPACK,SEQ=401)
Solution Report     SOLVE Circpack Using NLP From line 76


               S O L V E      S U M M A R Y

     MODEL   Circpack            OBJECTIVE  z
     TYPE    NLP                 DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  76

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000        60.000
 ITERATION COUNT, LIMIT         0    2000000000
 EVALUATION ERRORS              0             0

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/circpack/convert.opt"
>>  gams circpack-scalar.gms
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/circpack/convert.opt"
Gams      : circpack-scalar.gms


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:43:40 Page 9
Pack circles in the smallest possible rectangle (CIRCPACK,SEQ=401)
E x e c u t i o n


----     78 VARIABLE a.L                   =       32.000  area of the rectangle

----     78 VARIABLE xP.L  the width (d=1) and length (d=2) of the rectangle

1 4.000,    2 8.000


----     78 VARIABLE z.L                   =        0.000  objective function

----     78 VARIABLE x.L  the center of circle i

             1           2

i1       1.475       5.922
i2       2.141       2.648
i3       1.501       2.234
i4       1.910       5.639
i5       1.394       4.001
i6       3.494       4.551



EXECUTION TIME       =        0.000 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


USER: Remigijus Paulavicius, Single User License     S170731:0859AO-LNX
      Imperial College London, Dept. of Chemical Engineering    DC13449
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      /home/renigijus/gams/opt-mod-lib/gamslib/circpack/circpack.gms
Output     /home/renigijus/gams/opt-mod-lib/gamslib/circpack/circpack-scalar.gms.lst
