GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:23 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  option MINLP=convert;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:23 Page 2
Trim Loss Minimization (TRIMLOSS,SEQ=204)
C o m p i l a t i o n


       The task is to cut out some paper products of different sizes from a
       large raw paper roll, in order to meet a customer's order.
       
       
      Harjunkoski, I, Application of MINLP Methods on a Scheduling Problem
      in the Paper Converting Industry. PhD thesis, Abo Akademi University,
      1997.
       
      Harjunkoski, I, Westerlund, T, Porn, R, and Skrifvars, H,
      Different Transformations for Solving Non-Convex Trim Loss Problems by
      MINLP. European Journal of Operational Research 105, 3 (1998), 594-603.
       
      Floudas, C A, Pardalos, P M, Adjiman, C S, Esposito, W R, Gumus, Z H,
      Harding, S T, Klepeis, J L, Meyer, C A, and Schweiger, C A, Handbook
      of Test Problems in Local and Global Optimization. Kluwer Academic
      Publishers, 1999.
       
      The entire collection of models can found at
         http://titan.princeton.edu/TestProblems/
       
  25   
  26  SET i product roll /1*6/
  27      j pattern number /1*6/;
  28   
  29  SCALAR Bmax width of entire roll / 2200 /
  30         delta maximum loss in pattern / 100 /
  31         Nkmax maximum number of knives / 5 /;
  32   
  33  PARAMETER n(i)  number of orders of each product roll
  34           / 1  8, 2 16, 3 12, 4  7, 5 14, 6 16 /;
  35   
  36  PARAMETER b(i)  width of each roll
  37           / 1  330, 2  360, 3  380, 4  430, 5  490, 6  530 /;
  38   
  39  PARAMETER mupp(j)   upper bound on repeats of pattern j
  40           / 1 15, 2 12, 3  8, 4  7, 5  4, 6  2 /;
  41   
  42  VARIABLES
  43           r(i,j)    number of products of type i in pattern j
  44           y(j)      existence of pattern j
  45           m(j)      repeats of pattern j
  46           objval    objective function variable;
  47   
  48  FREE VARIABLES    objval;
  49  BINARY VARIABLE   y;
  50  INTEGER VARIABLE  r, m;
  51   
  52  EQUATIONS
  53           f           objective function
  54           numroll(i)  order constraints ensuring sufficient production
  55           widthL(j)   width lower bound constraint
  56           widthU(j)   width upper bound constraint
  57           rL(j)       logical constraint on r
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:23 Page 3
Trim Loss Minimization (TRIMLOSS,SEQ=204)
C o m p i l a t i o n


  58           sumr(j)     logical constraint on r
  59           mL(j)       logical constraint on m
  60           mU(j)       logical constraint on m
  61           sumbil      lower bound on total number of patterns made
  62           yy(j)       ordering of y variables to reduce degeneracy
  63           lmm(j)      ordering of m variables to reduce degeneracy
  64  ;
  65   
  66  f.. objval =e= SUM(j, m(j) + ord(j)/10 * y(j));
  67   
  68  numroll(i).. SUM(j, m(j) * r(i,j)) =g= n(i);
  69   
  70  widthL(j).. SUM(i,b(i) * r(i,j)) =g= (Bmax - delta) * y(j);
  71  widthU(j).. SUM(i,b(i) * r(i,j)) =l= Bmax * y(j);
  72   
  73  rL(j).. y(j) =l= SUM(i,r(i,j));
  74   
  75  sumr(j).. SUM(i,r(i,j)) =l=  Nkmax * y(j);
  76   
  77  mL(j).. y(j) =l= m(j);
  78  mU(j).. m(j) - mupp(j) * y(j) =l= 0;
  79   
  80  sumbil  .. SUM(j, m(j)) =g=
  81                max(ceil(sum(i,n(i))/Nkmax), ceil(sum(i,b(i)*n(i))/Bmax))+1;
  82   
  83  yy(j+1).. y(j+1) =l= y(j);
  84   
  85  lmm(j+1).. m(j+1) =l= m(j);
  86   
  87   
  88  * Bounds
  89  r.UP(i,j) = Nkmax;
  90  m.UP(j) = mupp(j);
  91   
  92  MODEL trimloss /ALL/;
  93   
  94  OPTION optcr=0.0;
  95   
  96  SOLVE trimloss USING MINLP MINIMIZING objval;
  97  execerror=0;
  98   
  99  * Did we find the global solution?
 100  PARAMETER rep solution report;
 101   
 102  rep(i,j,'local') = r.L(i,j);
 103  rep('y',j,'local') = y.L(j);
 104  rep('m',j,'local') = m.L(j);
 105   
 106  TABLE gs(j,*) global solution
 107                1   2   3   4   5   6   y   m
 108          1         2       1   1   1   1   8
 109          2     1       2       1   1   1   8
 110  ;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:23 Page 4
Trim Loss Minimization (TRIMLOSS,SEQ=204)
C o m p i l a t i o n


 111  rep(i,j,'global') = gs(j,i);
 112  rep('y',j,'global') = gs(j,'y');
 113  rep('m',j,'global') = gs(j,'m');
 114   
 115  rep(i,j,'diff') = rep(i,j,'global') - rep(i,j,'local');
 116  rep('y',j,'diff') = rep('y',j,'global') - rep('y',j,'local');
 117  rep('m',j,'diff') = rep('m',j,'global') - rep('m',j,'local');
 118   
 119  option rep:8:2:1;
 120  display rep;


COMPILATION TIME     =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:23 Page 5
Trim Loss Minimization (TRIMLOSS,SEQ=204)
Equation Listing    SOLVE trimloss Using MINLP From line 96


---- f  =E=  objective function

f..  - 0.1*y(1) - 0.2*y(2) - 0.3*y(3) - 0.4*y(4) - 0.5*y(5) - 0.6*y(6) - m(1) - m(2) - m(3) - m(4) - m(5) - m(6) + objval =E= 0 ; (LHS = 0)
     

---- numroll  =G=  order constraints ensuring sufficient production

numroll(1)..  (0)*r(1,1) + (0)*r(1,2) + (0)*r(1,3) + (0)*r(1,4) + (0)*r(1,5) + (0)*r(1,6) + (0)*m(1) + (0)*m(2) + (0)*m(3) + (0)*m(4) + (0)*m(5) + (0)*m(6) =G= 8 ; (LHS = 0, INFES = 8 ****)
     
numroll(2)..  (0)*r(2,1) + (0)*r(2,2) + (0)*r(2,3) + (0)*r(2,4) + (0)*r(2,5) + (0)*r(2,6) + (0)*m(1) + (0)*m(2) + (0)*m(3) + (0)*m(4) + (0)*m(5) + (0)*m(6) =G= 16 ; (LHS = 0, INFES = 16 ****)
     
numroll(3)..  (0)*r(3,1) + (0)*r(3,2) + (0)*r(3,3) + (0)*r(3,4) + (0)*r(3,5) + (0)*r(3,6) + (0)*m(1) + (0)*m(2) + (0)*m(3) + (0)*m(4) + (0)*m(5) + (0)*m(6) =G= 12 ; (LHS = 0, INFES = 12 ****)
     
REMAINING 3 ENTRIES SKIPPED


---- widthL  =G=  width lower bound constraint

widthL(1)..  330*r(1,1) + 360*r(2,1) + 380*r(3,1) + 430*r(4,1) + 490*r(5,1) + 530*r(6,1) - 2100*y(1) =G= 0 ; (LHS = 0)
     
widthL(2)..  330*r(1,2) + 360*r(2,2) + 380*r(3,2) + 430*r(4,2) + 490*r(5,2) + 530*r(6,2) - 2100*y(2) =G= 0 ; (LHS = 0)
     
widthL(3)..  330*r(1,3) + 360*r(2,3) + 380*r(3,3) + 430*r(4,3) + 490*r(5,3) + 530*r(6,3) - 2100*y(3) =G= 0 ; (LHS = 0)
     
REMAINING 3 ENTRIES SKIPPED


---- widthU  =L=  width upper bound constraint

widthU(1)..  330*r(1,1) + 360*r(2,1) + 380*r(3,1) + 430*r(4,1) + 490*r(5,1) + 530*r(6,1) - 2200*y(1) =L= 0 ; (LHS = 0)
     
widthU(2)..  330*r(1,2) + 360*r(2,2) + 380*r(3,2) + 430*r(4,2) + 490*r(5,2) + 530*r(6,2) - 2200*y(2) =L= 0 ; (LHS = 0)
     
widthU(3)..  330*r(1,3) + 360*r(2,3) + 380*r(3,3) + 430*r(4,3) + 490*r(5,3) + 530*r(6,3) - 2200*y(3) =L= 0 ; (LHS = 0)
     
REMAINING 3 ENTRIES SKIPPED


---- rL  =L=  logical constraint on r

rL(1)..  - r(1,1) - r(2,1) - r(3,1) - r(4,1) - r(5,1) - r(6,1) + y(1) =L= 0 ; (LHS = 0)
     
rL(2)..  - r(1,2) - r(2,2) - r(3,2) - r(4,2) - r(5,2) - r(6,2) + y(2) =L= 0 ; (LHS = 0)
     
rL(3)..  - r(1,3) - r(2,3) - r(3,3) - r(4,3) - r(5,3) - r(6,3) + y(3) =L= 0 ; (LHS = 0)
     
REMAINING 3 ENTRIES SKIPPED

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:23 Page 6
Trim Loss Minimization (TRIMLOSS,SEQ=204)
Equation Listing    SOLVE trimloss Using MINLP From line 96


---- sumr  =L=  logical constraint on r

sumr(1)..  r(1,1) + r(2,1) + r(3,1) + r(4,1) + r(5,1) + r(6,1) - 5*y(1) =L= 0 ; (LHS = 0)
     
sumr(2)..  r(1,2) + r(2,2) + r(3,2) + r(4,2) + r(5,2) + r(6,2) - 5*y(2) =L= 0 ; (LHS = 0)
     
sumr(3)..  r(1,3) + r(2,3) + r(3,3) + r(4,3) + r(5,3) + r(6,3) - 5*y(3) =L= 0 ; (LHS = 0)
     
REMAINING 3 ENTRIES SKIPPED


---- mL  =L=  logical constraint on m

mL(1)..  y(1) - m(1) =L= 0 ; (LHS = 0)
     
mL(2)..  y(2) - m(2) =L= 0 ; (LHS = 0)
     
mL(3)..  y(3) - m(3) =L= 0 ; (LHS = 0)
     
REMAINING 3 ENTRIES SKIPPED


---- mU  =L=  logical constraint on m

mU(1)..  - 15*y(1) + m(1) =L= 0 ; (LHS = 0)
     
mU(2)..  - 12*y(2) + m(2) =L= 0 ; (LHS = 0)
     
mU(3)..  - 8*y(3) + m(3) =L= 0 ; (LHS = 0)
     
REMAINING 3 ENTRIES SKIPPED


---- sumbil  =G=  lower bound on total number of patterns made

sumbil..  m(1) + m(2) + m(3) + m(4) + m(5) + m(6) =G= 16 ; (LHS = 0, INFES = 16 ****)
     

---- yy  =L=  ordering of y variables to reduce degeneracy

yy(2)..  - y(1) + y(2) =L= 0 ; (LHS = 0)
     
yy(3)..  - y(2) + y(3) =L= 0 ; (LHS = 0)
     
yy(4)..  - y(3) + y(4) =L= 0 ; (LHS = 0)
     
REMAINING 2 ENTRIES SKIPPED

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:23 Page 7
Trim Loss Minimization (TRIMLOSS,SEQ=204)
Equation Listing    SOLVE trimloss Using MINLP From line 96


---- lmm  =L=  ordering of m variables to reduce degeneracy

lmm(2)..  - m(1) + m(2) =L= 0 ; (LHS = 0)
     
lmm(3)..  - m(2) + m(3) =L= 0 ; (LHS = 0)
     
lmm(4)..  - m(3) + m(4) =L= 0 ; (LHS = 0)
     
REMAINING 2 ENTRIES SKIPPED

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:23 Page 8
Trim Loss Minimization (TRIMLOSS,SEQ=204)
Column Listing      SOLVE trimloss Using MINLP From line 96


---- r  number of products of type i in pattern j

r(1,1)
                (.LO, .L, .UP, .M = 0, 0, 5, 0)
       (0)      numroll(1)
      330       widthL(1)
      330       widthU(1)
       -1       rL(1)
        1       sumr(1)

r(1,2)
                (.LO, .L, .UP, .M = 0, 0, 5, 0)
       (0)      numroll(1)
      330       widthL(2)
      330       widthU(2)
       -1       rL(2)
        1       sumr(2)

r(1,3)
                (.LO, .L, .UP, .M = 0, 0, 5, 0)
       (0)      numroll(1)
      330       widthL(3)
      330       widthU(3)
       -1       rL(3)
        1       sumr(3)

REMAINING 33 ENTRIES SKIPPED

---- y  existence of pattern j

y(1)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       -0.1     f
    -2100       widthL(1)
    -2200       widthU(1)
        1       rL(1)
       -5       sumr(1)
        1       mL(1)
      -15       mU(1)
       -1       yy(2)

y(2)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       -0.2     f
    -2100       widthL(2)
    -2200       widthU(2)
        1       rL(2)
       -5       sumr(2)
        1       mL(2)
      -12       mU(2)
        1       yy(2)
       -1       yy(3)

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:23 Page 9
Trim Loss Minimization (TRIMLOSS,SEQ=204)
Column Listing      SOLVE trimloss Using MINLP From line 96


     y  existence of pattern j

y(3)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       -0.3     f
    -2100       widthL(3)
    -2200       widthU(3)
        1       rL(3)
       -5       sumr(3)
        1       mL(3)
       -8       mU(3)
        1       yy(3)
       -1       yy(4)

REMAINING 3 ENTRIES SKIPPED

---- m  repeats of pattern j

m(1)
                (.LO, .L, .UP, .M = 0, 0, 15, 0)
       -1       f
       (0)      numroll(1)
       (0)      numroll(2)
       (0)      numroll(3)
       (0)      numroll(4)
       (0)      numroll(5)
       (0)      numroll(6)
       -1       mL(1)
        1       mU(1)
        1       sumbil
       -1       lmm(2)

m(2)
                (.LO, .L, .UP, .M = 0, 0, 12, 0)
       -1       f
       (0)      numroll(1)
       (0)      numroll(2)
       (0)      numroll(3)
       (0)      numroll(4)
       (0)      numroll(5)
       (0)      numroll(6)
       -1       mL(2)
        1       mU(2)
        1       sumbil
        1       lmm(2)
       -1       lmm(3)

m(3)
                (.LO, .L, .UP, .M = 0, 0, 8, 0)
       -1       f
       (0)      numroll(1)
       (0)      numroll(2)
       (0)      numroll(3)
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:32:23 Page 10
Trim Loss Minimization (TRIMLOSS,SEQ=204)
Column Listing      SOLVE trimloss Using MINLP From line 96


     m  repeats of pattern j

       (0)      numroll(4)
       (0)      numroll(5)
       (0)      numroll(6)
       -1       mL(3)
        1       mU(3)
        1       sumbil
        1       lmm(3)
       -1       lmm(4)

REMAINING 3 ENTRIES SKIPPED

---- objval  objective function variable

objval
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       f

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:32:23 Page 11
Trim Loss Minimization (TRIMLOSS,SEQ=204)
Model Statistics    SOLVE trimloss Using MINLP From line 96


MODEL STATISTICS

BLOCKS OF EQUATIONS          11     SINGLE EQUATIONS           54
BLOCKS OF VARIABLES           4     SINGLE VARIABLES           49
NON ZERO ELEMENTS           303     NON LINEAR N-Z             72
DERIVATIVE POOL              20     CONSTANT POOL              16
CODE LENGTH                 114     DISCRETE VARIABLES         48


GENERATION TIME      =        0.003 SECONDS      4 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.003 SECONDS      4 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:32:23 Page 12
Trim Loss Minimization (TRIMLOSS,SEQ=204)
Solution Report     SOLVE trimloss Using MINLP From line 96


               S O L V E      S U M M A R Y

     MODEL   trimloss            OBJECTIVE  objval
     TYPE    MINLP               DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  96

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000
 EVALUATION ERRORS              0             0

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/trimloss/convert.opt"
>>  ampl trimloss-scalar.mod
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/trimloss/convert.opt"
Ampl      : trimloss-scalar.mod


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:32:23 Page 13
Trim Loss Minimization (TRIMLOSS,SEQ=204)
E x e c u t i o n


**** EXECERROR AT LINE 97 CLEARED (EXECERROR=0)

----    120 PARAMETER rep  solution report

         global        diff

1.2  1.00000000  1.00000000
2.1  2.00000000  2.00000000
3.2  2.00000000  2.00000000
4.1  1.00000000  1.00000000
5.1  1.00000000  1.00000000
5.2  1.00000000  1.00000000
6.1  1.00000000  1.00000000
6.2  1.00000000  1.00000000
y.1  1.00000000  1.00000000
y.2  1.00000000  1.00000000
m.1  8.00000000  8.00000000
m.2  8.00000000  8.00000000



EXECUTION TIME       =        0.000 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


USER: Remigijus Paulavicius, Single User License     S170731:0859AO-LNX
      Imperial College London, Dept. of Chemical Engineering    DC13449
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      /home/renigijus/gams/opt-mod-lib/gamslib/trimloss/trimloss.gms
Output     /home/renigijus/gams/opt-mod-lib/gamslib/trimloss/trimloss-scalar.mod.lst
