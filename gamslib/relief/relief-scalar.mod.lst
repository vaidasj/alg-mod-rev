GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:34 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  option MIP=convert;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:34 Page 2
Relief Mission (RELIEF,SEQ=353)
C o m p i l a t i o n


       
      Huts or villages are located at 20 location on a 10 x 10 grid. The problem
      is to find the two best drop locations for relief packages such that the total
      distance traveled by villagers is minimized.
       
      We look at this problem as a plant location problem and trace the efficiency
      frontier of multiple drops. The optimal solution for two drops is D.8 and E.2.
       
      Another interesting question may be: how many other drop locations are there that
      have a total distance traveled with, say, 3 percent of the best location.
       
       
      Toczek J, Relief Mission, ORMS Today 37, 4 (2010), page 14
       
  20   
  21  sets r rows     / A*J  /
  22       c columns  / 1*10 /
  23       d drops    / d1*d20 /
  24   
  25  table dem(r,c) relief demands
  26   
  27     1 2 3 4 5 6 7 8 9 10
  28  A          1
  29  B          1       1  1
  30  C  1         1   1 1  1
  31  D    1         1      1
  32  E    1             1
  33  F                1
  34  G    1
  35  H    1       1
  36  I
  37  J                1    1
  38   
  39  alias(r,rr),(c,cc)
  40   
  41   
  42  set       huts(r,c)    hut locations
  43  parameter dis(r,c,r,c) Eucledian distances
  44            numdrops     number of drops
  45            maxdem       maximum drop demand;
  46   
  47  huts(r,c) = dem(r,c);
  48  maxdem    = sum(huts, dem(huts));
  49  dis(huts(r,c),rr,cc) = edist(r.pos-rr.pos,c.pos-cc.pos);
  50   
  51   
  52  variables drop(r,c)     drop locations
  53            walk(r,c,r,c) distances walked from huts to nearest drop zone
  54            total         total distance walked
  55  Binary variable drop; positive variable walk;
  56   
  57  equations demand, supply, deftotal, defnumdrop;
  58   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:34 Page 3
Relief Mission (RELIEF,SEQ=353)
C o m p i l a t i o n


  59  demand(huts)..  sum((r,c), walk(huts,r,c)) =e= 1;
  60   
  61  supply(r,c)..  sum(huts, walk(huts,r,c)) =l= drop(r,c)*maxdem;
  62   
  63  deftotal..     total =e= sum((huts,r,c), dis(huts,r,c)*walk(huts,r,c));
  64   
  65  defnumdrop..   sum((r,c), drop(r,c)) =e= numdrops;
  66   
  67  model m / all /;
  68   
  69   
  70  * --------------------------
  71  * get best two drop solution
  72  * --------------------------
  73   
  74  numdrops = 2;
  75  option limrow=0,limcol=0, optcr=0, solvelink=2, reslim=10;
  76  m.solprint=0;
  77  solve m min total using mip;
  78  display drop.l;
  79   
  80   
  81  * ------------------------
  82  * trace efficient frontier
  83  * ------------------------
  84   
  85  parameter QDrep Quick and Dirty Report;
  86   
  87  loop(d,
  88     numdrops = d.pos;
  89     solve m min total using mip;
  90     m.solprint=2;
  91     ! we use round() because a MIP code (CPLEX) may return fractional values
  92     QDrep(r,c,d)$round(drop.l(r,c)) = sum ( huts, dis(huts,r,c)*walk.l(huts,r,c)) + EPS*huts(r,c)*drop.l(r,c);
  93     QDrep('max','dist',d)           = smax((huts,r,c), dis(huts,r,c)*walk.l(huts,r,c));
  94     QDrep('tot','dist',d)           = sum ((huts,r,c), dis(huts,r,c)*walk.l(huts,r,c));
  95     QDrep('CPU','used',d)           = m.resusd  );
  96   
  97  display QDrep;
  98   
  99   
 100  * ----------------------------------------------------------------
 101  * find all drop points within x percent of best for two drop points
 102  *
 103  * To exclude the n'th integer solution we can write:
 104  *     cut(n)..  sum(i, abs(x(i)-xsol(i,n)) =g= 1;
 105  * simulating abs() will give
 106  *     cut(n).. sum((r,c), cutval(n,r,c)*drop(r,c)) =l= 1 ;
 107  * where cutval() contains solutions to be excluded
 108  * ----------------------------------------------------------------
 109   
 110  set nn max number of close solutions / n1*n50 /
 111      n(nn) dynamic set ;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:34 Page 4
Relief Mission (RELIEF,SEQ=353)
C o m p i l a t i o n


 112   
 113  parameters limit          total distance for drop points
 114             objval(nn)     total miles traveled
 115             cutval(nn,r,c) all possible solutions for cut generation;
 116   
 117  numdrops = 2; solve m min total using MIP; limit = 1.03*total.l;
 118   
 119  Equation cut(nn)  known solutions to be eliminated;
 120   
 121  cut(n).. sum((r,c), cutval(n,r,c)*drop(r,c)) =l= 1 ;
 122   
 123  model mm / m, cut /;
 124   
 125  n(nn) = no;  ! clear set of cuts
 126   
 127  mm.solvestat = 1;
 128  mm.modelstat = 1;
 129   
 130  mm.solprint=0;
 131   
 132  Loop(nn$(mm.solvestat=1 and
 133           mm.modelstat=1 and
 134           total.l < limit),
 135     n(nn) = yes;   ! add element to set
 136     cutval(nn,r,c) = round(drop.l(r,c));
 137     solve mm min total using mip;
 138     mm.solprint=0;
 139     objval(nn) = total.l );
 140   
 141  option cutval:0:1:1; display objval,cutval;
 142   
 143  parameter hits; hits(r,c) = sum(nn, cutval(nn,r,c)); display hits;
 144   
 145   
 146   
 147   
 148   
 149   


COMPILATION TIME     =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:34 Page 5
Relief Mission (RELIEF,SEQ=353)
Model Statistics    SOLVE m Using MIP From line 77


MODEL STATISTICS

BLOCKS OF EQUATIONS           4     SINGLE EQUATIONS          122
BLOCKS OF VARIABLES           3     SINGLE VARIABLES        2,101
NON ZERO ELEMENTS         6,181     DISCRETE VARIABLES        100


GENERATION TIME      =        0.006 SECONDS      4 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:34 Page 6
Relief Mission (RELIEF,SEQ=353)
Solution Report     SOLVE m Using MIP From line 77


               S O L V E      S U M M A R Y

     MODEL   m                   OBJECTIVE  total
     TYPE    MIP                 DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  77

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000        10.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/relief/convert.opt"
>>  ampl relief-scalar.mod
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/relief/convert.opt"
Ampl      : relief-scalar.mod


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:34 Page 7
Relief Mission (RELIEF,SEQ=353)
E x e c u t i o n


----     78 VARIABLE drop.L  drop locations

                      ( ALL       0.000 )

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:34 Page 8
Relief Mission (RELIEF,SEQ=353)
Model Statistics    SOLVE m Using MIP From line 89


LOOPS                                    d   d1


MODEL STATISTICS

BLOCKS OF EQUATIONS           4     SINGLE EQUATIONS          122
BLOCKS OF VARIABLES           3     SINGLE VARIABLES        2,101
NON ZERO ELEMENTS         6,181     DISCRETE VARIABLES        100


GENERATION TIME      =        0.005 SECONDS      4 MB  24.7.4 r58773 LEX-LEG
               L O O P S                  d d1

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:34 Page 9
Relief Mission (RELIEF,SEQ=353)
Solution Report     SOLVE m Using MIP From line 89


               S O L V E      S U M M A R Y

     MODEL   m                   OBJECTIVE  total
     TYPE    MIP                 DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  89

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000        10.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/relief/convert.opt"
>>  ampl relief-scalar.mod
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/relief/convert.opt"
Ampl      : relief-scalar.mod


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 11:30:34 Page 10
Relief Mission (RELIEF,SEQ=353)
Model Analysis      SOLVE m Using MIP From line 89



No solution returned

No solution returned

No solution returned

No solution returned

No solution returned

No solution returned

No solution returned

No solution returned

No solution returned

No solution returned

No solution returned

No solution returned

No solution returned

No solution returned

No solution returned

No solution returned

No solution returned

No solution returned

No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 11:30:34 Page 11
Relief Mission (RELIEF,SEQ=353)
E x e c u t i o n


----     97 PARAMETER QDrep  Quick and Dirty Report

                      ( ALL       0.000 )

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 11:30:34 Page 12
Relief Mission (RELIEF,SEQ=353)
Model Analysis      SOLVE m Using MIP From line 117



No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 11:30:34 Page 13
Relief Mission (RELIEF,SEQ=353)
E x e c u t i o n


----    141 PARAMETER objval  total miles traveled

                      ( ALL       0.000 )


----    141 PARAMETER cutval  all possible solutions for cut generation

                      ( ALL          0. )


----    143 PARAMETER hits  

                      ( ALL       0.000 )



EXECUTION TIME       =        0.313 SECONDS      4 MB  24.7.4 r58773 LEX-LEG


USER: Remigijus Paulavicius, Single User License     S170731:0859AO-LNX
      Imperial College London, Dept. of Chemical Engineering    DC13449
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      /home/renigijus/gams/opt-mod-lib/gamslib/relief/relief.gms
Output     /home/renigijus/gams/opt-mod-lib/gamslib/relief/relief-scalar.mod.lst
