GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:24:23 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  option MIP=convert;
   2  option MIP=convert;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:24:23 Page 2
Dynamic open pit mining extraction (OPENPIT,SEQ=309)
C o m p i l a t i o n


      This is an example of how to model material extractions that
      have sequencing requirements with a multi-period decision process.
      A segment has to be extracted completely before we can start on
      the next segment. Segments not completely extracted have to be
      extracted in the next time period or remain partially extracted in
      the last time period. The requirement of full extraction adds
      complications to the modeling within the multi-period framework.
       
       
      Reference: GAMS Development Corporation, Formulation and Language
      Example.
  17   
  21   
  22  set t extraction periods     / t1*t4 /
  23      s extraction segments    / s1*s50 /
  24      p pits                   / p1*p4 /;
  25   
  26   
  27  parameter nev(p,s)  net extraction benefit
  28            evo(p,s)  extraction volume
  29            demand(t) product demand
  30            rho       discount rate
  31            delta(t)  discount factor;
  32   
  33  parameter fix(p) offset for random  value
  34            var(p) var for random values;
  35   
  36  * produce random input data with differing net benefit profiles
  37  fix(p) = uniform(-1,+1); var(p) = -sign(fix(p))*uniform(1,5);
  38  nev(p,s) = (fix(p) + var(p)/card(s)*(ord(s)-1));
  39  evo(p,s) = uniform(.1,1);
  40  * set demand to 70 percent of total resource
  41  demand(t) = sum((p,s), evo(p,s))*0.7/card(t);
  42   
  43  rho = 0.1; delta(t) = power(1+rho,1-ord(t));
  44   
  45  binary variables
  46     b(p,s,t)   segment can be extracted
  47     e(p,s,t)   last extracted segment and start
  48     open(p,s)  segments activated
  49  integer variable
  50     ej(p,t)    period of last segment
  51  positive variable
  52     out(p,s,t) extraction level
  53     pout(p,t)  pit output
  54  variables
  55     obj       total discounted net income
  56   
  57  equations
  58     eone(p,t)      extraction sequence ends only once
  59     etwo(p,t)      extraction ending sequence
  60     ethree(p,t)    sequencing of end start
  61     opendef(p,s,t) set open to one
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:24:23 Page 3
Dynamic open pit mining extraction (OPENPIT,SEQ=309)
C o m p i l a t i o n


  62     openlow(p,s)   set open to zero
  63     brun(p,s,t)    define staircase for B
  64     defpout(p,t)   define pit output
  65     dem(t)         total demand
  66     outlim(p,s,t)  extraction limit
  67     outmax(p,s)    total extraction limit
  68     outall(p,s)    force complete extraction except last one
  69     defobj;
  70   
  71  eone(p,t)..     sum(s, e(p,s,t)) =e= 1;
  72   
  73  etwo(p,t)..     ej(p,t)   =e= sum(s, ord(s)*e(p,s,t));
  74  ethree(p,t-1).. ej(p,t-1) =l= ej(p,t);
  75   
  76  brun(p,s,t)..  b(p,s,t) =e= b(p,s-1,t) - e(p,s-1,t) + e(p,s,t-1) +
  77  (ord(t)=1 and ord(s)=1);
  78   
  79  defpout(p,t).. pout(p,t) =e= sum(s, out(p,s,t));
  80   
  81  dem(t)..  sum(p, pout(p,t)) =e= demand(t);
  82   
  83   
  84  opendef(p,s,t).. open(p,s) =g= b(p,s,t);
  85  openlow(p,s)..   open(p,s) =l= sum(t, b(p,s,t));
  86   
  87  outlim(p,s,t)..  out(p,s,t) =l= evo(p,s)*b(p,s,t);
  88   
  89  outall(p,s).. sum(t, out(p,s,t)) =g= evo(p,s)*open(p,s+1);
  90  outmax(p,s).. sum(t, out(p,s,t)) =l= evo(p,s)*open(p,s);
  91   
  92  defobj.. obj =e= sum((p,s,t), delta(t)*nev(p,s)*out(p,s,t));
  93   
  94  model extract /all /;
  95   
  96  if(card(s)*card(p)*card(t) > 200,
  97     option limrow=0,limcol=0,solprint=off,optcr=0.01
  98  else
  99     option optcr=0; display evo,nev );
 100   
 101  * limit single pit output to 80 percent of demand
 102  pout.up(p,t) = 0.8*demand(t);
 103   
 104  solve extract using mip max obj;
 105   
 106  display ej.l,e.l,b.l,out.l,pout.l;


COMPILATION TIME     =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:24:23 Page 4
Dynamic open pit mining extraction (OPENPIT,SEQ=309)
Model Analysis      SOLVE extract Using MIP From line 104


****
****  16 Integer +INF Bounds have been reset to 100 (see Option IntVarUp)
****
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:24:23 Page 5
Dynamic open pit mining extraction (OPENPIT,SEQ=309)
Model Statistics    SOLVE extract Using MIP From line 104


MODEL STATISTICS

BLOCKS OF EQUATIONS          12     SINGLE EQUATIONS        3,065
BLOCKS OF VARIABLES           7     SINGLE VARIABLES        2,633
NON ZERO ELEMENTS        12,437     DISCRETE VARIABLES      1,816


GENERATION TIME      =        0.009 SECONDS      5 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.009 SECONDS      5 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:24:23 Page 6
Dynamic open pit mining extraction (OPENPIT,SEQ=309)
Solution Report     SOLVE extract Using MIP From line 104


               S O L V E      S U M M A R Y

     MODEL   extract             OBJECTIVE  obj
     TYPE    MIP                 DIRECTION  MAXIMIZE
     SOLVER  CONVERT             FROM LINE  104

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/openpit/convert.opt"
>>  gams openpit-scalar.gms
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/openpit/convert.opt"
Gams      : openpit-scalar.gms


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:24:23 Page 7
Dynamic open pit mining extraction (OPENPIT,SEQ=309)
E x e c u t i o n


----    106 VARIABLE ej.L  period of last segment

                      ( ALL       0.000 )


----    106 VARIABLE e.L  last extracted segment and start

                      ( ALL       0.000 )


----    106 VARIABLE b.L  segment can be extracted

                      ( ALL       0.000 )


----    106 VARIABLE out.L  extraction level

                      ( ALL       0.000 )


----    106 VARIABLE pout.L  pit output

                      ( ALL       0.000 )



EXECUTION TIME       =        0.000 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


USER: Remigijus Paulavicius, Single User License     S170731:0859AO-LNX
      Imperial College London, Dept. of Chemical Engineering    DC13449
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      /home/renigijus/gams/opt-mod-lib/gamslib/openpit/openpit.gms
Output     /home/renigijus/gams/opt-mod-lib/gamslib/openpit/openpit-scalar.gms.lst
