GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:24:23 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  option MIP=convert;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:24:23 Page 2
Dynamic open pit mining extraction (OPENPIT,SEQ=309)
C o m p i l a t i o n


      This is an example of how to model material extractions that
      have sequencing requirements with a multi-period decision process.
      A segment has to be extracted completely before we can start on
      the next segment. Segments not completely extracted have to be
      extracted in the next time period or remain partially extracted in
      the last time period. The requirement of full extraction adds
      complications to the modeling within the multi-period framework.
       
       
      Reference: GAMS Development Corporation, Formulation and Language
      Example.
  16   
  20   
  21  set t extraction periods     / t1*t4 /
  22      s extraction segments    / s1*s50 /
  23      p pits                   / p1*p4 /;
  24   
  25   
  26  parameter nev(p,s)  net extraction benefit
  27            evo(p,s)  extraction volume
  28            demand(t) product demand
  29            rho       discount rate
  30            delta(t)  discount factor;
  31   
  32  parameter fix(p) offset for random  value
  33            var(p) var for random values;
  34   
  35  * produce random input data with differing net benefit profiles
  36  fix(p) = uniform(-1,+1); var(p) = -sign(fix(p))*uniform(1,5);
  37  nev(p,s) = (fix(p) + var(p)/card(s)*(ord(s)-1));
  38  evo(p,s) = uniform(.1,1);
  39  * set demand to 70 percent of total resource
  40  demand(t) = sum((p,s), evo(p,s))*0.7/card(t);
  41   
  42  rho = 0.1; delta(t) = power(1+rho,1-ord(t));
  43   
  44  binary variables
  45     b(p,s,t)   segment can be extracted
  46     e(p,s,t)   last extracted segment and start
  47     open(p,s)  segments activated
  48  integer variable
  49     ej(p,t)    period of last segment
  50  positive variable
  51     out(p,s,t) extraction level
  52     pout(p,t)  pit output
  53  variables
  54     obj       total discounted net income
  55   
  56  equations
  57     eone(p,t)      extraction sequence ends only once
  58     etwo(p,t)      extraction ending sequence
  59     ethree(p,t)    sequencing of end start
  60     opendef(p,s,t) set open to one
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:24:23 Page 3
Dynamic open pit mining extraction (OPENPIT,SEQ=309)
C o m p i l a t i o n


  61     openlow(p,s)   set open to zero
  62     brun(p,s,t)    define staircase for B
  63     defpout(p,t)   define pit output
  64     dem(t)         total demand
  65     outlim(p,s,t)  extraction limit
  66     outmax(p,s)    total extraction limit
  67     outall(p,s)    force complete extraction except last one
  68     defobj;
  69   
  70  eone(p,t)..     sum(s, e(p,s,t)) =e= 1;
  71   
  72  etwo(p,t)..     ej(p,t)   =e= sum(s, ord(s)*e(p,s,t));
  73  ethree(p,t-1).. ej(p,t-1) =l= ej(p,t);
  74   
  75  brun(p,s,t)..  b(p,s,t) =e= b(p,s-1,t) - e(p,s-1,t) + e(p,s,t-1) +
  76  (ord(t)=1 and ord(s)=1);
  77   
  78  defpout(p,t).. pout(p,t) =e= sum(s, out(p,s,t));
  79   
  80  dem(t)..  sum(p, pout(p,t)) =e= demand(t);
  81   
  82   
  83  opendef(p,s,t).. open(p,s) =g= b(p,s,t);
  84  openlow(p,s)..   open(p,s) =l= sum(t, b(p,s,t));
  85   
  86  outlim(p,s,t)..  out(p,s,t) =l= evo(p,s)*b(p,s,t);
  87   
  88  outall(p,s).. sum(t, out(p,s,t)) =g= evo(p,s)*open(p,s+1);
  89  outmax(p,s).. sum(t, out(p,s,t)) =l= evo(p,s)*open(p,s);
  90   
  91  defobj.. obj =e= sum((p,s,t), delta(t)*nev(p,s)*out(p,s,t));
  92   
  93  model extract /all /;
  94   
  95  if(card(s)*card(p)*card(t) > 200,
  96     option limrow=0,limcol=0,solprint=off,optcr=0.01
  97  else
  98     option optcr=0; display evo,nev );
  99   
 100  * limit single pit output to 80 percent of demand
 101  pout.up(p,t) = 0.8*demand(t);
 102   
 103  solve extract using mip max obj;
 104   
 105  display ej.l,e.l,b.l,out.l,pout.l;


COMPILATION TIME     =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:24:23 Page 4
Dynamic open pit mining extraction (OPENPIT,SEQ=309)
Model Analysis      SOLVE extract Using MIP From line 103


****
****  16 Integer +INF Bounds have been reset to 100 (see Option IntVarUp)
****
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:24:23 Page 5
Dynamic open pit mining extraction (OPENPIT,SEQ=309)
Model Statistics    SOLVE extract Using MIP From line 103


MODEL STATISTICS

BLOCKS OF EQUATIONS          12     SINGLE EQUATIONS        3,065
BLOCKS OF VARIABLES           7     SINGLE VARIABLES        2,633
NON ZERO ELEMENTS        12,437     DISCRETE VARIABLES      1,816


GENERATION TIME      =        0.011 SECONDS      5 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.012 SECONDS      5 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:24:23 Page 6
Dynamic open pit mining extraction (OPENPIT,SEQ=309)
Solution Report     SOLVE extract Using MIP From line 103


               S O L V E      S U M M A R Y

     MODEL   extract             OBJECTIVE  obj
     TYPE    MIP                 DIRECTION  MAXIMIZE
     SOLVER  CONVERT             FROM LINE  103

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/openpit/convert.opt"
>>  ampl openpit-scalar.mod
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/openpit/convert.opt"
Ampl      : openpit-scalar.mod


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:24:23 Page 7
Dynamic open pit mining extraction (OPENPIT,SEQ=309)
E x e c u t i o n


----    105 VARIABLE ej.L  period of last segment

                      ( ALL       0.000 )


----    105 VARIABLE e.L  last extracted segment and start

                      ( ALL       0.000 )


----    105 VARIABLE b.L  segment can be extracted

                      ( ALL       0.000 )


----    105 VARIABLE out.L  extraction level

                      ( ALL       0.000 )


----    105 VARIABLE pout.L  pit output

                      ( ALL       0.000 )



EXECUTION TIME       =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


USER: Remigijus Paulavicius, Single User License     S170731:0859AO-LNX
      Imperial College London, Dept. of Chemical Engineering    DC13449
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      /home/renigijus/gams/opt-mod-lib/gamslib/openpit/openpit.gms
Output     /home/renigijus/gams/opt-mod-lib/gamslib/openpit/openpit-scalar.mod.lst
