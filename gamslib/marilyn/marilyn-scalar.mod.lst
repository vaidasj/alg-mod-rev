GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:17 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  option MIP=convert;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:17 Page 2
Numerical Puzzle (MARILYN,SEQ=193)
C o m p i l a t i o n


      Place the digits 1 trough 8 in eight circles connected shown below, but
      with one restriction: Any two circles next to each other must have digits
      assigned that are not serial.
       
                         1
                        /| \
                       2-3-4
                       |X|X|
                       5-6-7
                        \|/
                         8
       
       
      Savant, M, Ask Marilyn, 1988. Parade, May 23
       
  20  sets c circles / c1*c8 /
  21   
  22       net(c,c)  / c1.(c2,c3,c4)
  23                   c2.(c3,c5,c6)
  24                   c3.(c4,c5,c6,c7)
  25                   c4.(c6,c7)
  26                   c5.(c6,c8)
  27                   c6.(c7,c8)
  28                   c7.c8               /
  29   
  30  alias(c,cc);
  31   
  32  net(c,cc) = net(c,cc) + net(cc,c);
  33   
  34  integer variable x(c)      digits to be placed in circles
  35  binary  variable ll(c,cc)  less or greater indicator
  36                   y(c,cc)   digit assignment
  37          variable dummy;
  38   
  39  equations less(c,c)     links having smaller neighbors
  40            more(c,cc)    links having larger neighbors
  41            cross(c,cc)   links are one way or the other
  42            digit(c)      assignment of digits to circles
  43            rowsum(c)     assignment condition 1
  44            colsum(c)     assignment condition 2
  45            obj;
  46   
  47  x.lo(c) = 1; x.up(c) = 8;
  48   
  49  *       distance to neighbor at least 2
  50  *
  51  *  neighbor(net(c,cc))..  abs(x(cc)-x(c)) =g= 2;
  52  *
  53  less(net(c,cc))..  x(cc) =l= x(c) - 2 + 9*ll(c,cc);
  54  more(net(c,cc))..  x(cc) =g= x(c) + 2 - 9*ll(cc,c);
  55  cross(net(c,cc)).. ll(c,cc) + ll(cc,c) =e= 1;
  56   
  57  * assign  the values of 1,2,..8 to x
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:17 Page 3
Numerical Puzzle (MARILYN,SEQ=193)
C o m p i l a t i o n


  58  *
  59  *   digit(c).. sum(cc, x(cc)=ord(c)) =e= 1;
  60  *
  61  digit(c).. x(c) =e= sum(cc, ord(cc)*y(c,cc));
  62  rowsum(c).. sum(cc, y(c,cc)) =e= 1;
  63  colsum(c).. sum(cc, y(cc,c)) =e= 1;
  64   
  65  obj.. dummy =e= sum(c, x(c));
  66   
  67  * obj below is very slow on some systems
  68  * obj.. dummy =e= sum(c, ord(c)*x(c));
  69   
  70  model m / all /;
  71   
  72  * use bbpreproc for osl
  73   
  74  solve m us mip min dummy;


COMPILATION TIME     =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:17 Page 4
Numerical Puzzle (MARILYN,SEQ=193)
Equation Listing    SOLVE m Using MIP From line 74


---- less  =L=  links having smaller neighbors

less(c1,c2)..  - x(c1) + x(c2) - 9*ll(c1,c2) =L= -2 ; (LHS = 0, INFES = 2 ****)
     
less(c1,c3)..  - x(c1) + x(c3) - 9*ll(c1,c3) =L= -2 ; (LHS = 0, INFES = 2 ****)
     
less(c1,c4)..  - x(c1) + x(c4) - 9*ll(c1,c4) =L= -2 ; (LHS = 0, INFES = 2 ****)
     
REMAINING 31 ENTRIES SKIPPED


---- more  =G=  links having larger neighbors

more(c1,c2)..  - x(c1) + x(c2) + 9*ll(c2,c1) =G= 2 ; (LHS = 0, INFES = 2 ****)
     
more(c1,c3)..  - x(c1) + x(c3) + 9*ll(c3,c1) =G= 2 ; (LHS = 0, INFES = 2 ****)
     
more(c1,c4)..  - x(c1) + x(c4) + 9*ll(c4,c1) =G= 2 ; (LHS = 0, INFES = 2 ****)
     
REMAINING 31 ENTRIES SKIPPED


---- cross  =E=  links are one way or the other

cross(c1,c2)..  ll(c1,c2) + ll(c2,c1) =E= 1 ; (LHS = 0, INFES = 1 ****)
     
cross(c1,c3)..  ll(c1,c3) + ll(c3,c1) =E= 1 ; (LHS = 0, INFES = 1 ****)
     
cross(c1,c4)..  ll(c1,c4) + ll(c4,c1) =E= 1 ; (LHS = 0, INFES = 1 ****)
     
REMAINING 31 ENTRIES SKIPPED


---- digit  =E=  assignment of digits to circles

digit(c1)..  x(c1) - y(c1,c1) - 2*y(c1,c2) - 3*y(c1,c3) - 4*y(c1,c4) - 5*y(c1,c5) - 6*y(c1,c6) - 7*y(c1,c7) - 8*y(c1,c8) =E= 0 ; (LHS = 1, INFES = 1 ****)
     
digit(c2)..  x(c2) - y(c2,c1) - 2*y(c2,c2) - 3*y(c2,c3) - 4*y(c2,c4) - 5*y(c2,c5) - 6*y(c2,c6) - 7*y(c2,c7) - 8*y(c2,c8) =E= 0 ; (LHS = 1, INFES = 1 ****)
     
digit(c3)..  x(c3) - y(c3,c1) - 2*y(c3,c2) - 3*y(c3,c3) - 4*y(c3,c4) - 5*y(c3,c5) - 6*y(c3,c6) - 7*y(c3,c7) - 8*y(c3,c8) =E= 0 ; (LHS = 1, INFES = 1 ****)
     
REMAINING 5 ENTRIES SKIPPED


---- rowsum  =E=  assignment condition 1

rowsum(c1)..  y(c1,c1) + y(c1,c2) + y(c1,c3) + y(c1,c4) + y(c1,c5) + y(c1,c6) + y(c1,c7) + y(c1,c8) =E= 1 ; (LHS = 0, INFES = 1 ****)
     
rowsum(c2)..  y(c2,c1) + y(c2,c2) + y(c2,c3) + y(c2,c4) + y(c2,c5) + y(c2,c6) + y(c2,c7) + y(c2,c8) =E= 1 ; (LHS = 0, INFES = 1 ****)
     
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:17 Page 5
Numerical Puzzle (MARILYN,SEQ=193)
Equation Listing    SOLVE m Using MIP From line 74


     rowsum  =E=  assignment condition 1

rowsum(c3)..  y(c3,c1) + y(c3,c2) + y(c3,c3) + y(c3,c4) + y(c3,c5) + y(c3,c6) + y(c3,c7) + y(c3,c8) =E= 1 ; (LHS = 0, INFES = 1 ****)
     
REMAINING 5 ENTRIES SKIPPED


---- colsum  =E=  assignment condition 2

colsum(c1)..  y(c1,c1) + y(c2,c1) + y(c3,c1) + y(c4,c1) + y(c5,c1) + y(c6,c1) + y(c7,c1) + y(c8,c1) =E= 1 ; (LHS = 0, INFES = 1 ****)
     
colsum(c2)..  y(c1,c2) + y(c2,c2) + y(c3,c2) + y(c4,c2) + y(c5,c2) + y(c6,c2) + y(c7,c2) + y(c8,c2) =E= 1 ; (LHS = 0, INFES = 1 ****)
     
colsum(c3)..  y(c1,c3) + y(c2,c3) + y(c3,c3) + y(c4,c3) + y(c5,c3) + y(c6,c3) + y(c7,c3) + y(c8,c3) =E= 1 ; (LHS = 0, INFES = 1 ****)
     
REMAINING 5 ENTRIES SKIPPED


---- obj  =E=  

obj..  - x(c1) - x(c2) - x(c3) - x(c4) - x(c5) - x(c6) - x(c7) - x(c8) + dummy =E= 0 ; (LHS = -8, INFES = 8 ****)
     
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:17 Page 6
Numerical Puzzle (MARILYN,SEQ=193)
Column Listing      SOLVE m Using MIP From line 74


---- x  digits to be placed in circles

x(c1)
                (.LO, .L, .UP, .M = 1, 1, 8, 0)
       -1       less(c1,c2)
       -1       less(c1,c3)
       -1       less(c1,c4)
        1       less(c2,c1)
        1       less(c3,c1)
        1       less(c4,c1)
       -1       more(c1,c2)
       -1       more(c1,c3)
       -1       more(c1,c4)
        1       more(c2,c1)
        1       more(c3,c1)
        1       more(c4,c1)
        1       digit(c1)
       -1       obj
        0       (OLD LEVEL ****)

x(c2)
                (.LO, .L, .UP, .M = 1, 1, 8, 0)
        1       less(c1,c2)
       -1       less(c2,c1)
       -1       less(c2,c3)
       -1       less(c2,c5)
       -1       less(c2,c6)
        1       less(c3,c2)
        1       less(c5,c2)
        1       less(c6,c2)
        1       more(c1,c2)
       -1       more(c2,c1)
       -1       more(c2,c3)
       -1       more(c2,c5)
       -1       more(c2,c6)
        1       more(c3,c2)
        1       more(c5,c2)
        1       more(c6,c2)
        1       digit(c2)
       -1       obj
        0       (OLD LEVEL ****)

x(c3)
                (.LO, .L, .UP, .M = 1, 1, 8, 0)
        1       less(c1,c3)
        1       less(c2,c3)
       -1       less(c3,c1)
       -1       less(c3,c2)
       -1       less(c3,c4)
       -1       less(c3,c5)
       -1       less(c3,c6)
       -1       less(c3,c7)
        1       less(c4,c3)
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:17 Page 7
Numerical Puzzle (MARILYN,SEQ=193)
Column Listing      SOLVE m Using MIP From line 74


     x  digits to be placed in circles

        1       less(c5,c3)
        1       less(c6,c3)
        1       less(c7,c3)
        1       more(c1,c3)
        1       more(c2,c3)
       -1       more(c3,c1)
       -1       more(c3,c2)
       -1       more(c3,c4)
       -1       more(c3,c5)
       -1       more(c3,c6)
       -1       more(c3,c7)
        1       more(c4,c3)
        1       more(c5,c3)
        1       more(c6,c3)
        1       more(c7,c3)
        1       digit(c3)
       -1       obj
        0       (OLD LEVEL ****)

REMAINING 5 ENTRIES SKIPPED

---- ll  less or greater indicator

ll(c1,c2)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       -9       less(c1,c2)
        9       more(c2,c1)
        1       cross(c1,c2)
        1       cross(c2,c1)

ll(c1,c3)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       -9       less(c1,c3)
        9       more(c3,c1)
        1       cross(c1,c3)
        1       cross(c3,c1)

ll(c1,c4)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       -9       less(c1,c4)
        9       more(c4,c1)
        1       cross(c1,c4)
        1       cross(c4,c1)

REMAINING 31 ENTRIES SKIPPED

---- y  digit assignment

y(c1,c1)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       -1       digit(c1)
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:17 Page 8
Numerical Puzzle (MARILYN,SEQ=193)
Column Listing      SOLVE m Using MIP From line 74


     y  digit assignment

        1       rowsum(c1)
        1       colsum(c1)

y(c1,c2)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       -2       digit(c1)
        1       rowsum(c1)
        1       colsum(c2)

y(c1,c3)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       -3       digit(c1)
        1       rowsum(c1)
        1       colsum(c3)

REMAINING 61 ENTRIES SKIPPED

---- dummy  

dummy
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       obj

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:17 Page 9
Numerical Puzzle (MARILYN,SEQ=193)
Model Statistics    SOLVE m Using MIP From line 74


MODEL STATISTICS

BLOCKS OF EQUATIONS           7     SINGLE EQUATIONS          127
BLOCKS OF VARIABLES           4     SINGLE VARIABLES          107  8 projected
NON ZERO ELEMENTS           481     DISCRETE VARIABLES        106


GENERATION TIME      =        0.005 SECONDS      4 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.005 SECONDS      4 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:32:17 Page 10
Numerical Puzzle (MARILYN,SEQ=193)
Solution Report     SOLVE m Using MIP From line 74


               S O L V E      S U M M A R Y

     MODEL   m                   OBJECTIVE  dummy
     TYPE    MIP                 DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  74

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/marilyn/convert.opt"
>>  ampl marilyn-scalar.mod
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/marilyn/convert.opt"
Ampl      : marilyn-scalar.mod


No solution returned


EXECUTION TIME       =        0.000 SECONDS      2 MB  24.7.4 r58773 LEX-LEG


USER: Remigijus Paulavicius, Single User License     S170731:0859AO-LNX
      Imperial College London, Dept. of Chemical Engineering    DC13449
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      /home/renigijus/gams/opt-mod-lib/gamslib/marilyn/marilyn.gms
Output     /home/renigijus/gams/opt-mod-lib/gamslib/marilyn/marilyn-scalar.mod.lst
