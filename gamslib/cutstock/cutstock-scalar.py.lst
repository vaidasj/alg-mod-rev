GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:23:27 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  option MIP=convert;
   2  option MIP=convert;
   3  option MIP=convert;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:23:27 Page 2
Cutting Stock - A Column Generation Approach (CUTSTOCK,SEQ=294)
C o m p i l a t i o n


   5   
       The task is to cut out some paper products of different sizes from a
       large raw paper roll, in order to meet a customer's order. The objective
       is to minimize the required number of paper rolls.
       
       
      P. C. Gilmore and R. E. Gomory, A linear programming approach to the
      cutting stock problem, Part I, Operations Research 9 (1961), 849-859.
       
      P. C. Gilmore and R. E. Gomory, A linear programming approach to the
      cutting stock problem, Part II, Operations Research 11 (1963), 863-888.
  18   
  19  Set  i    widths    /w1*w4/
  20  Parameter
  21       r    raw width /100/
  22       w(i) width     /w1  45
  23                       w2  36
  24                       w3  31
  25                       w4  14/
  26       d(i) demand    /w1  97
  27                       w2 610
  28                       w3 395
  29                       w4 211/
  30   
  31  * Gilmore-Gomory column generation algorithm
  32   
  33  Set  p        possible patterns  /p1*p1000/
  34       pp(p)    dynamic subset of p
  35  Parameter
  36       aip(i,p) number of width i in pattern growing in p;
  37   
  38   
  39  * Master model
  40  Variable xp(p)     patterns used
  41           z         objective variable
  42  Integer variable xp; xp.up(p) = sum(i, d(i));
  43   
  44  Equation numpat    number of patterns used
  45           demand(i) meet demand;
  46   
  47  numpat..     z =e= sum(pp, xp(pp));
  48  demand(i)..  sum(pp, aip(i,pp)*xp(pp)) =g= d(i);
  49   
  50  model master /numpat, demand/;
  51   
  52  * Pricing problem - Knapsack model
  53  Variable  y(i) new pattern;
  54  Integer variable y; y.up(i) = ceil(r/w(i));
  55   
  56  Equation defobj
  57           knapsack knapsack constraint;
  58   
  59  defobj..     z =e= 1 - sum(i, demand.m(i)*y(i));
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:23:27 Page 3
Cutting Stock - A Column Generation Approach (CUTSTOCK,SEQ=294)
C o m p i l a t i o n


  60  knapsack..   sum(i, w(i)*y(i)) =l= r;
  61   
  62  model pricing /defobj, knapsack/;
  63   
  64  * Initialization - the initial patterns have a single width
  65  pp(p) = ord(p)<=card(i);
  66  aip(i,pp(p))$(ord(i)=ord(p)) = floor(r/w(i));
  67  *display aip;
  68   
  69  Scalar done  loop indicator /0/
  70  Set    pi(p) set of the last pattern; pi(p) = ord(p)=card(pp)+1;
  71   
  72  option optcr=0,limrow=0,limcol=0,solprint=off;
  73   
  74  While(not done and card(pp)<card(p),
  75     solve master using rmip minimizing z;
  76     solve pricing using mip minimizing z;
  77   
  78  * pattern that might improve the master model found?
  79     if(z.l < -0.001,
  80        aip(i,pi) = round(y.l(i));
  81        pp(pi) = yes; pi(p) = pi(p-1);
  82     else
  83        done = 1;
  84     );
  85  );
  86  display 'lower bound for number of rolls', master.objval;
  87   
  88  option solprint=on;
  89  solve master using mip minimizing z;
  90   
  91  Parameter patrep Solution pattern report
  92            demrep Solution demand supply report;
  93   
  94  patrep('# produced',p) = round(xp.l(p));
  95  patrep(i,p)$patrep('# produced',p) = aip(i,p);
  96  patrep(i,'total') = sum(p, patrep(i,p));
  97  patrep('# produced','total') = sum(p, patrep('# produced',p));
  98   
  99  demrep(i,'produced') = sum(p,patrep(i,p)*patrep('# produced',p));
 100  demrep(i,'demand') = d(i);
 101  demrep(i,'over') = demrep(i,'produced') - demrep(i,'demand');
 102   
 103  display patrep, demrep;


COMPILATION TIME     =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:23:27 Page 4
Cutting Stock - A Column Generation Approach (CUTSTOCK,SEQ=294)
Model Statistics    SOLVE master Using RMIP From line 75


LOOPS                            FOR/WHILE   1


MODEL STATISTICS

BLOCKS OF EQUATIONS           2     SINGLE EQUATIONS            5
BLOCKS OF VARIABLES           2     SINGLE VARIABLES            5
NON ZERO ELEMENTS             9     DISCRETE VARIABLES          4


GENERATION TIME      =        0.002 SECONDS      4 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.003 SECONDS      4 MB  24.7.4 r58773 LEX-LEG
               L O O P S          FOR/WHILE 1

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:23:27 Page 5
Cutting Stock - A Column Generation Approach (CUTSTOCK,SEQ=294)
Solution Report     SOLVE master Using RMIP From line 75


               S O L V E      S U M M A R Y

     MODEL   master              OBJECTIVE  z
     TYPE    RMIP                DIRECTION  MINIMIZE
     SOLVER  CPLEX               FROM LINE  75

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      1 Optimal                   
**** OBJECTIVE VALUE              515.3095

 RESOURCE USAGE, LIMIT          0.002      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

IBM ILOG CPLEX   24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      
Cplex 12.6.3.0

*** Error Cannot open parameter file "/home/renigijus/gams/opt-mod-lib/gamslib/cutstock/cplex.opt"
*** Error Error code = 2; No such file or directory
Space for names approximately 0.00 Mb
Use option 'names no' to turn use of names off
LP status(1): optimal
Cplex Time: 0.00sec (det. 0.00 ticks)
Optimal solution found.
Objective :         515.309524



**** REPORT SUMMARY :        0     NONOPT
                             0 INFEASIBLE
                             0  UNBOUNDED
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:23:27 Page 6
Cutting Stock - A Column Generation Approach (CUTSTOCK,SEQ=294)
Model Statistics    SOLVE pricing Using MIP From line 76


LOOPS                            FOR/WHILE   1


MODEL STATISTICS

BLOCKS OF EQUATIONS           2     SINGLE EQUATIONS            2
BLOCKS OF VARIABLES           2     SINGLE VARIABLES            5
NON ZERO ELEMENTS             9     DISCRETE VARIABLES          4


GENERATION TIME      =        0.018 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.018 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
               L O O P S          FOR/WHILE 1

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:23:27 Page 7
Cutting Stock - A Column Generation Approach (CUTSTOCK,SEQ=294)
Solution Report     SOLVE pricing Using MIP From line 76


               S O L V E      S U M M A R Y

     MODEL   pricing             OBJECTIVE  z
     TYPE    MIP                 DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  76

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/cutstock/convert.opt"
>>  pyomo cutstock-scalar.py
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/cutstock/convert.opt"
Pyomo     : cutstock-scalar.py


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:23:27 Page 8
Cutting Stock - A Column Generation Approach (CUTSTOCK,SEQ=294)
E x e c u t i o n


----     86 lower bound for number of rolls
            MODEL master.ObjVal            =      515.310  
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:23:27 Page 9
Cutting Stock - A Column Generation Approach (CUTSTOCK,SEQ=294)
Model Statistics    SOLVE master Using MIP From line 89


MODEL STATISTICS

BLOCKS OF EQUATIONS           2     SINGLE EQUATIONS            5
BLOCKS OF VARIABLES           2     SINGLE VARIABLES            5
NON ZERO ELEMENTS             9     DISCRETE VARIABLES          4


GENERATION TIME      =        0.039 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.039 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 11:23:27 Page 10
Cutting Stock - A Column Generation Approach (CUTSTOCK,SEQ=294)
Solution Report     SOLVE master Using MIP From line 89


               S O L V E      S U M M A R Y

     MODEL   master              OBJECTIVE  z
     TYPE    MIP                 DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  89

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/cutstock/convert.opt"
>>  pyomo cutstock-scalar.py
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/cutstock/convert.opt"
Pyomo     : cutstock-scalar.py


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 11:23:27 Page 11
Cutting Stock - A Column Generation Approach (CUTSTOCK,SEQ=294)
E x e c u t i o n


----    103 PARAMETER patrep  Solution pattern report

                    p1          p2          p3          p4       total

w1               2.000                                           2.000
w2                           2.000                               2.000
w3                                       3.000                   3.000
w4                                                   7.000       7.000
# produced      49.000     305.000     132.000      30.000     516.000


----    103 PARAMETER demrep  Solution demand supply report

      produced      demand        over

w1      98.000      97.000       1.000
w2     610.000     610.000
w3     396.000     395.000       1.000
w4     210.000     211.000      -1.000



EXECUTION TIME       =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


USER: Remigijus Paulavicius, Single User License     S170731:0859AO-LNX
      Imperial College London, Dept. of Chemical Engineering    DC13449
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      /home/renigijus/gams/opt-mod-lib/gamslib/cutstock/cutstock.gms
Output     /home/renigijus/gams/opt-mod-lib/gamslib/cutstock/cutstock-scalar.py.lst
