GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:31 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  option RMIQCP=convert;
   2  option RMIQCP=convert;
   3  option RMIQCP=convert;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:31 Page 2
SDP Convexifications of the Generalized Quadratic Assignment Problem (GQAPSDP,SEQ=339)
C o m p i l a t i o n


   5   
      This model solves the Generalized Quadratic Assignment Problem
      (GQAP) using different convexification methods. The GQAP describes
      a broad class of quadratic integer programming problems, wherein
      I pair-wise related equipments are assigned to N locations constrained
      by the locations' ability to accommodate them.
       
      Cplex has a build-in convexification method for MIQPs when the
      quadratic terms involve binary variables only. The other methods
      require the solution of a semidefinite program.  The communication
      with the SDP solver is done through ASCII files.
       
       
      Plateau M.C., Reformulations quadratiques convexes pour la
      programmation quadratique en variables 0-1. PhD thesis, 
      Conservatoire National des Arts et Metiers, CEDRIC, 2006.
       
      Guignard, M., Extension to Plateau Convexification Method for
      Nonconvex Quadratic 0-1 Programs. Tech. rep., The Wharton School, 2008.
  26   
  27  Set i  equipments
  28      j  locations
  29  Alias (i,ip), (j,jp);
  30   
  31  Parameter
  32      install(i,j)  installation cost
  33      flow(i,ip)    volume of exchange
  34      unit          flow units
  35      dist(j,jp)    distance
  36      a(i)          size
  37      b(j)          capacity
  38   
INCLUDE    /home/renigijus/gams/opt-mod-lib/gamslib/gqapsdp/pb16x7.inc
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:31 Page 3
Instance LEE-MA 16X7 for the Generialized Quadratic Assignment Problem
C o m p i l a t i o n


  42   
  43  Sets   i equipments  /i1*i16/
  44         j locations   /j1*j7 /;
  45   
  46  Scalar unit /5/
  47   
  48  Table  install(i,j)
  49              j1      j2      j3      j4      j5      j6      j7
  50  i1       20000   23000   75000   60000   35000   50000   65000
  51  i2       35000  131500   37000   19000   76000   46700  157500
  52  i3       65000   39500   59500   29870   45600   42000  120500
  53  i4       35000   37500   51500   30000   70000   59000   66000
  54  i5       29500   85000   34500   44500   50000   74000  145000
  55  i6       35000   57500   29500   65000  110000   53200   39500
  56  i7      115000   35000   37500   55000   47000   28900   89000
  57  i8      124500   59500   38500   12000   50000   55000   25700
  58  i9      125000   34500   13500   78900   23100   43600   62000
  59  i10      74500   39500  128500   35000   60000   69000   50000
  60  i11      50500  150000   59000   39000   73000   63400  127000
  61  i12      58000   25500   70000   34200   45000  147600   40900
  62  i13      15000  135000   37500   45000  120000   39000   52500
  63  i14      67500   39500   58500   92000  152000   49000   60000
  64  i15      84500   28500   32500   65000  150000  139000   35000
  65  i16     123900   88500   55000   60500   59500   82900   38600
  66  ;
  67   
  68  Table  flow(i,i)
  69       i1  i2  i3  i4  i5  i6  i7  i8  i9 i10 i11 i12 i13 i14 i15 i16
  70  i1           20              80          90     180  80     100
  71  i2               50      40  58             100         100     100
  72  i3   60          30      75     150  60          50      50      50
  73  i4           60      50  60                  55          50  80
  74  i5           70         100  50  58              65      50      50
  75  i6           60  30          50 125      60  40      40
  76  i7   50      80          30      25  30              40          40
  77  i8          110      90      50      45  60      50     150 100
  78  i9      150     110              75      70              50
  79  i10          40      60 120  50     195         100              50
  80  i11  60                          65  70          80
  81  i12  70      60             250              65          50
  82  i13     100  30     110         150      50                      80
  83  i14         100             100  75      70          40     100
  84  i15 100          80             100                     100
  85  i16     100  50      50      40          50          80;
  86   
  87  Table  dist(j,j)
  88      j1  j2  j3  j4  j5  j6  j7
  89  j1     100 150 100  50  80  90
  90  j2 100      80  60  50 100  70
  91  j3 150  80      70 120  70 100
  92  j4 100  60  70      60 100  80
  93  j5  50  50 120  60      80 100
  94  j6  80 100  70 100  80      70
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:31 Page 4
Instance LEE-MA 16X7 for the Generialized Quadratic Assignment Problem
C o m p i l a t i o n


  95  j7  90  70 100  80 100  70;
  96   
  97  Parameter  a(i) /
  98    i1   70, i2  145, i3  125, i4   65, i5  120, i6   85, i7   40, i8   75
  99    i9   60, i10  40, i11 105, i12  50, i13  60, i14  85, i15  50, i16 130 /;
 100   
 101  Parameter  b(j) /j1 120, j2 270, j3 400, j4 180, j5 90, j6 115, j7 160 /;
 102   
 103  Scalar bestobj The Optimal objective value  / 2809870.0 /;
 104   
 105  Set xsol(i,j) best solution /
 106   i1 .j2, i2 .j3, i3 .j4, i4 .j2, i5 .j1, i6 .j7, i7 .j5, i8 .j7
 107   i9 .j3, i10.j4, i11.j6, i12.j5, i13.j3, i14.j2, i15.j2, i16.j3 /;
 108   
 109   
 110  * Convexification options: cplex, u, uv, au, uav
 113   
 118   
 123   
 128   
 129  Sets n      SDP variables       / #j,z,x1*x112 /
 130       nx(n)  original x          /      x1*x112 /
 131       nj(n)  slack for capacity  / #j              /
 132       m      sdp constraints     / #n,#i     /
 133       mIx(m) identity x          / #nx /
 134       mA(m)  assignment          / #i  /
 135       mC(m)  capacity            / #j  /
 137       xmap(*,*,j) x ij map       / #nx:(#i.#j) /
 138       upper(n,n) diag and upper triangle
 139       lower(n,n) lower triangle;
 140   
 141  Alias (n,np,npp), (nx,nxp);
 142  upper(n,np) = ord(n) <= ord(np);
 143  lower(n,np) = ord(n)  > ord(np);
 144   
 145  Parameters F(m,n,np)   SDP constraint data
 146             F0(n,np)    SDP obj
 147             c(m)        SDP RHS data
 148             qq(n,np)    Q matrix
 149             mLE(m)      SDP constraints with =l=;
 150   
 151  qq(nx,nxp) = sum((i,j,ip,jp)$(xmap(nx,i,j)*xmap(nxp,ip,jp)), unit*flow(i,ip)*dist(j,jp));
 152  qq(nx,nxp) = (qq(nx,nxp) + qq(nxp,nx))/2;
 153   
 154  * Objective
 155  F0('z',nx)        = -sum(xmap(nx,i,j), install(i,j))/2;
 156  F0(upper(nx,nxp)) = -qq(nx,nxp);
 157   
 158  * Identity for x
 159  F(mIx,nx,nx)$sameas(mIx,nx)  =  2;
 160  F(mIx,'z',nx)$sameas(mIx,nx) = -1;
 161   
 162  * Assignment
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:31 Page 5
Instance LEE-MA 16X7 for the Generialized Quadratic Assignment Problem
C o m p i l a t i o n


 163  F(mA,'z',nx) = sum(xmap(nx,i,j)$sameas(mA,i), 1);
 164  c(mA)        = 2;
 165   
 166  * Capacity =l= constraint
 167  F(mC,'z',nx)               = sum(xmap(nx,i,j)$sameas(mC,j), a(i));
 168  F(mC,nj,nj)$sameas(mC,nj)  = 1;
 169  c(mC)                      = 2*sum(j$sameas(mC,j), b(j));
 170  mLE(mC)                    = yes;
 171   
 173   
 175   
 176  * z=1
 177  F('z','z','z')       = 1;
 178  c('z')               = 1;
 179   
 180  Parameter
 181      xvec(m)       SDP solution
 182      u(i,j)        dual of X_ijij = xij
 183      alpha(ip,i,j) dual of assignment constraints
 184      v             dual of |Ax-b|;
 185   
 188  execute_unload 'csdpin.gdx' n, m, mLE, c, F, F0;
 189  execute 'gams runcsdp.inc lo=2 --strict=1';
 190  abort$errorlevel 'Problems running RunCSDP. Check listing file for details.'
 192  execute_load 'csdpout.gdx', xvec;
 193   
 194  u(i,j)        = sum(xmap(mIx,i,j), xvec(mIx));
 197   
 199  Variables
 200      x(i,j)        equipment i is assigned to location j
 201      z             total costs;
 202  Binary variables x;
 203   
 204  Equations
 205      defcost       objective function
 206      assign(i)     assign each equipment to a location
 207      capacity(j)   location capacity in assigning equipment;
 208   
 209  defcost.. z =e=   sum((i,j,ip,jp), x(i,j)*(unit*flow(i,ip)*dist(j,jp))*x(ip,jp))
 210                  + sum((i,j), install(i,j)*x(i,j))
 211  + sum((i,j), 2*(u(i,j)*1.01)*(sqr(x(i,j))-x(i,j)))
 214  ;
 215   
 216  assign(i)..    sum(j, x(i,j)) =e= 1;
 217   
 218  capacity(j)..  sum(i, a(i)*x(i,j)) =l= b(j);
 219   
 220  model gqap / all /;
 221   
 222  if(card(i)*card(j)>20, option limrow=0,limcol=0);
 223  solve gqap using rmiqcp min z;
 224   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:31 Page 6
Instance LEE-MA 16X7 for the Generialized Quadratic Assignment Problem
Include File Summary


   SEQ   GLOBAL TYPE      PARENT   LOCAL  FILENAME

     1        1 INPUT          0       0  /home/renigijus/gams/opt-mod-lib/gamslib/gqapsdp/gqapsdp.gms
     2       40 INCLUDE        1      40  ./home/renigijus/gams/opt-mod-lib/gamslib/gqapsdp/pb16x7.inc


COMPILATION TIME     =        0.003 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:31 Page 7
Instance LEE-MA 16X7 for the Generialized Quadratic Assignment Problem
Model Statistics    SOLVE gqap Using RMIQCP From line 223


MODEL STATISTICS

BLOCKS OF EQUATIONS           3     SINGLE EQUATIONS           24
BLOCKS OF VARIABLES           2     SINGLE VARIABLES          113
NON ZERO ELEMENTS           337     NON LINEAR N-Z            112
DERIVATIVE POOL              20     CONSTANT POOL             290
CODE LENGTH              17,139     DISCRETE VARIABLES        112


GENERATION TIME      =        0.009 SECONDS      5 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.257 SECONDS      5 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:31 Page 8
Instance LEE-MA 16X7 for the Generialized Quadratic Assignment Problem
Solution Report     SOLVE gqap Using RMIQCP From line 223


               S O L V E      S U M M A R Y

     MODEL   gqap                OBJECTIVE  z
     TYPE    RMIQCP              DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  223

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000
 EVALUATION ERRORS              0             0

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/gqapsdp/convert.opt"
>>  pyomo gqapsdp-scalar.py
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/gqapsdp/convert.opt"
Pyomo     : gqapsdp-scalar.py


No solution returned


EXECUTION TIME       =        0.000 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


USER: Remigijus Paulavicius, Single User License     S170731:0859AO-LNX
      Imperial College London, Dept. of Chemical Engineering    DC13449
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      /home/renigijus/gams/opt-mod-lib/gamslib/gqapsdp/gqapsdp.gms
Output     /home/renigijus/gams/opt-mod-lib/gamslib/gqapsdp/gqapsdp-scalar.py.lst
