GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:31 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  option RMIQCP=convert;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:31 Page 2
SDP Convexifications of the Generalized Quadratic Assignment Problem (GQAPSDP,SEQ=339)
C o m p i l a t i o n


   3   
      This model solves the Generalized Quadratic Assignment Problem
      (GQAP) using different convexification methods. The GQAP describes
      a broad class of quadratic integer programming problems, wherein
      I pair-wise related equipments are assigned to N locations constrained
      by the locations' ability to accommodate them.
       
      Cplex has a build-in convexification method for MIQPs when the
      quadratic terms involve binary variables only. The other methods
      require the solution of a semidefinite program.  The communication
      with the SDP solver is done through ASCII files.
       
       
      Plateau M.C., Reformulations quadratiques convexes pour la
      programmation quadratique en variables 0-1. PhD thesis, 
      Conservatoire National des Arts et Metiers, CEDRIC, 2006.
       
      Guignard, M., Extension to Plateau Convexification Method for
      Nonconvex Quadratic 0-1 Programs. Tech. rep., The Wharton School, 2008.
  24   
  25  Set i  equipments
  26      j  locations
  27  Alias (i,ip), (j,jp);
  28   
  29  Parameter
  30      install(i,j)  installation cost
  31      flow(i,ip)    volume of exchange
  32      unit          flow units
  33      dist(j,jp)    distance
  34      a(i)          size
  35      b(j)          capacity
  36   
INCLUDE    /home/renigijus/gams/opt-mod-lib/gamslib/gqapsdp/pb16x7.inc
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:31 Page 3
Instance LEE-MA 16X7 for the Generialized Quadratic Assignment Problem
C o m p i l a t i o n


  40   
  41  Sets   i equipments  /i1*i16/
  42         j locations   /j1*j7 /;
  43   
  44  Scalar unit /5/
  45   
  46  Table  install(i,j)
  47              j1      j2      j3      j4      j5      j6      j7
  48  i1       20000   23000   75000   60000   35000   50000   65000
  49  i2       35000  131500   37000   19000   76000   46700  157500
  50  i3       65000   39500   59500   29870   45600   42000  120500
  51  i4       35000   37500   51500   30000   70000   59000   66000
  52  i5       29500   85000   34500   44500   50000   74000  145000
  53  i6       35000   57500   29500   65000  110000   53200   39500
  54  i7      115000   35000   37500   55000   47000   28900   89000
  55  i8      124500   59500   38500   12000   50000   55000   25700
  56  i9      125000   34500   13500   78900   23100   43600   62000
  57  i10      74500   39500  128500   35000   60000   69000   50000
  58  i11      50500  150000   59000   39000   73000   63400  127000
  59  i12      58000   25500   70000   34200   45000  147600   40900
  60  i13      15000  135000   37500   45000  120000   39000   52500
  61  i14      67500   39500   58500   92000  152000   49000   60000
  62  i15      84500   28500   32500   65000  150000  139000   35000
  63  i16     123900   88500   55000   60500   59500   82900   38600
  64  ;
  65   
  66  Table  flow(i,i)
  67       i1  i2  i3  i4  i5  i6  i7  i8  i9 i10 i11 i12 i13 i14 i15 i16
  68  i1           20              80          90     180  80     100
  69  i2               50      40  58             100         100     100
  70  i3   60          30      75     150  60          50      50      50
  71  i4           60      50  60                  55          50  80
  72  i5           70         100  50  58              65      50      50
  73  i6           60  30          50 125      60  40      40
  74  i7   50      80          30      25  30              40          40
  75  i8          110      90      50      45  60      50     150 100
  76  i9      150     110              75      70              50
  77  i10          40      60 120  50     195         100              50
  78  i11  60                          65  70          80
  79  i12  70      60             250              65          50
  80  i13     100  30     110         150      50                      80
  81  i14         100             100  75      70          40     100
  82  i15 100          80             100                     100
  83  i16     100  50      50      40          50          80;
  84   
  85  Table  dist(j,j)
  86      j1  j2  j3  j4  j5  j6  j7
  87  j1     100 150 100  50  80  90
  88  j2 100      80  60  50 100  70
  89  j3 150  80      70 120  70 100
  90  j4 100  60  70      60 100  80
  91  j5  50  50 120  60      80 100
  92  j6  80 100  70 100  80      70
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:31 Page 4
Instance LEE-MA 16X7 for the Generialized Quadratic Assignment Problem
C o m p i l a t i o n


  93  j7  90  70 100  80 100  70;
  94   
  95  Parameter  a(i) /
  96    i1   70, i2  145, i3  125, i4   65, i5  120, i6   85, i7   40, i8   75
  97    i9   60, i10  40, i11 105, i12  50, i13  60, i14  85, i15  50, i16 130 /;
  98   
  99  Parameter  b(j) /j1 120, j2 270, j3 400, j4 180, j5 90, j6 115, j7 160 /;
 100   
 101  Scalar bestobj The Optimal objective value  / 2809870.0 /;
 102   
 103  Set xsol(i,j) best solution /
 104   i1 .j2, i2 .j3, i3 .j4, i4 .j2, i5 .j1, i6 .j7, i7 .j5, i8 .j7
 105   i9 .j3, i10.j4, i11.j6, i12.j5, i13.j3, i14.j2, i15.j2, i16.j3 /;
 106   
 107   
 108  * Convexification options: cplex, u, uv, au, uav
 111   
 116   
 121   
 126   
 127  Sets n      SDP variables       / #j,z,x1*x112 /
 128       nx(n)  original x          /      x1*x112 /
 129       nj(n)  slack for capacity  / #j              /
 130       m      sdp constraints     / #n,#i     /
 131       mIx(m) identity x          / #nx /
 132       mA(m)  assignment          / #i  /
 133       mC(m)  capacity            / #j  /
 135       xmap(*,*,j) x ij map       / #nx:(#i.#j) /
 136       upper(n,n) diag and upper triangle
 137       lower(n,n) lower triangle;
 138   
 139  Alias (n,np,npp), (nx,nxp);
 140  upper(n,np) = ord(n) <= ord(np);
 141  lower(n,np) = ord(n)  > ord(np);
 142   
 143  Parameters F(m,n,np)   SDP constraint data
 144             F0(n,np)    SDP obj
 145             c(m)        SDP RHS data
 146             qq(n,np)    Q matrix
 147             mLE(m)      SDP constraints with =l=;
 148   
 149  qq(nx,nxp) = sum((i,j,ip,jp)$(xmap(nx,i,j)*xmap(nxp,ip,jp)), unit*flow(i,ip)*dist(j,jp));
 150  qq(nx,nxp) = (qq(nx,nxp) + qq(nxp,nx))/2;
 151   
 152  * Objective
 153  F0('z',nx)        = -sum(xmap(nx,i,j), install(i,j))/2;
 154  F0(upper(nx,nxp)) = -qq(nx,nxp);
 155   
 156  * Identity for x
 157  F(mIx,nx,nx)$sameas(mIx,nx)  =  2;
 158  F(mIx,'z',nx)$sameas(mIx,nx) = -1;
 159   
 160  * Assignment
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:31 Page 5
Instance LEE-MA 16X7 for the Generialized Quadratic Assignment Problem
C o m p i l a t i o n


 161  F(mA,'z',nx) = sum(xmap(nx,i,j)$sameas(mA,i), 1);
 162  c(mA)        = 2;
 163   
 164  * Capacity =l= constraint
 165  F(mC,'z',nx)               = sum(xmap(nx,i,j)$sameas(mC,j), a(i));
 166  F(mC,nj,nj)$sameas(mC,nj)  = 1;
 167  c(mC)                      = 2*sum(j$sameas(mC,j), b(j));
 168  mLE(mC)                    = yes;
 169   
 171   
 173   
 174  * z=1
 175  F('z','z','z')       = 1;
 176  c('z')               = 1;
 177   
 178  Parameter
 179      xvec(m)       SDP solution
 180      u(i,j)        dual of X_ijij = xij
 181      alpha(ip,i,j) dual of assignment constraints
 182      v             dual of |Ax-b|;
 183   
 186  execute_unload 'csdpin.gdx' n, m, mLE, c, F, F0;
 187  execute 'gams runcsdp.inc lo=2 --strict=1';
 188  abort$errorlevel 'Problems running RunCSDP. Check listing file for details.'
 190  execute_load 'csdpout.gdx', xvec;
 191   
 192  u(i,j)        = sum(xmap(mIx,i,j), xvec(mIx));
 195   
 197  Variables
 198      x(i,j)        equipment i is assigned to location j
 199      z             total costs;
 200  Binary variables x;
 201   
 202  Equations
 203      defcost       objective function
 204      assign(i)     assign each equipment to a location
 205      capacity(j)   location capacity in assigning equipment;
 206   
 207  defcost.. z =e=   sum((i,j,ip,jp), x(i,j)*(unit*flow(i,ip)*dist(j,jp))*x(ip,jp))
 208                  + sum((i,j), install(i,j)*x(i,j))
 209  + sum((i,j), 2*(u(i,j)*1.01)*(sqr(x(i,j))-x(i,j)))
 212  ;
 213   
 214  assign(i)..    sum(j, x(i,j)) =e= 1;
 215   
 216  capacity(j)..  sum(i, a(i)*x(i,j)) =l= b(j);
 217   
 218  model gqap / all /;
 219   
 220  if(card(i)*card(j)>20, option limrow=0,limcol=0);
 221  solve gqap using rmiqcp min z;
 222   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:31 Page 6
Instance LEE-MA 16X7 for the Generialized Quadratic Assignment Problem
Include File Summary


   SEQ   GLOBAL TYPE      PARENT   LOCAL  FILENAME

     1        1 INPUT          0       0  /home/renigijus/gams/opt-mod-lib/gamslib/gqapsdp/gqapsdp.gms
     2       38 INCLUDE        1      38  ./home/renigijus/gams/opt-mod-lib/gamslib/gqapsdp/pb16x7.inc


COMPILATION TIME     =        0.002 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:31 Page 7
Instance LEE-MA 16X7 for the Generialized Quadratic Assignment Problem
Model Statistics    SOLVE gqap Using RMIQCP From line 221


MODEL STATISTICS

BLOCKS OF EQUATIONS           3     SINGLE EQUATIONS           24
BLOCKS OF VARIABLES           2     SINGLE VARIABLES          113
NON ZERO ELEMENTS           337     NON LINEAR N-Z            112
DERIVATIVE POOL              20     CONSTANT POOL             290
CODE LENGTH              17,139     DISCRETE VARIABLES        112


GENERATION TIME      =        0.009 SECONDS      5 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.278 SECONDS      5 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 11:30:31 Page 8
Instance LEE-MA 16X7 for the Generialized Quadratic Assignment Problem
Solution Report     SOLVE gqap Using RMIQCP From line 221


               S O L V E      S U M M A R Y

     MODEL   gqap                OBJECTIVE  z
     TYPE    RMIQCP              DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  221

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000
 EVALUATION ERRORS              0             0

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/gqapsdp/convert.opt"
>>  ampl gqapsdp-scalar.mod
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/gqapsdp/convert.opt"
Ampl      : gqapsdp-scalar.mod


No solution returned


EXECUTION TIME       =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


USER: Remigijus Paulavicius, Single User License     S170731:0859AO-LNX
      Imperial College London, Dept. of Chemical Engineering    DC13449
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      /home/renigijus/gams/opt-mod-lib/gamslib/gqapsdp/gqapsdp.gms
Output     /home/renigijus/gams/opt-mod-lib/gamslib/gqapsdp/gqapsdp-scalar.mod.lst
