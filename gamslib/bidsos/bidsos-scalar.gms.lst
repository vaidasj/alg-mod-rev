GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:51 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  option MIP=convert;
   2  option MIP=convert;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:51 Page 2
Bid Evaluation with SOS2 Sets  (BIDSOS,SEQ=163)
C o m p i l a t i o n


        A company obtains a number of bids from vendors for the supply
        of a specified number of units of an item. Most of the submitted
        bids have prices that depend on the volume of business. A formulation
        with 0/1 variables is shown in the original gamslib model BID. Here
        we use SOS2 sets (at most two variables can be basic but have to be
        adjacent. SOS2 variables are a convenient way to interpolate non-
        convex but separable functions.
       
       
      Bracken, J, and McCormick, G P, Chapter 3. In Selected Applications
      of Nonlinear Programming. John Wiley and Sons, New York, 1968,
      pp. 28-36.
       
  19   
  20  sets  v       vendors       / a, b, c, d, e /
  21        s       segments      / nodeal, 0*5 /
  22        vs(v,s) vendor bit possibilities
  23        cl      column labels / setup, price, q-min, q-max ,cost /
  24   
  25  scalar req requirements / 239600.48 / ;
  26   
  27    table bid(v,s,cl)  bid data
  28   
  29                 setup      price     q-min    q-max
  30  a.1          3855.84     61.150              33000
  31  b.1        125804.84     68.099     22000    70000
  32  b.2                      66.049     70000   100000
  33  b.3                      64.099    100000   150000
  34  b.4                      62.119    150000   160000
  35  c.1         13456.00     62.190             165600
  36  d.1          6583.98     72.488              12000
  37  e.1                      70.150              42000
  38  e.2                      68.150     42000    77000;
  39   
  40   
  41  *  get minimum domains ripple total cost up the segments
  42  *  cost will contain the total segment cost
  43   
  44  bid(v,'0','cost') = bid(v,'1','setup') + bid(v,'1','q-min')*bid(v,'1','price');
  45  loop((v,s)$bid(v,s,'q-max'),
  46     bid(v,s,'cost') = bid(v,s-1,'cost')
  47                     + (bid(v,s,'q-max')-bid(v,s,'q-min'))*bid(v,s,'price'));
  48  display bid;
  49   
  50  vs(v,s)          = bid(v,s,'q-max');
  51  vs(v,'nodeal')   = yes;
  52  vs(v,'0')        = yes;
  53   
  54   
  55       variable   c        total cost
  56  sos2 variables  pl(v,s)  purchase level       (sos2 type variable)
  57   
  58   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:51 Page 3
Bid Evaluation with SOS2 Sets  (BIDSOS,SEQ=163)
C o m p i l a t i o n


  59  equations  demand     demand constraint
  60             costdef    cost definition
  61             convex     convexity definition for segments;
  62   
  63  demand..   req =e= sum(vs, bid(vs,'q-max')*pl(vs));
  64   
  65  costdef..  c   =e= sum(vs, bid(vs,'cost') *pl(vs));
  66   
  67  convex(v).. sum(vs(v,s), pl(vs)) =e= 1;
  68   
  69  model bideval / all /;
  70   
  71  option optcr=0.0; solve bideval minimizing c using mip;
  72   
  73  parameter rep purchase report;
  74  rep(v) = sum(vs(v,s), bid(vs,'q-max')*pl.l(vs)); display rep;
  75   


COMPILATION TIME     =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:51 Page 4
Bid Evaluation with SOS2 Sets  (BIDSOS,SEQ=163)
E x e c u t i o n


----     48 PARAMETER bid  bid data

          setup       price       q-min       q-max        cost

a.0                                                    3855.840
a.1    3855.840      61.150               33000.000 2021805.840
b.0                                                 1623982.840
b.1  125804.840      68.099   22000.000   70000.000 4892734.840
b.2                  66.049   70000.000  100000.000 6874204.840
b.3                  64.099  100000.000  150000.000 1.007915E+7
b.4                  62.119  150000.000  160000.000 1.070034E+7
c.0                                                   13456.000
c.1   13456.000      62.190              165600.000 1.031212E+7
d.0                                                    6583.980
d.1    6583.980      72.488               12000.000  876439.980
e.1                  70.150               42000.000 2946300.000
e.2                  68.150   42000.000   77000.000 5331550.000

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:51 Page 5
Bid Evaluation with SOS2 Sets  (BIDSOS,SEQ=163)
Equation Listing    SOLVE bideval Using MIP From line 71


---- demand  =E=  demand constraint

demand..  - 33000*pl(a,1) - 70000*pl(b,1) - 100000*pl(b,2) - 150000*pl(b,3) - 160000*pl(b,4) - 165600*pl(c,1) - 12000*pl(d,1) - 42000*pl(e,1) - 77000*pl(e,2) =E= -239600.48 ; (LHS = 0, INFES = 239600.48 ****)
     

---- costdef  =E=  cost definition

costdef..  c - 3855.84*pl(a,0) - 2021805.84*pl(a,1) - 1623982.84*pl(b,0) - 4892734.84*pl(b,1) - 6874204.84*pl(b,2) - 10079154.84*pl(b,3) - 10700344.84*pl(b,4) - 13456*pl(c,0) - 10312120*pl(c,1) - 6583.98*pl(d,0) - 876439.98*pl(d,1) - 2946300*pl(e,1)
     
      - 5331550*pl(e,2) =E= 0 ; (LHS = 0)
     

---- convex  =E=  convexity definition for segments

convex(a)..  pl(a,nodeal) + pl(a,0) + pl(a,1) =E= 1 ; (LHS = 0, INFES = 1 ****)
     
convex(b)..  pl(b,nodeal) + pl(b,0) + pl(b,1) + pl(b,2) + pl(b,3) + pl(b,4) =E= 1 ; (LHS = 0, INFES = 1 ****)
     
convex(c)..  pl(c,nodeal) + pl(c,0) + pl(c,1) =E= 1 ; (LHS = 0, INFES = 1 ****)
     
REMAINING 2 ENTRIES SKIPPED

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:51 Page 6
Bid Evaluation with SOS2 Sets  (BIDSOS,SEQ=163)
Column Listing      SOLVE bideval Using MIP From line 71


---- c  total cost

c
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       costdef


---- pl  purchase level       (sos2 type variable)

pl(a,nodeal)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       convex(a)

pl(a,0)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
    -3855.84    costdef
        1       convex(a)

pl(a,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
   -33000       demand
  -2.021806E+6  costdef
        1       convex(a)

REMAINING 16 ENTRIES SKIPPED
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:51 Page 7
Bid Evaluation with SOS2 Sets  (BIDSOS,SEQ=163)
Model Statistics    SOLVE bideval Using MIP From line 71


MODEL STATISTICS

BLOCKS OF EQUATIONS           3     SINGLE EQUATIONS            7
BLOCKS OF VARIABLES           2     SINGLE VARIABLES           20
NON ZERO ELEMENTS            42


GENERATION TIME      =        0.002 SECONDS      4 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.002 SECONDS      4 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:51 Page 8
Bid Evaluation with SOS2 Sets  (BIDSOS,SEQ=163)
Solution Report     SOLVE bideval Using MIP From line 71


               S O L V E      S U M M A R Y

     MODEL   bideval             OBJECTIVE  c
     TYPE    MIP                 DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  71

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/bidsos/convert.opt"
>>  gams bidsos-scalar.gms
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/bidsos/convert.opt"
Gams      : bidsos-scalar.gms


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:30:51 Page 9
Bid Evaluation with SOS2 Sets  (BIDSOS,SEQ=163)
E x e c u t i o n


----     74 PARAMETER rep  purchase report

                      ( ALL       0.000 )



EXECUTION TIME       =        0.000 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


USER: Remigijus Paulavicius, Single User License     S170731:0859AO-LNX
      Imperial College London, Dept. of Chemical Engineering    DC13449
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      /home/renigijus/gams/opt-mod-lib/gamslib/bidsos/bidsos.gms
Output     /home/renigijus/gams/opt-mod-lib/gamslib/bidsos/bidsos-scalar.gms.lst
