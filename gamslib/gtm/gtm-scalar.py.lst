GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:39 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  option NLP=convert;
   2  option NLP=convert;
   3  option NLP=convert;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:39 Page 2
An International Gas Trade Model (GTM,SEQ=53)
C o m p i l a t i o n


   5   
       
         The Gas Trade Model (GTM) models interrelated gas markets.
         Prices may be free to move as to equilibrate supplies and
         demand. Disequilibria can be introduced with controls over
         prices and/or quantities traded.
       
       
      Manne, A S, and Beltramo, M A, GTM: An International Gas Trade Model ,
      International Energy Program Report. Stanford University, 1984.
       
  18   
  19   Sets i   supply regions  / mexico, alberta-bc, atlantic, appalacia, us-gulf, mid-cont, permian-b, rockies, pacific
  20                              alaska  /
  21        j   demand regions  / mexico, west-can, ont-quebec, atlantic, new-engl, ny-nj, mid-atl, south-atl, midwest
  22                              south-west, central, n-central, west, n-west /
  23   
  24        jfx(j) regions with fixed demand  / mexico, west-can, ont-quebec, atlantic /
  25   
  26        ij(i,j)  feasible links
  27   
  28   
  29   Table  sdat(i,*)  supply data
  30   
  31               ref-p1   ref-q1   ref-p2   ref-q2   limit
  32  *           ($/mcf)   (tcf)   ($/mcf)   (tcf)    (tcf)
  33   mexico                2.0                .5     2.5
  34   alberta-bc            3.0               1.6     3.75
  35   atlantic               .25                .03     .3
  36   appalacia    3.5       .58      7.0      .65     .72
  37   us-gulf      3.5      7.88      7.0     8.82    9.75
  38   mid-cont     3.5      2.07      7.0     2.31    2.55
  39   permian-b    3.5      1.39      7.0     1.55    1.72
  40   rockies      3.5      1.16      7.0     1.30    1.44
  41   pacific      3.5       .42      7.0      .47     .52
  42   alaska       2.0       .80      2.0      .1       inf
  43   
  44   
  45   Table ddat(j,*)  demand data
  46   
  47               ref-p   ref-q   elas   tax     ex-dem
  48  *           ($/mcf)  (tcf)         ($/mcf)  (tcf)
  49   mexico      1.0     2.2    -.5
  50   west-can    3.0     1.47   -.5
  51   ont-quebec  3.5     1.38   -.5
  52   atlantic    3.5      .20   -.5
  53   new-engl    9.37     .76   -.60
  54   ny-nj       8.33    1.18   -.66
  55   mid-atl     8.26     .89   -.65
  56   south-atl   8.07    1.62   -.89
  57   midwest     8.01    2.96   -.65
  58   south-west  7.29    6.04   -.84
  59   central     7.79    1.17   -.67
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:39 Page 3
An International Gas Trade Model (GTM,SEQ=53)
C o m p i l a t i o n


  60   n-central   8.06    1.51   -.54
  61   west        8.18    2.10   -.43
  62   n-west      9.39     .36   -.57
  63   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:39 Page 4
An International Gas Trade Model (GTM,SEQ=53)
C o m p i l a t i o n


  65   
  66   Parameters  supa(i)  supply constant a
  67               supb(i)  supply constant b
  68               supc(i)  supply capacity
  69               dema(j)  demand constant a
  70               demb(j)  demand constant b ;
  71   
  72    supc(i)  =  sdat(i,"limit");
  73    supb(i)  =  ((sdat(i,"ref-p1")-sdat(i,"ref-p2"))/(1/(supc(i)-sdat(i,"ref-q1"))-1/(supc(i)-sdat(i,"ref-q2"))))
  74               $(supc(i) ne inf);
  75    supa(i)  =  sdat(i,"ref-p1") - supb(i)/(supc(i)-sdat(i,"ref-q1"));
  76  *                                     we rely on supa(i) evaluating to exactly zero in some cases
  77    supa(i)  =  round(supa(i),4);
  78    supc(i)$(supc(i) eq inf) = 100;
  79    sdat(i,"sup-a") = supa(i); sdat(i,"sup-b") = supb(i); display sdat;
  80   
  81    demb(j) = 1/ddat(j,"elas") + 1;
  82    dema(j) = ddat(j,"ref-p")/demb(j)/ddat(j,"ref-q")**(demb(j)-1);
  83    ddat(j,"dem-a") = dema(j); ddat(j,"dem-b") = demb(j); display ddat;
  84   
  85   
  86   Table  utc(i,j)  unit transport cost  ($ per mcf)
  87   
  88               mexico  west-can  ont-quebec  atlantic  new-engl  ny-nj  mid-atl  south-atl  midwest  south-west
  89   mexico       .25                                               2.29   2.22      2.03       1.96     1.25
  90   alberta-bc            .40        .90                  1.15     1.10   1.10      1.55        .80     1.25
  91   atlantic                                              1.50
  92   appalacia                                                              .72                  .46
  93   us-gulf                                               2.12     1.08   1.01       .82        .75      .04
  94   mid-cont                                                                                    .86      .14
  95   permian-b                                                                        .83        .77      .05
  96   rockies                                                                                     .53
  97   alaska                                                                                     6.0
  98   
  99   +           central  n-central  west  n-west
 100   mexico                          2.13
 101   alberta-bc    .80      .65       .70    .65
 102   us-gulf       .54
 103   mid-cont      .64
 104   permian-b     .55                .94
 105   rockies       .31      .58       .70   1.91
 106   pacific                          .43
 107   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:39 Page 5
An International Gas Trade Model (GTM,SEQ=53)
C o m p i l a t i o n


 109   
 110   Table  pc(i,j)   pipeline capacities (tcf)
 111   
 112               mexico  west-can  ont-quebec  atlantic  new-engl  ny-nj  mid-atl  south-atl  midwest  south-west
 113   mexico        inf                                              .067   .067     .067       .067
 114   alberta-bc            inf       inf                   .30      .150   .10                  inf
 115   atlantic                                    inf        inf
 116   appalacia                                                             .34                 .35
 117   us-gulf                                                inf    1.390  1.060    2.0        2.62       3.73
 118   mid-cont                                                                                  .62       2.30
 119   permian-b                                                                                 .12       1.45
 120   rockies                                                                                   .48
 121   alaska                                                                                    .80
 122   
 123   +           central  n-central  west  n-west
 124   mexico                          .033
 125   alberta-bc    inf       inf      inf    inf
 126   mid-cont    1.03
 127   permian-b                      1.46
 128   rockies      .14        inf     .10     inf
 129   pacific                         .48
 130   
 131   Sets  check1(i,j)  supply links with zero cost and non-zero capacity
 132         check2(i,j)  supply links with nonzero cost but zero capacity ;
 133   
 134    check1(i,j) = yes$(utc(i,j) eq 0 and pc(i,j) ne 0);
 135    check2(i,j) = yes$(utc(i,j) ne 0 and pc(i,j) eq 0);
 136   
 137    ij(i,j) = yes$pc(i,j);
 138   
 139    Display check1, check2;
 140   
 141   Variables  x(i,j)  shipment of natural gas (tcf)
 142              s(i)    regional supply         (tcf)
 143              d(j)    regional demand         (tcf)
 144              benefit consumers benefits minus cost
 145   
 146   Positive Variables x, s, d;
 147   
 148   Equations sb(i)    supply balance          (tcf)
 149             db(j)    demand balance          (tcf)
 150             bdef     benefit definition ;
 151   
 152   sb(i)..   sum(j$ij(i,j), x(i,j)) =l= s(i) ;
 153   
 154   db(j)..   sum(i$ij(i,j), x(i,j)) =g= d(j) ;
 155   
 156   bdef..    benefit =e= sum(j, dema(j)*d(j)**demb(j)) - sum(i, supa(i)*s(i) - supb(i)*log((supc(i)-s(i))/supc(i)))
 157                       - sum((i,j)$ij(i,j), utc(i,j)*x(i,j));
 158   
 159   x.up(i,j) = pc(i,j); d.lo(j) = .2; d.fx(jfx) = ddat(jfx,"ref-q"); s.up(i) = 0.99*supc(i);
 160   
 161   Model gtm gas transport model / all /;  solve gtm maximizing benefit using nlp;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:39 Page 6
An International Gas Trade Model (GTM,SEQ=53)
C o m p i l a t i o n


 162   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:39 Page 7
An International Gas Trade Model (GTM,SEQ=53)
C o m p i l a t i o n


 164   
 165   Parameter report1(i,*) supply summary report
 166             report2(j,*) demand summary report ;
 167   
 168   report1(i,"supply") = s.l(i); report1(i,"capacity") = s.up(i); report1(i,"price") = sb.m(i);
 169   report2(j,"demand") = d.l(j); report2(j,"price") = -db.m(j);
 170   
 171   Display report1, report2, x.l;


COMPILATION TIME     =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:39 Page 8
An International Gas Trade Model (GTM,SEQ=53)
E x e c u t i o n


----     79 PARAMETER sdat  supply data

                ref-p1      ref-q1      ref-p2      ref-q2       limit       sup-a       sup-b

mexico                       2.000                   0.500       2.500
alberta-bc                   3.000                   1.600       3.750
atlantic                     0.250                   0.030       0.300
appalacia        3.500       0.580       7.000       0.650       0.720                   0.490
us-gulf          3.500       7.880       7.000       8.820       9.750       0.037       6.475
mid-cont         3.500       2.070       7.000       2.310       2.550                   1.680
permian-b        3.500       1.390       7.000       1.550       1.720      -0.219       1.227
rockies          3.500       1.160       7.000       1.300       1.440                   0.980
pacific          3.500       0.420       7.000       0.470       0.520                   0.350
alaska           2.000       0.800       2.000       0.100        +INF       2.000


----     83 PARAMETER ddat  demand data

                 ref-p       ref-q        elas       dem-a       dem-b

mexico           1.000       2.200      -0.500      -4.840      -1.000
atlantic         3.500       0.200      -0.500      -0.140      -1.000
west-can         3.000       1.470      -0.500      -6.483      -1.000
ont-quebec       3.500       1.380      -0.500      -6.665      -1.000
new-engl         9.370       0.760      -0.600      -8.896      -0.667
ny-nj            8.330       1.180      -0.660     -20.779      -0.515
mid-atl          8.260       0.890      -0.650     -12.822      -0.538
south-atl        8.070       1.620      -0.890    -112.274      -0.124
midwest          8.010       2.960      -0.650     -78.985      -0.538
south-west       7.290       6.040      -0.840    -325.606      -0.190
central          7.790       1.170      -0.670     -19.993      -0.493
n-central        8.060       1.510      -0.540     -20.296      -0.852
west             8.180       2.100      -0.430     -34.649      -1.326
n-west           9.390       0.360      -0.570      -2.073      -0.754


----    139 SET check1  supply links with zero cost and non-zero capacity

            atlantic

atlantic         YES


----    139 SET check2  supply links with nonzero cost but zero capacity

             south-atl  south-west     central

mexico                         YES
alberta-bc         YES         YES
us-gulf                                    YES
permian-b          YES                     YES

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:39 Page 9
An International Gas Trade Model (GTM,SEQ=53)
Equation Listing    SOLVE gtm Using NLP From line 161


---- sb  =L=  supply balance          (tcf)

sb(mexico)..  x(mexico,mexico) + x(mexico,ny-nj) + x(mexico,mid-atl) + x(mexico,south-atl) + x(mexico,midwest) + x(mexico,west) - s(mexico) =L= 0 ; (LHS = 0)
     
sb(alberta-bc)..  x(alberta-bc,west-can) + x(alberta-bc,ont-quebec) + x(alberta-bc,new-engl) + x(alberta-bc,ny-nj) + x(alberta-bc,mid-atl) + x(alberta-bc,midwest) + x(alberta-bc,central) + x(alberta-bc,n-central) + x(alberta-bc,west)
     
      + x(alberta-bc,n-west) - s(alberta-bc) =L= 0 ; (LHS = 0)
     
sb(atlantic)..  x(atlantic,atlantic) + x(atlantic,new-engl) - s(atlantic) =L= 0 ; (LHS = 0)
     
REMAINING 7 ENTRIES SKIPPED


---- db  =G=  demand balance          (tcf)

db(mexico)..  x(mexico,mexico) - d(mexico) =G= 0 ; (LHS = -2.2, INFES = 2.2 ****)
     
db(atlantic)..  x(atlantic,atlantic) - d(atlantic) =G= 0 ; (LHS = -0.2, INFES = 0.2 ****)
     
db(west-can)..  x(alberta-bc,west-can) - d(west-can) =G= 0 ; (LHS = -1.47, INFES = 1.47 ****)
     
REMAINING 11 ENTRIES SKIPPED


---- bdef  =E=  benefit definition

bdef..  0.25*x(mexico,mexico) + 2.29*x(mexico,ny-nj) + 2.22*x(mexico,mid-atl) + 2.03*x(mexico,south-atl) + 1.96*x(mexico,midwest) + 2.13*x(mexico,west) + 0.4*x(alberta-bc,west-can) + 0.9*x(alberta-bc,ont-quebec) + 1.15*x(alberta-bc,new-engl)
     
      + 1.1*x(alberta-bc,ny-nj) + 1.1*x(alberta-bc,mid-atl) + 0.8*x(alberta-bc,midwest) + 0.8*x(alberta-bc,central) + 0.65*x(alberta-bc,n-central) + 0.7*x(alberta-bc,west) + 0.65*x(alberta-bc,n-west) + 1.5*x(atlantic,new-engl) + 0.72*x(appalacia,mid-atl)
     
      + 0.46*x(appalacia,midwest) + 2.12*x(us-gulf,new-engl) + 1.08*x(us-gulf,ny-nj) + 1.01*x(us-gulf,mid-atl) + 0.82*x(us-gulf,south-atl) + 0.75*x(us-gulf,midwest) + 0.04*x(us-gulf,south-west) + 0.86*x(mid-cont,midwest) + 0.14*x(mid-cont,south-west)
     
      + 0.64*x(mid-cont,central) + 0.77*x(permian-b,midwest) + 0.05*x(permian-b,south-west) + 0.94*x(permian-b,west) + 0.53*x(rockies,midwest) + 0.31*x(rockies,central) + 0.58*x(rockies,n-central) + 0.7*x(rockies,west) + 1.91*x(rockies,n-west)
     
      + 0.43*x(pacific,west) + 6*x(alaska,midwest) + (0.680555555555555)*s(appalacia) + (0.701340752864157)*s(us-gulf) + (0.658823529411764)*s(mid-cont) + (0.494781104651162)*s(permian-b) + (0.680555555555555)*s(rockies) + (0.673076923076924)*s(pacific)
     
      + 2*s(alaska) - (1)*d(mexico) - (3.5)*d(atlantic) - (3)*d(west-can) - (3.5)*d(ont-quebec) - (86.7052880246952)*d(new-engl) - (122.631656523028)*d(ny-nj) - (82.1215215304926)*d(mid-atl) - (84.6531686584925)*d(south-atl)
     
      - (505.865609019639)*d(midwest) - (421.347630201176)*d(south-west) - (108.779288287036)*d(central) - (340.53576444342)*d(n-central) - (1939.15327802614)*d(west) - (26.3337126595196)*d(n-west) + benefit =E= 0 ;
     
      (LHS = 1307.23433177483, INFES = 1307.23433177483 ****)
     
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:39 Page 10
An International Gas Trade Model (GTM,SEQ=53)
Column Listing      SOLVE gtm Using NLP From line 161


---- x  shipment of natural gas (tcf)

x(mexico,mexico)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       sb(mexico)
        1       db(mexico)
        0.25    bdef

x(mexico,ny-nj)
                (.LO, .L, .UP, .M = 0, 0, 0.067, 0)
        1       sb(mexico)
        1       db(ny-nj)
        2.29    bdef

x(mexico,mid-atl)
                (.LO, .L, .UP, .M = 0, 0, 0.067, 0)
        1       sb(mexico)
        1       db(mid-atl)
        2.22    bdef

REMAINING 36 ENTRIES SKIPPED

---- s  regional supply         (tcf)

s(mexico)
                (.LO, .L, .UP, .M = 0, 0, 2.475, 0)
       -1       sb(mexico)

s(alberta-bc)
                (.LO, .L, .UP, .M = 0, 0, 3.7125, 0)
       -1       sb(alberta-bc)

s(atlantic)
                (.LO, .L, .UP, .M = 0, 0, 0.297, 0)
       -1       sb(atlantic)

REMAINING 7 ENTRIES SKIPPED

---- d  regional demand         (tcf)

d(mexico)
                (.LO, .L, .UP, .M = 2.2, 2.2, 2.2, 0)
       -1       db(mexico)
      (-1)      bdef

d(atlantic)
                (.LO, .L, .UP, .M = 0.2, 0.2, 0.2, 0)
       -1       db(atlantic)
      (-3.5)    bdef

d(west-can)
                (.LO, .L, .UP, .M = 1.47, 1.47, 1.47, 0)
       -1       db(west-can)
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:39 Page 11
An International Gas Trade Model (GTM,SEQ=53)
Column Listing      SOLVE gtm Using NLP From line 161


     d  regional demand         (tcf)

      (-3)      bdef

REMAINING 11 ENTRIES SKIPPED

---- benefit  consumers benefits minus cost

benefit
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       bdef

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:39 Page 12
An International Gas Trade Model (GTM,SEQ=53)
Model Statistics    SOLVE gtm Using NLP From line 161


MODEL STATISTICS

BLOCKS OF EQUATIONS           3     SINGLE EQUATIONS           25
BLOCKS OF VARIABLES           4     SINGLE VARIABLES           64  10 projected
NON ZERO ELEMENTS           162     NON LINEAR N-Z             20
DERIVATIVE POOL              20     CONSTANT POOL              58
CODE LENGTH                 103


GENERATION TIME      =        0.003 SECONDS      4 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.004 SECONDS      4 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:39 Page 13
An International Gas Trade Model (GTM,SEQ=53)
Solution Report     SOLVE gtm Using NLP From line 161


               S O L V E      S U M M A R Y

     MODEL   gtm                 OBJECTIVE  benefit
     TYPE    NLP                 DIRECTION  MAXIMIZE
     SOLVER  CONVERT             FROM LINE  161

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000
 EVALUATION ERRORS              0             0

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/gtm/convert.opt"
>>  pyomo gtm-scalar.py
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/gtm/convert.opt"
Pyomo     : gtm-scalar.py


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:39 Page 14
An International Gas Trade Model (GTM,SEQ=53)
E x e c u t i o n


----    171 PARAMETER report1  supply summary report

              capacity

mexico           2.475
alberta-bc       3.713
atlantic         0.297
appalacia        0.713
us-gulf          9.653
mid-cont         2.524
permian-b        1.703
rockies          1.426
pacific          0.515
alaska          99.000


----    171 PARAMETER report2  demand summary report

                demand

mexico           2.200
atlantic         0.200
west-can         1.470
ont-quebec       1.380


----    171 VARIABLE x.L  shipment of natural gas (tcf)

                      ( ALL       0.000 )



EXECUTION TIME       =        0.000 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


USER: Remigijus Paulavicius, Single User License     S170731:0859AO-LNX
      Imperial College London, Dept. of Chemical Engineering    DC13449
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      /home/renigijus/gams/opt-mod-lib/gamslib/gtm/gtm.gms
Output     /home/renigijus/gams/opt-mod-lib/gamslib/gtm/gtm-scalar.py.lst
