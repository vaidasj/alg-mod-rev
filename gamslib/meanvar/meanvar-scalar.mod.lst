GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  option NLP=convert;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 2
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
C o m p i l a t i o n


   3   
         The mean-variance model is often used to manage residual risk in
         an elegant way. This class of models is due to H Markowitz who
         introduced these concepts in 1952. Other models like [IMMUN] hedge
         against different kinds of systematic risk.
       
       
         The family of models presented in this file are:
       
         VAR1   Minimum Variance Portfolio Model
                Global Asset Allocation - Efficient Frontier Model
         VAR2   Riskless Asset Minimum Variance Model
         SHARPE Minimum Variance Model using Sharpe Ratio
         MEAN   Mean-Variance Model
         MARG   Mean-Variance Model with Marginal Variance Definition
       
       
      Dahl, H, Meeraus, A, and Zenios, S A, Some Financial Optimization
      Models: Risk Management. In Zenios, S A, Ed, Financial Optimization.
      Cambridge University Press, New York, NY, 1993.
       
  26   
  27   
  28  Set s       investment set        / cn,fr,gr,jp,sw,uk,us,wr /
  29      i(s)    analyzed investments  / cn,fr,gr,jp,sw,uk,us    /;
  30   
  31  Alias (i,j) ;
  32   
  33  * note:  this instance represents investments of hedged
  34  *        foreign securities.
  35   
  36   
  37  Parameter  mu(s)  expected return of security /
  38   
  39      cn     0.1287
  40      fr     0.1096
  41      gr     0.0501
  42      jp     0.1524
  43      sw     0.0763
  44      uk     0.1854
  45      us     0.0620
  46      wr     0.0916 /
  47   
  48   
  49  Table  q(i,j)   covariance matrix
  50   
  51              cn      fr      gr      jp      sw      uk      us
  52      cn    42.18
  53      fr    20.18   70.89
  54      gr    10.88   21.58   25.51
  55      jp     5.30   15.41    9.60   22.33
  56      sw    12.32   23.24   22.63   10.32   30.01
  57      uk    23.84   23.80   13.22   10.46   16.36   42.23
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 3
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
C o m p i l a t i o n


  58      us    17.41   12.62    4.70    1.00    7.20    9.90   16.42 ;
  59   
  60  q(i,j)$(ord(j) gt ord(i)) = q(j,i) ;
  61   
  62   
  63  Scalar  mup   target expected return for the portfolio   / 0.115 /;
  64   
  65   
  66  Variables
  67      v          variance
  68      m          mean return
  69      x(i)       fraction of the portfolio that consists of security i ;
  70   
  71  Positive Variable  x;
  72   
  73  x.up(i) = 1;
  74  Equations
  75      vbal        variance definition
  76      mbal        mean balancing constraint
  77      budget      budget constraint ;
  78   
  79    vbal..     v =e= sum((i,j), x(i)*q(i,j)*x(j)) ;
  80   
  81    mbal..     m =e= sum(i, mu(i)*x(i)) ;
  82   
  83    budget..   sum(i, x(i)) =e= 1 ;
  84   
  85  Model var1 / vbal, mbal, budget / ;
  86   
  87  m.fx = mup;   Solve var1 minimizing v using nlp ;
  88   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 4
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
riskless asset minimum variance model


  90   
  91  Scalar  r   return of riskless asset  / 0.0979 /;
  92   
  93  Equation
  94      riskless   mean balancing constraint using riskless rate ;
  95   
  96   
  97    riskless..  sum(i, (mu(i)-r)*x(i))  =e=  mup - r ;
  98   
  99   
 100   Model var2 / vbal, riskless / ;
 101   
 102   Solve var2 minimizing v using nlp ;
 103   
 104   Display  mup, r;
 105   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 5
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
minimum variance model using sharpe ratio


 107   
 108  Set  h(s)    historical investments    / wr /;
 109   
 110  Scalar  sf       shrinkage factor ;
 111   
 112  Variable
 113    omega        objective
 114   
 115  Equations
 116    obj2         objective function
 117    meanbal      mean balancing constraint;
 118   
 119   
 120    obj2..       omega  =e=  m / sqrt(v);
 121   
 122    meanbal..    sum(i, x(i)*(sf*sum(h, mu(h)) + (1-sf)*mu(i)))  =e=  m ;
 123   
 124   
 125   Model sharpe   / obj2, meanbal, vbal, budget / ;
 126   
 127     m.l = 1 ;  v.lo = 0.01;  v.l = 1 ;   sf = .65 ; m.lo = 0; m.up = inf;
 128   
 129  Solve sharpe maximizing omega using nlp ;
 130   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 6
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
global asset allocation - efficient frontier model


 132   
 133  Set  p       efficient frontier points     / minvar, p1*p4, maxvar /
 134       pp      efficient frontier points     /         p1*p4         /
 135   
 136  Scalars     vmin     minimum variance
 137              vmax     maximum variance ;
 138   
 139  Parameter   xres(*,p) portfolios at different points;
 140   
 141  Option limcol=0, limrow=0; var1.solprint=2;
 142  Loop(p('maxvar'),
 143     Solve var1 maximize m using nlp ;
 144     xres(i,p)         = x.l(i);
 145     xres('mean',p)    = m.l;
 146     xres('var',p)     = v.l;
 147     xres('status',p)  = var1.modelstat;
 148     vmax = v.l; );
 149   
 150  Loop(p('minvar'),
 151     Solve var1 minimize v using nlp ;
 152     xres(i,p)         = x.l(i);
 153     xres('mean',p)    = m.l;
 154     xres('var',p)     = v.l;
 155     xres('status',p)  = var1.modelstat;
 156     vmin = v.l; );
 157   
 158  Loop(p(pp),
 159     v.fx = vmin + (vmax-vmin)/(card(pp)+1)*ord(pp) ;
 160     Solve var1 maximizing m using nlp ;
 161     xres(i,p)         = x.l(i);
 162     xres('mean',p)    = m.l;
 163     xres('var',p)     = v.l;
 164     xres('status',p)  = var1.modelstat; );
 165   
 166  Display xres;
 167   
 168   


COMPILATION TIME     =        0.000 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 7
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Equation Listing    SOLVE var1 Using NLP From line 87


---- vbal  =E=  variance definition

vbal..  v + (0)*x(cn) + (0)*x(fr) + (0)*x(gr) + (0)*x(jp) + (0)*x(sw) + (0)*x(uk) + (0)*x(us) =E= 0 ; (LHS = 0)
     

---- mbal  =E=  mean balancing constraint

mbal..  m - 0.1287*x(cn) - 0.1096*x(fr) - 0.0501*x(gr) - 0.1524*x(jp) - 0.0763*x(sw) - 0.1854*x(uk) - 0.062*x(us) =E= 0 ; (LHS = 0.115, INFES = 0.115 ****)
     

---- budget  =E=  budget constraint

budget..  x(cn) + x(fr) + x(gr) + x(jp) + x(sw) + x(uk) + x(us) =E= 1 ; (LHS = 0, INFES = 1 ****)
     
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 8
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Column Listing      SOLVE var1 Using NLP From line 87


---- v  variance

v
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       vbal


---- m  mean return

m
                (.LO, .L, .UP, .M = 0.115, 0.115, 0.115, 0)
        1       mbal


---- x  fraction of the portfolio that consists of security i

x(cn)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       (0)      vbal
       -0.1287  mbal
        1       budget

x(fr)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       (0)      vbal
       -0.1096  mbal
        1       budget

x(gr)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       (0)      vbal
       -0.0501  mbal
        1       budget

REMAINING 4 ENTRIES SKIPPED
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 9
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Model Statistics    SOLVE var1 Using NLP From line 87


MODEL STATISTICS

BLOCKS OF EQUATIONS           3     SINGLE EQUATIONS            3
BLOCKS OF VARIABLES           3     SINGLE VARIABLES            9
NON ZERO ELEMENTS            23     NON LINEAR N-Z              7
DERIVATIVE POOL              20     CONSTANT POOL              43
CODE LENGTH                 196


GENERATION TIME      =        0.002 SECONDS      4 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.002 SECONDS      4 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 10
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Solution Report     SOLVE var1 Using NLP From line 87


               S O L V E      S U M M A R Y

     MODEL   var1                OBJECTIVE  v
     TYPE    NLP                 DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  87

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000
 EVALUATION ERRORS              0             0

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/meanvar/convert.opt"
>>  ampl meanvar-scalar.mod
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/meanvar/convert.opt"
Ampl      : meanvar-scalar.mod


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 11
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Equation Listing    SOLVE var2 Using NLP From line 102


---- vbal  =E=  variance definition

vbal..  v + (0)*x(cn) + (0)*x(fr) + (0)*x(gr) + (0)*x(jp) + (0)*x(sw) + (0)*x(uk) + (0)*x(us) =E= 0 ; (LHS = 0)
     

---- riskless  =E=  mean balancing constraint using riskless rate

riskless..  0.0308*x(cn) + 0.0117*x(fr) - 0.0478*x(gr) + 0.0545*x(jp) - 0.0216*x(sw) + 0.0875*x(uk) - 0.0359*x(us) =E= 0.0171 ; (LHS = 0, INFES = 0.0171 ****)
     
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 12
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Column Listing      SOLVE var2 Using NLP From line 102


---- v  variance

v
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       vbal


---- x  fraction of the portfolio that consists of security i

x(cn)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       (0)      vbal
        0.0308  riskless

x(fr)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       (0)      vbal
        0.0117  riskless

x(gr)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       (0)      vbal
       -0.0478  riskless

REMAINING 4 ENTRIES SKIPPED
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 13
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Model Statistics    SOLVE var2 Using NLP From line 102


MODEL STATISTICS

BLOCKS OF EQUATIONS           2     SINGLE EQUATIONS            2
BLOCKS OF VARIABLES           2     SINGLE VARIABLES            8
NON ZERO ELEMENTS            15     NON LINEAR N-Z              7
DERIVATIVE POOL              20     CONSTANT POOL              43
CODE LENGTH                 196


GENERATION TIME      =        0.002 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.002 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 14
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Solution Report     SOLVE var2 Using NLP From line 102


               S O L V E      S U M M A R Y

     MODEL   var2                OBJECTIVE  v
     TYPE    NLP                 DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  102

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000
 EVALUATION ERRORS              0             0

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/meanvar/convert.opt"
>>  ampl meanvar-scalar.mod
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/meanvar/convert.opt"
Ampl      : meanvar-scalar.mod


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 15
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
E x e c u t i o n


----    104 PARAMETER mup                  =        0.115  target expected return for the portfolio
            PARAMETER r                    =        0.098  return of riskless asset
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 16
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Equation Listing    SOLVE sharpe Using NLP From line 129


---- obj2  =E=  objective function

obj2..  (0.5)*v - (1)*m + omega =E= 0 ; (LHS = -1, INFES = 1 ****)
     

---- meanbal  =E=  mean balancing constraint

meanbal..  - m + 0.104585*x(cn) + 0.0979*x(fr) + 0.077075*x(gr) + 0.11288*x(jp) + 0.086245*x(sw) + 0.12443*x(uk) + 0.08124*x(us) =E= 0 ; (LHS = -1, INFES = 1 ****)
     

---- vbal  =E=  variance definition

vbal..  v + (0)*x(cn) + (0)*x(fr) + (0)*x(gr) + (0)*x(jp) + (0)*x(sw) + (0)*x(uk) + (0)*x(us) =E= 0 ; (LHS = 1, INFES = 1 ****)
     

---- budget  =E=  budget constraint

budget..  x(cn) + x(fr) + x(gr) + x(jp) + x(sw) + x(uk) + x(us) =E= 1 ; (LHS = 0, INFES = 1 ****)
     
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 17
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Column Listing      SOLVE sharpe Using NLP From line 129


---- v  variance

v
                (.LO, .L, .UP, .M = 0.01, 1, +INF, 0)
       (0.5)    obj2
        1       vbal


---- m  mean return

m
                (.LO, .L, .UP, .M = 0, 1, +INF, 0)
      (-1)      obj2
       -1       meanbal


---- x  fraction of the portfolio that consists of security i

x(cn)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
        0.1046  meanbal
       (0)      vbal
        1       budget

x(fr)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
        0.0979  meanbal
       (0)      vbal
        1       budget

x(gr)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
        0.0771  meanbal
       (0)      vbal
        1       budget

REMAINING 4 ENTRIES SKIPPED

---- omega  objective

omega
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       obj2

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 18
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Model Statistics    SOLVE sharpe Using NLP From line 129


MODEL STATISTICS

BLOCKS OF EQUATIONS           4     SINGLE EQUATIONS            4
BLOCKS OF VARIABLES           4     SINGLE VARIABLES           10
NON ZERO ELEMENTS            26     NON LINEAR N-Z              9
DERIVATIVE POOL              20     CONSTANT POOL              43
CODE LENGTH                 203


GENERATION TIME      =        0.002 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.002 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 19
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Solution Report     SOLVE sharpe Using NLP From line 129


               S O L V E      S U M M A R Y

     MODEL   sharpe              OBJECTIVE  omega
     TYPE    NLP                 DIRECTION  MAXIMIZE
     SOLVER  CONVERT             FROM LINE  129

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000
 EVALUATION ERRORS              0             0

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/meanvar/convert.opt"
>>  ampl meanvar-scalar.mod
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/meanvar/convert.opt"
Ampl      : meanvar-scalar.mod


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 21
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Model Analysis      SOLVE var1 Using NLP From line 143



No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 23
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Model Analysis      SOLVE var1 Using NLP From line 151



No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 25
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Model Analysis      SOLVE var1 Using NLP From line 160



No solution returned

No solution returned

No solution returned

No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 29
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
E x e c u t i o n


----    166 PARAMETER xres  portfolios at different points

            minvar          p1          p2          p3          p4      maxvar

mean         1.000       1.000       1.000       1.000       1.000       1.000
var          1.000       1.000       1.000       1.000       1.000       1.000
status      14.000      14.000      14.000      14.000      14.000      14.000



EXECUTION TIME       =        0.000 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


USER: Remigijus Paulavicius, Single User License     S170731:0859AO-LNX
      Imperial College London, Dept. of Chemical Engineering    DC13449
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      /home/renigijus/gams/opt-mod-lib/gamslib/meanvar/meanvar.gms
Output     /home/renigijus/gams/opt-mod-lib/gamslib/meanvar/meanvar-scalar.mod.lst
