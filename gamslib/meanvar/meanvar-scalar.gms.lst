GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  option NLP=convert;
   2  option NLP=convert;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 2
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
C o m p i l a t i o n


   4   
         The mean-variance model is often used to manage residual risk in
         an elegant way. This class of models is due to H Markowitz who
         introduced these concepts in 1952. Other models like [IMMUN] hedge
         against different kinds of systematic risk.
       
       
         The family of models presented in this file are:
       
         VAR1   Minimum Variance Portfolio Model
                Global Asset Allocation - Efficient Frontier Model
         VAR2   Riskless Asset Minimum Variance Model
         SHARPE Minimum Variance Model using Sharpe Ratio
         MEAN   Mean-Variance Model
         MARG   Mean-Variance Model with Marginal Variance Definition
       
       
      Dahl, H, Meeraus, A, and Zenios, S A, Some Financial Optimization
      Models: Risk Management. In Zenios, S A, Ed, Financial Optimization.
      Cambridge University Press, New York, NY, 1993.
       
  27   
  28   
  29  Set s       investment set        / cn,fr,gr,jp,sw,uk,us,wr /
  30      i(s)    analyzed investments  / cn,fr,gr,jp,sw,uk,us    /;
  31   
  32  Alias (i,j) ;
  33   
  34  * note:  this instance represents investments of hedged
  35  *        foreign securities.
  36   
  37   
  38  Parameter  mu(s)  expected return of security /
  39   
  40      cn     0.1287
  41      fr     0.1096
  42      gr     0.0501
  43      jp     0.1524
  44      sw     0.0763
  45      uk     0.1854
  46      us     0.0620
  47      wr     0.0916 /
  48   
  49   
  50  Table  q(i,j)   covariance matrix
  51   
  52              cn      fr      gr      jp      sw      uk      us
  53      cn    42.18
  54      fr    20.18   70.89
  55      gr    10.88   21.58   25.51
  56      jp     5.30   15.41    9.60   22.33
  57      sw    12.32   23.24   22.63   10.32   30.01
  58      uk    23.84   23.80   13.22   10.46   16.36   42.23
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 3
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
C o m p i l a t i o n


  59      us    17.41   12.62    4.70    1.00    7.20    9.90   16.42 ;
  60   
  61  q(i,j)$(ord(j) gt ord(i)) = q(j,i) ;
  62   
  63   
  64  Scalar  mup   target expected return for the portfolio   / 0.115 /;
  65   
  66   
  67  Variables
  68      v          variance
  69      m          mean return
  70      x(i)       fraction of the portfolio that consists of security i ;
  71   
  72  Positive Variable  x;
  73   
  74  x.up(i) = 1;
  75  Equations
  76      vbal        variance definition
  77      mbal        mean balancing constraint
  78      budget      budget constraint ;
  79   
  80    vbal..     v =e= sum((i,j), x(i)*q(i,j)*x(j)) ;
  81   
  82    mbal..     m =e= sum(i, mu(i)*x(i)) ;
  83   
  84    budget..   sum(i, x(i)) =e= 1 ;
  85   
  86  Model var1 / vbal, mbal, budget / ;
  87   
  88  m.fx = mup;   Solve var1 minimizing v using nlp ;
  89   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 4
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
riskless asset minimum variance model


  91   
  92  Scalar  r   return of riskless asset  / 0.0979 /;
  93   
  94  Equation
  95      riskless   mean balancing constraint using riskless rate ;
  96   
  97   
  98    riskless..  sum(i, (mu(i)-r)*x(i))  =e=  mup - r ;
  99   
 100   
 101   Model var2 / vbal, riskless / ;
 102   
 103   Solve var2 minimizing v using nlp ;
 104   
 105   Display  mup, r;
 106   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 5
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
minimum variance model using sharpe ratio


 108   
 109  Set  h(s)    historical investments    / wr /;
 110   
 111  Scalar  sf       shrinkage factor ;
 112   
 113  Variable
 114    omega        objective
 115   
 116  Equations
 117    obj2         objective function
 118    meanbal      mean balancing constraint;
 119   
 120   
 121    obj2..       omega  =e=  m / sqrt(v);
 122   
 123    meanbal..    sum(i, x(i)*(sf*sum(h, mu(h)) + (1-sf)*mu(i)))  =e=  m ;
 124   
 125   
 126   Model sharpe   / obj2, meanbal, vbal, budget / ;
 127   
 128     m.l = 1 ;  v.lo = 0.01;  v.l = 1 ;   sf = .65 ; m.lo = 0; m.up = inf;
 129   
 130  Solve sharpe maximizing omega using nlp ;
 131   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 6
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
global asset allocation - efficient frontier model


 133   
 134  Set  p       efficient frontier points     / minvar, p1*p4, maxvar /
 135       pp      efficient frontier points     /         p1*p4         /
 136   
 137  Scalars     vmin     minimum variance
 138              vmax     maximum variance ;
 139   
 140  Parameter   xres(*,p) portfolios at different points;
 141   
 142  Option limcol=0, limrow=0; var1.solprint=2;
 143  Loop(p('maxvar'),
 144     Solve var1 maximize m using nlp ;
 145     xres(i,p)         = x.l(i);
 146     xres('mean',p)    = m.l;
 147     xres('var',p)     = v.l;
 148     xres('status',p)  = var1.modelstat;
 149     vmax = v.l; );
 150   
 151  Loop(p('minvar'),
 152     Solve var1 minimize v using nlp ;
 153     xres(i,p)         = x.l(i);
 154     xres('mean',p)    = m.l;
 155     xres('var',p)     = v.l;
 156     xres('status',p)  = var1.modelstat;
 157     vmin = v.l; );
 158   
 159  Loop(p(pp),
 160     v.fx = vmin + (vmax-vmin)/(card(pp)+1)*ord(pp) ;
 161     Solve var1 maximizing m using nlp ;
 162     xres(i,p)         = x.l(i);
 163     xres('mean',p)    = m.l;
 164     xres('var',p)     = v.l;
 165     xres('status',p)  = var1.modelstat; );
 166   
 167  Display xres;
 168   
 169   


COMPILATION TIME     =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 7
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Equation Listing    SOLVE var1 Using NLP From line 88


---- vbal  =E=  variance definition

vbal..  v + (0)*x(cn) + (0)*x(fr) + (0)*x(gr) + (0)*x(jp) + (0)*x(sw) + (0)*x(uk) + (0)*x(us) =E= 0 ; (LHS = 0)
     

---- mbal  =E=  mean balancing constraint

mbal..  m - 0.1287*x(cn) - 0.1096*x(fr) - 0.0501*x(gr) - 0.1524*x(jp) - 0.0763*x(sw) - 0.1854*x(uk) - 0.062*x(us) =E= 0 ; (LHS = 0.115, INFES = 0.115 ****)
     

---- budget  =E=  budget constraint

budget..  x(cn) + x(fr) + x(gr) + x(jp) + x(sw) + x(uk) + x(us) =E= 1 ; (LHS = 0, INFES = 1 ****)
     
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 8
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Column Listing      SOLVE var1 Using NLP From line 88


---- v  variance

v
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       vbal


---- m  mean return

m
                (.LO, .L, .UP, .M = 0.115, 0.115, 0.115, 0)
        1       mbal


---- x  fraction of the portfolio that consists of security i

x(cn)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       (0)      vbal
       -0.1287  mbal
        1       budget

x(fr)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       (0)      vbal
       -0.1096  mbal
        1       budget

x(gr)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       (0)      vbal
       -0.0501  mbal
        1       budget

REMAINING 4 ENTRIES SKIPPED
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 9
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Model Statistics    SOLVE var1 Using NLP From line 88


MODEL STATISTICS

BLOCKS OF EQUATIONS           3     SINGLE EQUATIONS            3
BLOCKS OF VARIABLES           3     SINGLE VARIABLES            9
NON ZERO ELEMENTS            23     NON LINEAR N-Z              7
DERIVATIVE POOL              20     CONSTANT POOL              43
CODE LENGTH                 196


GENERATION TIME      =        0.003 SECONDS      4 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.003 SECONDS      4 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 10
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Solution Report     SOLVE var1 Using NLP From line 88


               S O L V E      S U M M A R Y

     MODEL   var1                OBJECTIVE  v
     TYPE    NLP                 DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  88

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000
 EVALUATION ERRORS              0             0

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/meanvar/convert.opt"
>>  gams meanvar-scalar.gms
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/meanvar/convert.opt"
Gams      : meanvar-scalar.gms


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 11
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Equation Listing    SOLVE var2 Using NLP From line 103


---- vbal  =E=  variance definition

vbal..  v + (0)*x(cn) + (0)*x(fr) + (0)*x(gr) + (0)*x(jp) + (0)*x(sw) + (0)*x(uk) + (0)*x(us) =E= 0 ; (LHS = 0)
     

---- riskless  =E=  mean balancing constraint using riskless rate

riskless..  0.0308*x(cn) + 0.0117*x(fr) - 0.0478*x(gr) + 0.0545*x(jp) - 0.0216*x(sw) + 0.0875*x(uk) - 0.0359*x(us) =E= 0.0171 ; (LHS = 0, INFES = 0.0171 ****)
     
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 12
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Column Listing      SOLVE var2 Using NLP From line 103


---- v  variance

v
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       vbal


---- x  fraction of the portfolio that consists of security i

x(cn)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       (0)      vbal
        0.0308  riskless

x(fr)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       (0)      vbal
        0.0117  riskless

x(gr)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       (0)      vbal
       -0.0478  riskless

REMAINING 4 ENTRIES SKIPPED
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 13
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Model Statistics    SOLVE var2 Using NLP From line 103


MODEL STATISTICS

BLOCKS OF EQUATIONS           2     SINGLE EQUATIONS            2
BLOCKS OF VARIABLES           2     SINGLE VARIABLES            8
NON ZERO ELEMENTS            15     NON LINEAR N-Z              7
DERIVATIVE POOL              20     CONSTANT POOL              43
CODE LENGTH                 196


GENERATION TIME      =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 14
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Solution Report     SOLVE var2 Using NLP From line 103


               S O L V E      S U M M A R Y

     MODEL   var2                OBJECTIVE  v
     TYPE    NLP                 DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  103

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000
 EVALUATION ERRORS              0             0

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/meanvar/convert.opt"
>>  gams meanvar-scalar.gms
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/meanvar/convert.opt"
Gams      : meanvar-scalar.gms


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 15
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
E x e c u t i o n


----    105 PARAMETER mup                  =        0.115  target expected return for the portfolio
            PARAMETER r                    =        0.098  return of riskless asset
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 16
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Equation Listing    SOLVE sharpe Using NLP From line 130


---- obj2  =E=  objective function

obj2..  (0.5)*v - (1)*m + omega =E= 0 ; (LHS = -1, INFES = 1 ****)
     

---- meanbal  =E=  mean balancing constraint

meanbal..  - m + 0.104585*x(cn) + 0.0979*x(fr) + 0.077075*x(gr) + 0.11288*x(jp) + 0.086245*x(sw) + 0.12443*x(uk) + 0.08124*x(us) =E= 0 ; (LHS = -1, INFES = 1 ****)
     

---- vbal  =E=  variance definition

vbal..  v + (0)*x(cn) + (0)*x(fr) + (0)*x(gr) + (0)*x(jp) + (0)*x(sw) + (0)*x(uk) + (0)*x(us) =E= 0 ; (LHS = 1, INFES = 1 ****)
     

---- budget  =E=  budget constraint

budget..  x(cn) + x(fr) + x(gr) + x(jp) + x(sw) + x(uk) + x(us) =E= 1 ; (LHS = 0, INFES = 1 ****)
     
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 17
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Column Listing      SOLVE sharpe Using NLP From line 130


---- v  variance

v
                (.LO, .L, .UP, .M = 0.01, 1, +INF, 0)
       (0.5)    obj2
        1       vbal


---- m  mean return

m
                (.LO, .L, .UP, .M = 0, 1, +INF, 0)
      (-1)      obj2
       -1       meanbal


---- x  fraction of the portfolio that consists of security i

x(cn)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
        0.1046  meanbal
       (0)      vbal
        1       budget

x(fr)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
        0.0979  meanbal
       (0)      vbal
        1       budget

x(gr)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
        0.0771  meanbal
       (0)      vbal
        1       budget

REMAINING 4 ENTRIES SKIPPED

---- omega  objective

omega
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       obj2

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 18
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Model Statistics    SOLVE sharpe Using NLP From line 130


MODEL STATISTICS

BLOCKS OF EQUATIONS           4     SINGLE EQUATIONS            4
BLOCKS OF VARIABLES           4     SINGLE VARIABLES           10
NON ZERO ELEMENTS            26     NON LINEAR N-Z              9
DERIVATIVE POOL              20     CONSTANT POOL              43
CODE LENGTH                 203


GENERATION TIME      =        0.002 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.002 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 19
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Solution Report     SOLVE sharpe Using NLP From line 130


               S O L V E      S U M M A R Y

     MODEL   sharpe              OBJECTIVE  omega
     TYPE    NLP                 DIRECTION  MAXIMIZE
     SOLVER  CONVERT             FROM LINE  130

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000
 EVALUATION ERRORS              0             0

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/meanvar/convert.opt"
>>  gams meanvar-scalar.gms
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/meanvar/convert.opt"
Gams      : meanvar-scalar.gms


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 21
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Model Analysis      SOLVE var1 Using NLP From line 144



No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 23
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Model Analysis      SOLVE var1 Using NLP From line 152



No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 25
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Model Analysis      SOLVE var1 Using NLP From line 161



No solution returned

No solution returned

No solution returned

No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 29
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
E x e c u t i o n


----    167 PARAMETER xres  portfolios at different points

            minvar          p1          p2          p3          p4      maxvar

mean         1.000       1.000       1.000       1.000       1.000       1.000
var          1.000       1.000       1.000       1.000       1.000       1.000
status      14.000      14.000      14.000      14.000      14.000      14.000



EXECUTION TIME       =        0.000 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


USER: Remigijus Paulavicius, Single User License     S170731:0859AO-LNX
      Imperial College London, Dept. of Chemical Engineering    DC13449
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      /home/renigijus/gams/opt-mod-lib/gamslib/meanvar/meanvar.gms
Output     /home/renigijus/gams/opt-mod-lib/gamslib/meanvar/meanvar-scalar.gms.lst
