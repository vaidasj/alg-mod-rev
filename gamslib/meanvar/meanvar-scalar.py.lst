GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  option NLP=convert;
   2  option NLP=convert;
   3  option NLP=convert;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 2
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
C o m p i l a t i o n


   5   
         The mean-variance model is often used to manage residual risk in
         an elegant way. This class of models is due to H Markowitz who
         introduced these concepts in 1952. Other models like [IMMUN] hedge
         against different kinds of systematic risk.
       
       
         The family of models presented in this file are:
       
         VAR1   Minimum Variance Portfolio Model
                Global Asset Allocation - Efficient Frontier Model
         VAR2   Riskless Asset Minimum Variance Model
         SHARPE Minimum Variance Model using Sharpe Ratio
         MEAN   Mean-Variance Model
         MARG   Mean-Variance Model with Marginal Variance Definition
       
       
      Dahl, H, Meeraus, A, and Zenios, S A, Some Financial Optimization
      Models: Risk Management. In Zenios, S A, Ed, Financial Optimization.
      Cambridge University Press, New York, NY, 1993.
       
  28   
  29   
  30  Set s       investment set        / cn,fr,gr,jp,sw,uk,us,wr /
  31      i(s)    analyzed investments  / cn,fr,gr,jp,sw,uk,us    /;
  32   
  33  Alias (i,j) ;
  34   
  35  * note:  this instance represents investments of hedged
  36  *        foreign securities.
  37   
  38   
  39  Parameter  mu(s)  expected return of security /
  40   
  41      cn     0.1287
  42      fr     0.1096
  43      gr     0.0501
  44      jp     0.1524
  45      sw     0.0763
  46      uk     0.1854
  47      us     0.0620
  48      wr     0.0916 /
  49   
  50   
  51  Table  q(i,j)   covariance matrix
  52   
  53              cn      fr      gr      jp      sw      uk      us
  54      cn    42.18
  55      fr    20.18   70.89
  56      gr    10.88   21.58   25.51
  57      jp     5.30   15.41    9.60   22.33
  58      sw    12.32   23.24   22.63   10.32   30.01
  59      uk    23.84   23.80   13.22   10.46   16.36   42.23
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 3
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
C o m p i l a t i o n


  60      us    17.41   12.62    4.70    1.00    7.20    9.90   16.42 ;
  61   
  62  q(i,j)$(ord(j) gt ord(i)) = q(j,i) ;
  63   
  64   
  65  Scalar  mup   target expected return for the portfolio   / 0.115 /;
  66   
  67   
  68  Variables
  69      v          variance
  70      m          mean return
  71      x(i)       fraction of the portfolio that consists of security i ;
  72   
  73  Positive Variable  x;
  74   
  75  x.up(i) = 1;
  76  Equations
  77      vbal        variance definition
  78      mbal        mean balancing constraint
  79      budget      budget constraint ;
  80   
  81    vbal..     v =e= sum((i,j), x(i)*q(i,j)*x(j)) ;
  82   
  83    mbal..     m =e= sum(i, mu(i)*x(i)) ;
  84   
  85    budget..   sum(i, x(i)) =e= 1 ;
  86   
  87  Model var1 / vbal, mbal, budget / ;
  88   
  89  m.fx = mup;   Solve var1 minimizing v using nlp ;
  90   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 4
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
riskless asset minimum variance model


  92   
  93  Scalar  r   return of riskless asset  / 0.0979 /;
  94   
  95  Equation
  96      riskless   mean balancing constraint using riskless rate ;
  97   
  98   
  99    riskless..  sum(i, (mu(i)-r)*x(i))  =e=  mup - r ;
 100   
 101   
 102   Model var2 / vbal, riskless / ;
 103   
 104   Solve var2 minimizing v using nlp ;
 105   
 106   Display  mup, r;
 107   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 5
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
minimum variance model using sharpe ratio


 109   
 110  Set  h(s)    historical investments    / wr /;
 111   
 112  Scalar  sf       shrinkage factor ;
 113   
 114  Variable
 115    omega        objective
 116   
 117  Equations
 118    obj2         objective function
 119    meanbal      mean balancing constraint;
 120   
 121   
 122    obj2..       omega  =e=  m / sqrt(v);
 123   
 124    meanbal..    sum(i, x(i)*(sf*sum(h, mu(h)) + (1-sf)*mu(i)))  =e=  m ;
 125   
 126   
 127   Model sharpe   / obj2, meanbal, vbal, budget / ;
 128   
 129     m.l = 1 ;  v.lo = 0.01;  v.l = 1 ;   sf = .65 ; m.lo = 0; m.up = inf;
 130   
 131  Solve sharpe maximizing omega using nlp ;
 132   
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 6
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
global asset allocation - efficient frontier model


 134   
 135  Set  p       efficient frontier points     / minvar, p1*p4, maxvar /
 136       pp      efficient frontier points     /         p1*p4         /
 137   
 138  Scalars     vmin     minimum variance
 139              vmax     maximum variance ;
 140   
 141  Parameter   xres(*,p) portfolios at different points;
 142   
 143  Option limcol=0, limrow=0; var1.solprint=2;
 144  Loop(p('maxvar'),
 145     Solve var1 maximize m using nlp ;
 146     xres(i,p)         = x.l(i);
 147     xres('mean',p)    = m.l;
 148     xres('var',p)     = v.l;
 149     xres('status',p)  = var1.modelstat;
 150     vmax = v.l; );
 151   
 152  Loop(p('minvar'),
 153     Solve var1 minimize v using nlp ;
 154     xres(i,p)         = x.l(i);
 155     xres('mean',p)    = m.l;
 156     xres('var',p)     = v.l;
 157     xres('status',p)  = var1.modelstat;
 158     vmin = v.l; );
 159   
 160  Loop(p(pp),
 161     v.fx = vmin + (vmax-vmin)/(card(pp)+1)*ord(pp) ;
 162     Solve var1 maximizing m using nlp ;
 163     xres(i,p)         = x.l(i);
 164     xres('mean',p)    = m.l;
 165     xres('var',p)     = v.l;
 166     xres('status',p)  = var1.modelstat; );
 167   
 168  Display xres;
 169   
 170   


COMPILATION TIME     =        0.002 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 7
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Equation Listing    SOLVE var1 Using NLP From line 89


---- vbal  =E=  variance definition

vbal..  v + (0)*x(cn) + (0)*x(fr) + (0)*x(gr) + (0)*x(jp) + (0)*x(sw) + (0)*x(uk) + (0)*x(us) =E= 0 ; (LHS = 0)
     

---- mbal  =E=  mean balancing constraint

mbal..  m - 0.1287*x(cn) - 0.1096*x(fr) - 0.0501*x(gr) - 0.1524*x(jp) - 0.0763*x(sw) - 0.1854*x(uk) - 0.062*x(us) =E= 0 ; (LHS = 0.115, INFES = 0.115 ****)
     

---- budget  =E=  budget constraint

budget..  x(cn) + x(fr) + x(gr) + x(jp) + x(sw) + x(uk) + x(us) =E= 1 ; (LHS = 0, INFES = 1 ****)
     
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 8
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Column Listing      SOLVE var1 Using NLP From line 89


---- v  variance

v
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       vbal


---- m  mean return

m
                (.LO, .L, .UP, .M = 0.115, 0.115, 0.115, 0)
        1       mbal


---- x  fraction of the portfolio that consists of security i

x(cn)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       (0)      vbal
       -0.1287  mbal
        1       budget

x(fr)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       (0)      vbal
       -0.1096  mbal
        1       budget

x(gr)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       (0)      vbal
       -0.0501  mbal
        1       budget

REMAINING 4 ENTRIES SKIPPED
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:24:51 Page 9
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Model Statistics    SOLVE var1 Using NLP From line 89


MODEL STATISTICS

BLOCKS OF EQUATIONS           3     SINGLE EQUATIONS            3
BLOCKS OF VARIABLES           3     SINGLE VARIABLES            9
NON ZERO ELEMENTS            23     NON LINEAR N-Z              7
DERIVATIVE POOL              20     CONSTANT POOL              43
CODE LENGTH                 196


GENERATION TIME      =        0.003 SECONDS      4 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.003 SECONDS      4 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 10
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Solution Report     SOLVE var1 Using NLP From line 89


               S O L V E      S U M M A R Y

     MODEL   var1                OBJECTIVE  v
     TYPE    NLP                 DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  89

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000
 EVALUATION ERRORS              0             0

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/meanvar/convert.opt"
>>  pyomo meanvar-scalar.py
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/meanvar/convert.opt"
Pyomo     : meanvar-scalar.py


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 11
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Equation Listing    SOLVE var2 Using NLP From line 104


---- vbal  =E=  variance definition

vbal..  v + (0)*x(cn) + (0)*x(fr) + (0)*x(gr) + (0)*x(jp) + (0)*x(sw) + (0)*x(uk) + (0)*x(us) =E= 0 ; (LHS = 0)
     

---- riskless  =E=  mean balancing constraint using riskless rate

riskless..  0.0308*x(cn) + 0.0117*x(fr) - 0.0478*x(gr) + 0.0545*x(jp) - 0.0216*x(sw) + 0.0875*x(uk) - 0.0359*x(us) =E= 0.0171 ; (LHS = 0, INFES = 0.0171 ****)
     
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 12
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Column Listing      SOLVE var2 Using NLP From line 104


---- v  variance

v
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       vbal


---- x  fraction of the portfolio that consists of security i

x(cn)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       (0)      vbal
        0.0308  riskless

x(fr)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       (0)      vbal
        0.0117  riskless

x(gr)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       (0)      vbal
       -0.0478  riskless

REMAINING 4 ENTRIES SKIPPED
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 13
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Model Statistics    SOLVE var2 Using NLP From line 104


MODEL STATISTICS

BLOCKS OF EQUATIONS           2     SINGLE EQUATIONS            2
BLOCKS OF VARIABLES           2     SINGLE VARIABLES            8
NON ZERO ELEMENTS            15     NON LINEAR N-Z              7
DERIVATIVE POOL              20     CONSTANT POOL              43
CODE LENGTH                 196


GENERATION TIME      =        0.004 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.004 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 14
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Solution Report     SOLVE var2 Using NLP From line 104


               S O L V E      S U M M A R Y

     MODEL   var2                OBJECTIVE  v
     TYPE    NLP                 DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  104

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000
 EVALUATION ERRORS              0             0

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/meanvar/convert.opt"
>>  pyomo meanvar-scalar.py
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/meanvar/convert.opt"
Pyomo     : meanvar-scalar.py


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 15
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
E x e c u t i o n


----    106 PARAMETER mup                  =        0.115  target expected return for the portfolio
            PARAMETER r                    =        0.098  return of riskless asset
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 16
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Equation Listing    SOLVE sharpe Using NLP From line 131


---- obj2  =E=  objective function

obj2..  (0.5)*v - (1)*m + omega =E= 0 ; (LHS = -1, INFES = 1 ****)
     

---- meanbal  =E=  mean balancing constraint

meanbal..  - m + 0.104585*x(cn) + 0.0979*x(fr) + 0.077075*x(gr) + 0.11288*x(jp) + 0.086245*x(sw) + 0.12443*x(uk) + 0.08124*x(us) =E= 0 ; (LHS = -1, INFES = 1 ****)
     

---- vbal  =E=  variance definition

vbal..  v + (0)*x(cn) + (0)*x(fr) + (0)*x(gr) + (0)*x(jp) + (0)*x(sw) + (0)*x(uk) + (0)*x(us) =E= 0 ; (LHS = 1, INFES = 1 ****)
     

---- budget  =E=  budget constraint

budget..  x(cn) + x(fr) + x(gr) + x(jp) + x(sw) + x(uk) + x(us) =E= 1 ; (LHS = 0, INFES = 1 ****)
     
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 17
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Column Listing      SOLVE sharpe Using NLP From line 131


---- v  variance

v
                (.LO, .L, .UP, .M = 0.01, 1, +INF, 0)
       (0.5)    obj2
        1       vbal


---- m  mean return

m
                (.LO, .L, .UP, .M = 0, 1, +INF, 0)
      (-1)      obj2
       -1       meanbal


---- x  fraction of the portfolio that consists of security i

x(cn)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
        0.1046  meanbal
       (0)      vbal
        1       budget

x(fr)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
        0.0979  meanbal
       (0)      vbal
        1       budget

x(gr)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
        0.0771  meanbal
       (0)      vbal
        1       budget

REMAINING 4 ENTRIES SKIPPED

---- omega  objective

omega
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       obj2

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 18
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Model Statistics    SOLVE sharpe Using NLP From line 131


MODEL STATISTICS

BLOCKS OF EQUATIONS           4     SINGLE EQUATIONS            4
BLOCKS OF VARIABLES           4     SINGLE VARIABLES           10
NON ZERO ELEMENTS            26     NON LINEAR N-Z              9
DERIVATIVE POOL              20     CONSTANT POOL              43
CODE LENGTH                 203


GENERATION TIME      =        0.002 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.003 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 19
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Solution Report     SOLVE sharpe Using NLP From line 131


               S O L V E      S U M M A R Y

     MODEL   sharpe              OBJECTIVE  omega
     TYPE    NLP                 DIRECTION  MAXIMIZE
     SOLVER  CONVERT             FROM LINE  131

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000
 EVALUATION ERRORS              0             0

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/meanvar/convert.opt"
>>  pyomo meanvar-scalar.py
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/meanvar/convert.opt"
Pyomo     : meanvar-scalar.py


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 21
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Model Analysis      SOLVE var1 Using NLP From line 145



No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 23
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Model Analysis      SOLVE var1 Using NLP From line 153



No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 25
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
Model Analysis      SOLVE var1 Using NLP From line 162



No solution returned

No solution returned

No solution returned

No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:24:51 Page 29
Financial Optimization: Risk Management (MEANVAR,SEQ=112)
E x e c u t i o n


----    168 PARAMETER xres  portfolios at different points

            minvar          p1          p2          p3          p4      maxvar

mean         1.000       1.000       1.000       1.000       1.000       1.000
var          1.000       1.000       1.000       1.000       1.000       1.000
status      14.000      14.000      14.000      14.000      14.000      14.000



EXECUTION TIME       =        0.000 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


USER: Remigijus Paulavicius, Single User License     S170731:0859AO-LNX
      Imperial College London, Dept. of Chemical Engineering    DC13449
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      /home/renigijus/gams/opt-mod-lib/gamslib/meanvar/meanvar.gms
Output     /home/renigijus/gams/opt-mod-lib/gamslib/meanvar/meanvar-scalar.py.lst
