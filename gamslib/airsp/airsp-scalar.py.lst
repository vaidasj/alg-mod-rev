GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:17 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  option LP=convert;
   2  option LP=convert;
   3  option LP=convert;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:17 Page 2
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
C o m p i l a t i o n


   5   
       
         The objective of this model is to allocate aircrafts to routes to maximize
         the expected profit when traffic demand is uncertain. Three different
         formulations are presented:
       
           * the original lambda formulation
           * a stochastic equivalent with sampling
           * a stochastic equivalent with all scenarios
       
       
      Dantzig, G B, Chapter 28. In Linear Programming and Extensions.
      Princeton University Press, Princeton, New Jersey, 1963.
       
  21   
  22   
  23  Set i     aircraft types and unassigned passengers / a, b, c, d /
  24      j     assigned and unassigned routes           / route-1, route-2, route-3, route-4, route-5 /
  25      h     demand states                            /    1*5   /
  26      ss    nodes                                    / s1*s1000  /
  27      s(ss) actual ord temp nodes
  28      ij(i,j) possible assignments
  29      jh(j,h) possible demand states
  30   
  31  Alias(h,hp,h1,h2,h3,h4,h5);
  32   
  33  Table  dd(j,h)     demand distribution on route j
  34   
  35               1       2      3      4      5
  36  route-1    200     220    250    270    300
  37  route-2     50     150
  38  route-3    140     160    180    200    220
  39  route-4     10      50     80    100    340
  40  route-5    580     600    620
  41   
  42  Table  lambda(j,h)  probability of demand state h on route j
  43   
  44                1      2      3      4      5
  45  route-1      .2     .05    .35    .2     .2
  46  route-2      .3     .7
  47  route-3      .1     .2     .4     .2     .1
  48  route-4      .2     .2     .3     .2     .1
  49  route-5      .1     .8     .1
  50   
  51  Table  c(i,j)       costs per aircraft (1000s)
  52   
  53           route-1    route-2    route-3     route-4     route-5
  54  a          18         21         18          16           10
  55  b                     15         16          14            9
  56  c                     10                      9            6
  57  d          17         16         17          15           10
  58   
  59  Table  p(i,j)    passenger capacity of aircraft i on route j
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:17 Page 3
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
C o m p i l a t i o n


  60   
  61          route-1     route-2     route-3     route-4     route-5
  62  a          16         15          28          23          81
  63  b                     10          14          15          57
  64  c                      5                       7          29
  65  d           9         11          22          17          55
  66   
  67  Parameter aa(i)       aircraft availability               / a   10, b   19, c   25, d   15 /
  68            k(j)        revenue lost (1000 per 100  bumped) / (route-1,route-2) 13, (route-3,route-4) 7, route-5 1 /
  69            ed(j)       expected demand
  70            deltb(j,h)  incremental demand
  71            gamma(j,h)  probability of demand segment
  72            drand(j,ss) sampled demand
  73            sample(j)   sampled mean
  74            num         temp value
  75            prob(ss)    scenario probability
  76            probxx      temp probability value;
  77   
  78  ij(i,j) = p(i,j);
  79  jh(j,h) = lambda(j,h);
  80   
  81  ed(j)          = sum(h, lambda(j,h)*dd(j,h));
  82  deltb(jh(j,h)) = dd(j,h)-dd(j,h-1);
  83  gamma(j,h)     = sum(hp$(ord(hp) >= ord(h)), lambda(j,hp));
  84   
  85   
  86  display deltb,gamma,ed;
  87   
  88  Positive Variables
  89     x(i,j)    number of aircraft type i assigned to route j
  90     z(j)      allocated capacity
  91     bh(j,h)   passengers bumped
  92     bs(j,ss)  passengers bumped
  93   
  94  Variables phi     total expected costs
  95            oc      operating cost
  96  Equations
  97     ab(i)     aircraft balance
  98     cb(j)     capacity balance
  99     dbh(j,h)  demand balance
 100     dbs(j,ss) demand balance
 101     ocd       operating cost definition
 102     objh      objective function
 103     objs      objective function;
 104   
 105   ab(i)..   sum(ij(i,j), x(ij)) =l= aa(i);
 106   
 107   cb(j)..   z(j) =e= sum(ij(i,j), p(ij)*x(ij));
 108   
 109   dbh(j,h).. dd(j,h)    - bh(j,h) =l= z(j);
 110   dbs(j,s).. drand(j,s) - bs(j,s) =l= z(j);
 111   
 112   ocd..     oc =e= sum((i,j), c(i,j)*x(i,j));
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:17 Page 4
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
C o m p i l a t i o n


 113   
 114   objh ..    phi =e= oc + sum(j, k(j)*sum(jh(j,h),lambda(j,h)*bh(j,h)));
 115   objs..     phi =e= oc + sum(j, k(j)*sum(s, prob(s)*bs(j,s)));
 116   
 117   Model  alloch aircraft allocation  / ab, cb, dbh, ocd, objh /
 118          allocs aircraft allocation  / ab, cb, dbs, ocd, objs /;
 119   
 120  option limcol=0,limrow=0,solprint=off;
 121   
 122  parameter rep quick report;
 123   
 124  solve alloch minimizing phi using lp;
 125  rep(i,j,'alloch') = x.l(i,j);
 126  rep('ev',' ','alloch') = phi.l;
 127   
 128  * set up a sample of some size
 129   
 130  s(ss) = (ord(ss) <= 100);
 131   
 132  loop((j,s),
 133     num = uniform(0,1);
 134     drand(j,s) =  sum(jh(j,h)$(num < gamma(jh)), deltb(j,h)));
 135  prob(s) = 1/card(s);
 136  sample(j) = sum(s, drand(j,s))/card(s);
 137   
 138  display sample;
 139   
 140  solve allocs minimizing phi using lp;
 141  rep(i,j,'allocs') = x.l(i,j);
 142  rep('ev',' ','allocs') = phi.l;
 143   
 144  *  enumerate all scenarios
 145   
 146  prob(s) = 0;
 147  s(ss)   = no;
 148  s('s1') = yes;
 149  loop((h1,h2,h3,h4,h5),
 150     probxx =  lambda('route-1',h1)
 151              *lambda('route-2',h2)
 152              *lambda('route-3',h3)
 153              *lambda('route-4',h4)
 154              *lambda('route-5',h5);
 155     if(probxx,
 156        drand('route-1',s) = dd('route-1',h1);
 157        drand('route-2',s) = dd('route-2',h2);
 158        drand('route-3',s) = dd('route-3',h3);
 159        drand('route-4',s) = dd('route-4',h4);
 160        drand('route-5',s) = dd('route-5',h5);
 161        prob(s) = probxx;
 162  *     s(ss) = s(ss-1)   this looks nice but is very slow
 163        s(ss+1)$s(ss) = yes;
 164        s(ss-1)$s(ss) = no ) );
 165  s(ss) = prob(ss);
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:17 Page 5
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
C o m p i l a t i o n


 166   
 167  solve allocs minimizing phi using lp;
 168  rep(i,j,'allocss') = x.l(i,j);
 169  rep('ev',' ','allocss') = phi.l;
 170   
 171  display rep;


COMPILATION TIME     =        0.001 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:17 Page 6
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
E x e c u t i o n


----     86 PARAMETER deltb  incremental demand

                  1           2           3           4           5

route-1     200.000      20.000      30.000      20.000      30.000
route-2      50.000     100.000
route-3     140.000      20.000      20.000      20.000      20.000
route-4      10.000      40.000      30.000      20.000     240.000
route-5     580.000      20.000      20.000


----     86 PARAMETER gamma  probability of demand segment

                  1           2           3           4           5

route-1       1.000       0.800       0.750       0.400       0.200
route-2       1.000       0.700
route-3       1.000       0.900       0.700       0.300       0.100
route-4       1.000       0.800       0.600       0.300       0.100
route-5       1.000       0.900       0.100


----     86 PARAMETER ed  expected demand

route-1 252.500,    route-2 120.000,    route-3 180.000,    route-4  90.000,    route-5 600.000

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:17 Page 7
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
Model Statistics    SOLVE alloch Using LP From line 124


MODEL STATISTICS

BLOCKS OF EQUATIONS           5     SINGLE EQUATIONS           36
BLOCKS OF VARIABLES           5     SINGLE VARIABLES           49
NON ZERO ELEMENTS           129


GENERATION TIME      =        0.002 SECONDS      4 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.003 SECONDS      4 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:17 Page 8
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
Solution Report     SOLVE alloch Using LP From line 124


               S O L V E      S U M M A R Y

     MODEL   alloch              OBJECTIVE  phi
     TYPE    LP                  DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  124

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/airsp/convert.opt"
>>  pyomo airsp-scalar.py
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/airsp/convert.opt"
Pyomo     : airsp-scalar.py


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:17 Page 9
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
E x e c u t i o n


----    138 PARAMETER sample  sampled mean

route-1 261.400,    route-2 133.000,    route-3 177.400,    route-4  98.600,    route-5 600.000

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:32:17 Page 10
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
Model Statistics    SOLVE allocs Using LP From line 140


MODEL STATISTICS

BLOCKS OF EQUATIONS           5     SINGLE EQUATIONS          511
BLOCKS OF VARIABLES           5     SINGLE VARIABLES          524
NON ZERO ELEMENTS         1,559


GENERATION TIME      =        0.003 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.003 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:32:17 Page 11
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
Solution Report     SOLVE allocs Using LP From line 140


               S O L V E      S U M M A R Y

     MODEL   allocs              OBJECTIVE  phi
     TYPE    LP                  DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  140

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/airsp/convert.opt"
>>  pyomo airsp-scalar.py
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/airsp/convert.opt"
Pyomo     : airsp-scalar.py


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:32:17 Page 12
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
Model Statistics    SOLVE allocs Using LP From line 167


MODEL STATISTICS

BLOCKS OF EQUATIONS           5     SINGLE EQUATIONS        3,761
BLOCKS OF VARIABLES           5     SINGLE VARIABLES        3,774
NON ZERO ELEMENTS        11,309


GENERATION TIME      =        0.010 SECONDS      4 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.024 SECONDS      4 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:32:17 Page 13
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
Solution Report     SOLVE allocs Using LP From line 167


               S O L V E      S U M M A R Y

     MODEL   allocs              OBJECTIVE  phi
     TYPE    LP                  DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  167

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/airsp/convert.opt"
>>  pyomo airsp-scalar.py
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/airsp/convert.opt"
Pyomo     : airsp-scalar.py


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:32:17 Page 14
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
E x e c u t i o n


----    171 PARAMETER rep  quick report

                      ( ALL       0.000 )



EXECUTION TIME       =        0.000 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


USER: Remigijus Paulavicius, Single User License     S170731:0859AO-LNX
      Imperial College London, Dept. of Chemical Engineering    DC13449
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      /home/renigijus/gams/opt-mod-lib/gamslib/airsp/airsp.gms
Output     /home/renigijus/gams/opt-mod-lib/gamslib/airsp/airsp-scalar.py.lst
