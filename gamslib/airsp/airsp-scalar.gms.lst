GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:16 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  option LP=convert;
   2  option LP=convert;
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:16 Page 2
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
C o m p i l a t i o n


   4   
       
         The objective of this model is to allocate aircrafts to routes to maximize
         the expected profit when traffic demand is uncertain. Three different
         formulations are presented:
       
           * the original lambda formulation
           * a stochastic equivalent with sampling
           * a stochastic equivalent with all scenarios
       
       
      Dantzig, G B, Chapter 28. In Linear Programming and Extensions.
      Princeton University Press, Princeton, New Jersey, 1963.
       
  20   
  21   
  22  Set i     aircraft types and unassigned passengers / a, b, c, d /
  23      j     assigned and unassigned routes           / route-1, route-2, route-3, route-4, route-5 /
  24      h     demand states                            /    1*5   /
  25      ss    nodes                                    / s1*s1000  /
  26      s(ss) actual ord temp nodes
  27      ij(i,j) possible assignments
  28      jh(j,h) possible demand states
  29   
  30  Alias(h,hp,h1,h2,h3,h4,h5);
  31   
  32  Table  dd(j,h)     demand distribution on route j
  33   
  34               1       2      3      4      5
  35  route-1    200     220    250    270    300
  36  route-2     50     150
  37  route-3    140     160    180    200    220
  38  route-4     10      50     80    100    340
  39  route-5    580     600    620
  40   
  41  Table  lambda(j,h)  probability of demand state h on route j
  42   
  43                1      2      3      4      5
  44  route-1      .2     .05    .35    .2     .2
  45  route-2      .3     .7
  46  route-3      .1     .2     .4     .2     .1
  47  route-4      .2     .2     .3     .2     .1
  48  route-5      .1     .8     .1
  49   
  50  Table  c(i,j)       costs per aircraft (1000s)
  51   
  52           route-1    route-2    route-3     route-4     route-5
  53  a          18         21         18          16           10
  54  b                     15         16          14            9
  55  c                     10                      9            6
  56  d          17         16         17          15           10
  57   
  58  Table  p(i,j)    passenger capacity of aircraft i on route j
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:16 Page 3
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
C o m p i l a t i o n


  59   
  60          route-1     route-2     route-3     route-4     route-5
  61  a          16         15          28          23          81
  62  b                     10          14          15          57
  63  c                      5                       7          29
  64  d           9         11          22          17          55
  65   
  66  Parameter aa(i)       aircraft availability               / a   10, b   19, c   25, d   15 /
  67            k(j)        revenue lost (1000 per 100  bumped) / (route-1,route-2) 13, (route-3,route-4) 7, route-5 1 /
  68            ed(j)       expected demand
  69            deltb(j,h)  incremental demand
  70            gamma(j,h)  probability of demand segment
  71            drand(j,ss) sampled demand
  72            sample(j)   sampled mean
  73            num         temp value
  74            prob(ss)    scenario probability
  75            probxx      temp probability value;
  76   
  77  ij(i,j) = p(i,j);
  78  jh(j,h) = lambda(j,h);
  79   
  80  ed(j)          = sum(h, lambda(j,h)*dd(j,h));
  81  deltb(jh(j,h)) = dd(j,h)-dd(j,h-1);
  82  gamma(j,h)     = sum(hp$(ord(hp) >= ord(h)), lambda(j,hp));
  83   
  84   
  85  display deltb,gamma,ed;
  86   
  87  Positive Variables
  88     x(i,j)    number of aircraft type i assigned to route j
  89     z(j)      allocated capacity
  90     bh(j,h)   passengers bumped
  91     bs(j,ss)  passengers bumped
  92   
  93  Variables phi     total expected costs
  94            oc      operating cost
  95  Equations
  96     ab(i)     aircraft balance
  97     cb(j)     capacity balance
  98     dbh(j,h)  demand balance
  99     dbs(j,ss) demand balance
 100     ocd       operating cost definition
 101     objh      objective function
 102     objs      objective function;
 103   
 104   ab(i)..   sum(ij(i,j), x(ij)) =l= aa(i);
 105   
 106   cb(j)..   z(j) =e= sum(ij(i,j), p(ij)*x(ij));
 107   
 108   dbh(j,h).. dd(j,h)    - bh(j,h) =l= z(j);
 109   dbs(j,s).. drand(j,s) - bs(j,s) =l= z(j);
 110   
 111   ocd..     oc =e= sum((i,j), c(i,j)*x(i,j));
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:16 Page 4
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
C o m p i l a t i o n


 112   
 113   objh ..    phi =e= oc + sum(j, k(j)*sum(jh(j,h),lambda(j,h)*bh(j,h)));
 114   objs..     phi =e= oc + sum(j, k(j)*sum(s, prob(s)*bs(j,s)));
 115   
 116   Model  alloch aircraft allocation  / ab, cb, dbh, ocd, objh /
 117          allocs aircraft allocation  / ab, cb, dbs, ocd, objs /;
 118   
 119  option limcol=0,limrow=0,solprint=off;
 120   
 121  parameter rep quick report;
 122   
 123  solve alloch minimizing phi using lp;
 124  rep(i,j,'alloch') = x.l(i,j);
 125  rep('ev',' ','alloch') = phi.l;
 126   
 127  * set up a sample of some size
 128   
 129  s(ss) = (ord(ss) <= 100);
 130   
 131  loop((j,s),
 132     num = uniform(0,1);
 133     drand(j,s) =  sum(jh(j,h)$(num < gamma(jh)), deltb(j,h)));
 134  prob(s) = 1/card(s);
 135  sample(j) = sum(s, drand(j,s))/card(s);
 136   
 137  display sample;
 138   
 139  solve allocs minimizing phi using lp;
 140  rep(i,j,'allocs') = x.l(i,j);
 141  rep('ev',' ','allocs') = phi.l;
 142   
 143  *  enumerate all scenarios
 144   
 145  prob(s) = 0;
 146  s(ss)   = no;
 147  s('s1') = yes;
 148  loop((h1,h2,h3,h4,h5),
 149     probxx =  lambda('route-1',h1)
 150              *lambda('route-2',h2)
 151              *lambda('route-3',h3)
 152              *lambda('route-4',h4)
 153              *lambda('route-5',h5);
 154     if(probxx,
 155        drand('route-1',s) = dd('route-1',h1);
 156        drand('route-2',s) = dd('route-2',h2);
 157        drand('route-3',s) = dd('route-3',h3);
 158        drand('route-4',s) = dd('route-4',h4);
 159        drand('route-5',s) = dd('route-5',h5);
 160        prob(s) = probxx;
 161  *     s(ss) = s(ss-1)   this looks nice but is very slow
 162        s(ss+1)$s(ss) = yes;
 163        s(ss-1)$s(ss) = no ) );
 164  s(ss) = prob(ss);
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:16 Page 5
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
C o m p i l a t i o n


 165   
 166  solve allocs minimizing phi using lp;
 167  rep(i,j,'allocss') = x.l(i,j);
 168  rep('ev',' ','allocss') = phi.l;
 169   
 170  display rep;


COMPILATION TIME     =        0.002 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:16 Page 6
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
E x e c u t i o n


----     85 PARAMETER deltb  incremental demand

                  1           2           3           4           5

route-1     200.000      20.000      30.000      20.000      30.000
route-2      50.000     100.000
route-3     140.000      20.000      20.000      20.000      20.000
route-4      10.000      40.000      30.000      20.000     240.000
route-5     580.000      20.000      20.000


----     85 PARAMETER gamma  probability of demand segment

                  1           2           3           4           5

route-1       1.000       0.800       0.750       0.400       0.200
route-2       1.000       0.700
route-3       1.000       0.900       0.700       0.300       0.100
route-4       1.000       0.800       0.600       0.300       0.100
route-5       1.000       0.900       0.100


----     85 PARAMETER ed  expected demand

route-1 252.500,    route-2 120.000,    route-3 180.000,    route-4  90.000,    route-5 600.000

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:16 Page 7
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
Model Statistics    SOLVE alloch Using LP From line 123


MODEL STATISTICS

BLOCKS OF EQUATIONS           5     SINGLE EQUATIONS           36
BLOCKS OF VARIABLES           5     SINGLE VARIABLES           49
NON ZERO ELEMENTS           129


GENERATION TIME      =        0.002 SECONDS      4 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.002 SECONDS      4 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:16 Page 8
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
Solution Report     SOLVE alloch Using LP From line 123


               S O L V E      S U M M A R Y

     MODEL   alloch              OBJECTIVE  phi
     TYPE    LP                  DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  123

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/airsp/convert.opt"
>>  gams airsp-scalar.gms
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/airsp/convert.opt"
Gams      : airsp-scalar.gms


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                      12/13/18 10:32:16 Page 9
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
E x e c u t i o n


----    137 PARAMETER sample  sampled mean

route-1 261.400,    route-2 133.000,    route-3 177.400,    route-4  98.600,    route-5 600.000

GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:32:16 Page 10
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
Model Statistics    SOLVE allocs Using LP From line 139


MODEL STATISTICS

BLOCKS OF EQUATIONS           5     SINGLE EQUATIONS          511
BLOCKS OF VARIABLES           5     SINGLE VARIABLES          524
NON ZERO ELEMENTS         1,559


GENERATION TIME      =        0.003 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.004 SECONDS      3 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:32:16 Page 11
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
Solution Report     SOLVE allocs Using LP From line 139


               S O L V E      S U M M A R Y

     MODEL   allocs              OBJECTIVE  phi
     TYPE    LP                  DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  139

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/airsp/convert.opt"
>>  gams airsp-scalar.gms
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/airsp/convert.opt"
Gams      : airsp-scalar.gms


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:32:16 Page 12
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
Model Statistics    SOLVE allocs Using LP From line 166


MODEL STATISTICS

BLOCKS OF EQUATIONS           5     SINGLE EQUATIONS        3,761
BLOCKS OF VARIABLES           5     SINGLE VARIABLES        3,774
NON ZERO ELEMENTS        11,309


GENERATION TIME      =        0.009 SECONDS      4 MB  24.7.4 r58773 LEX-LEG


EXECUTION TIME       =        0.019 SECONDS      4 MB  24.7.4 r58773 LEX-LEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:32:16 Page 13
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
Solution Report     SOLVE allocs Using LP From line 166


               S O L V E      S U M M A R Y

     MODEL   allocs              OBJECTIVE  phi
     TYPE    LP                  DIRECTION  MINIMIZE
     SOLVER  CONVERT             FROM LINE  166

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      14 No Solution Returned     
**** OBJECTIVE VALUE                0.0000

 RESOURCE USAGE, LIMIT          0.000      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

Convert 2.0      24.7.4 r58773 Released Sep 19, 2016 LEG x86 64bit/Linux      

--- Using Option File
Reading parameter(s) from "/home/renigijus/gams/opt-mod-lib/gamslib/airsp/convert.opt"
>>  gams airsp-scalar.gms
Finished reading from "/home/renigijus/gams/opt-mod-lib/gamslib/airsp/convert.opt"
Gams      : airsp-scalar.gms


No solution returned
GAMS 24.7.4  r58773 Released Sep 19, 2016 LEX-LEG x86 64bit/Linux                                                                                                                                                                     12/13/18 10:32:16 Page 14
Aircraft allocation - stochastic optimization (AIRSP,SEQ=189)
E x e c u t i o n


----    170 PARAMETER rep  quick report

                      ( ALL       0.000 )



EXECUTION TIME       =        0.000 SECONDS      3 MB  24.7.4 r58773 LEX-LEG


USER: Remigijus Paulavicius, Single User License     S170731:0859AO-LNX
      Imperial College London, Dept. of Chemical Engineering    DC13449
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      /home/renigijus/gams/opt-mod-lib/gamslib/airsp/airsp.gms
Output     /home/renigijus/gams/opt-mod-lib/gamslib/airsp/airsp-scalar.gms.lst
