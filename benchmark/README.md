# Algebraic Modeling Language Benchmarks

Three different algebraic modeling languages AMPL, GAMS and Pyomo were benchmarked. The base of the benchmark was problems available in GAMS Model library converted to scalar models in each of the analyzed modeling languages.

Two types of benchmarks were conducted:

1. Model instance creation time benchmark - to measure how long it take to load a model instance in a specific algebraic modeling language.
2. AMPL presolver benchmark - to analyze the efficient of AMPL presolver.

## Model Instance Creation Time Benchmark

### Benchmark Methodology

1. Load model instance of a problem written in the native algebraic modeling language (_AMPL, GAMS, Pyomo_) of the modeling system.
2. Export loaded model instance to the solver compatible input format. [NL](https://en.wikipedia.org/wiki/Nl_(format)) or NLC formats are used.
3. Measure total (loading and exporting) execution time.

### Issues Found

- **12** AMPL models generated by GAMS Convert command were invalid, thus loading of them as AMPL model instances failed.
- **29** Pyomo models generated by GAMS Convert command were invalid, thus loading of them as Pyomo model instances failed.

### Results

Detailed benchmark results for each of the models can be found [here](model-loading-times.md).

**Average loading times by model problem type in milliseconds**: 

| Type      | Models  | AMPL   | GAMS    | Pyomo   |
| --------- | ------- | ------ | ------- | ------- |
| CNS       | 4       | 15     | 234     | 838     |
| DNLP      | 5       | 10     | 227     | 719     |
| LP        | 57      | 19     | 240     | 841     |
| MCP       | 13      | 14     | 234     | 764     |
| MINLP     | 17      | 11     | 242     | 745     |
| MIP       | 57      | 22     | 259     | 936     |
| MIQCP     | 4       | 11     | 238     | 852     |
| MPEC      | 1       | 10     | 236     | 669     |
| NLP       | 101     | 20     | 262     | 826     |
| QCP       | 10      | 51     | 364     | 1344    |
| **Total** | **269** | **20** | **256** | **862** |

> Note: averages were calculated only for models which were successfully loaded by all modeling systems.

## Presolve Benchmark

AMPL is the only of the benchmarked modeling language capable of performing model presolving before calling the solver. GAMS and Pyomo are only capable of using presolving functionality provided by the solvers themselves.

### Presolve Usage

Full AMPL presolve usage statistics can be found [here](ampl-presolve-stats.md).

AMPL presolver simplified model instances in **52.8%** of the cases, out of which:

* determined 5 models to be not feasible
* on avarage eliminated 18.42% of constraints and 10.73% of variables

**AMPL Presolver characteristics by model problem type**: 

| Type      | Models  | Presolved | Presolved (%) | Not Feasible | Constrains reduced | Variables reduced |
| --------- | ------- | --------- | ------------- | ------------ | ------------------ | ----------------- |
| CNS       | 4       | 4         | 100.00%       | 0            | 14.63%             | 31.39%            |
| DNLP      | 5       | 1         | 20.00%        | 0            | 0.00%              | 7.41%             |
| LP        | 57      | 21        | 36.84%        | 0            | 17.81%             | 9.66%             |
| MCP       | 19      | 17        | 89.47%        | 0            | 47.00%             | 8.56%             |
| MINLP     | 21      | 13        | 61.90%        | 1            | 16.32%             | 9.30%             |
| MIP       | 61      | 37        | 60.66%        | 0            | 19.06%             | 11.50%            |
| MIQCP     | 5       | 3         | 60.00%        | 2            | 0.00%              | 2.38%             |
| MPEC      | 1       | 1         | 100.00%       | 0            | 50.00%             | 0.00%             |
| NLP       | 101     | 48        | 47.52%        | 2            | 9.71%              | 11.55%            |
| QCP       | 10      | 6         | 60.00%        | 0            | 7.10%              | 2.55%             |
| RMIQCP    | 2       | 0         | 0.00%         | 0            | 0.00%              | 0.00%             |
| **Total** | **286** | **151**   | **52.80%**    | **5**        | **18.42%**         | **10.73%**        |

### Presolve impact on solving

In order to evaluate if AMPL presolving has a positive impact on problem solving an additional benchmark was conducted. The benchmark included 146 models to which AMPL has applied presolve in the mode loading benchmark. All models were solved using MINOS (a default AMPL solver) with presolving turn on and off. The summary of finding can be seen in the table bellow. 

| Characteristic            | Count |
| ------------------------- | ----- |
| Solution found mismatch   | 12    |
| Objective result mismatch | 27    |
| Presolve negative impact  | 43    |
| Presolve positive impact  | 57    |
| Presolve none impact      | 46    |

Detailed AMPL presolve impact on solving benchmark can be found [here](ampl-solving-times.md) and [here](ampl-solving-times.xlsx).